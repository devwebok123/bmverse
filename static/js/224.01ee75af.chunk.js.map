{"version":3,"file":"static/js/224.01ee75af.chunk.js","mappings":"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","sources":["../node_modules/exenv/index.js","../node_modules/object-assign/index.js","../node_modules/prop-types/factoryWithThrowingShims.js","../node_modules/prop-types/index.js","../node_modules/prop-types/lib/ReactPropTypesSecret.js","../node_modules/qr.js/lib/8BitByte.js","../node_modules/qr.js/lib/BitBuffer.js","../node_modules/qr.js/lib/ErrorCorrectLevel.js","../node_modules/qr.js/lib/Polynomial.js","../node_modules/qr.js/lib/QRCode.js","../node_modules/qr.js/lib/RSBlock.js","../node_modules/qr.js/lib/math.js","../node_modules/qr.js/lib/mode.js","../node_modules/qr.js/lib/util.js","../node_modules/react-lifecycles-compat/react-lifecycles-compat.es.js","../node_modules/react-modal/lib/components/Modal.js","../node_modules/react-modal/lib/components/ModalPortal.js","../node_modules/react-modal/lib/helpers/ariaAppHider.js","../node_modules/react-modal/lib/helpers/bodyTrap.js","../node_modules/react-modal/lib/helpers/classList.js","../node_modules/react-modal/lib/helpers/focusManager.js","../node_modules/react-modal/lib/helpers/portalOpenInstances.js","../node_modules/react-modal/lib/helpers/safeHTMLElement.js","../node_modules/react-modal/lib/helpers/scopeTab.js","../node_modules/react-modal/lib/helpers/tabbable.js","../node_modules/react-modal/lib/index.js","../node_modules/rtcpeerconnection-shim/rtcpeerconnection.js","../node_modules/sdp/sdp.js","../node_modules/warning/warning.js","../node_modules/webrtc-adapter/src/js/utils.js","../node_modules/webrtc-adapter/src/js/chrome/getusermedia.js","../node_modules/webrtc-adapter/src/js/chrome/getdisplaymedia.js","../node_modules/webrtc-adapter/src/js/chrome/chrome_shim.js","../node_modules/webrtc-adapter/src/js/edge/getusermedia.js","../node_modules/webrtc-adapter/src/js/edge/getdisplaymedia.js","../node_modules/webrtc-adapter/src/js/edge/edge_shim.js","../node_modules/webrtc-adapter/src/js/edge/filtericeservers.js","../node_modules/webrtc-adapter/src/js/firefox/getusermedia.js","../node_modules/webrtc-adapter/src/js/firefox/getdisplaymedia.js","../node_modules/webrtc-adapter/src/js/firefox/firefox_shim.js","../node_modules/webrtc-adapter/src/js/safari/safari_shim.js","../node_modules/webrtc-adapter/src/js/common_shim.js","../node_modules/webrtc-adapter/src/js/adapter_core.js","../node_modules/webrtc-adapter/src/js/adapter_factory.js","../node_modules/@babel/runtime/helpers/arrayWithHoles.js","../node_modules/@babel/runtime/helpers/iterableToArrayLimit.js","../node_modules/@babel/runtime/helpers/nonIterableRest.js","../node_modules/@babel/runtime/helpers/slicedToArray.js"],"sourcesContent":["/*!\n  Copyright (c) 2015 Jed Watson.\n  Based on code that is Copyright 2013-2015, Facebook, Inc.\n  All rights reserved.\n*/\n/* global define */\n\n(function () {\n\t'use strict';\n\n\tvar canUseDOM = !!(\n\t\ttypeof window !== 'undefined' &&\n\t\twindow.document &&\n\t\twindow.document.createElement\n\t);\n\n\tvar ExecutionEnvironment = {\n\n\t\tcanUseDOM: canUseDOM,\n\n\t\tcanUseWorkers: typeof Worker !== 'undefined',\n\n\t\tcanUseEventListeners:\n\t\t\tcanUseDOM && !!(window.addEventListener || window.attachEvent),\n\n\t\tcanUseViewport: canUseDOM && !!window.screen\n\n\t};\n\n\tif (typeof define === 'function' && typeof define.amd === 'object' && define.amd) {\n\t\tdefine(function () {\n\t\t\treturn ExecutionEnvironment;\n\t\t});\n\t} else if (typeof module !== 'undefined' && module.exports) {\n\t\tmodule.exports = ExecutionEnvironment;\n\t} else {\n\t\twindow.ExecutionEnvironment = ExecutionEnvironment;\n\t}\n\n}());\n","/*\nobject-assign\n(c) Sindre Sorhus\n@license MIT\n*/\n\n'use strict';\n/* eslint-disable no-unused-vars */\nvar getOwnPropertySymbols = Object.getOwnPropertySymbols;\nvar hasOwnProperty = Object.prototype.hasOwnProperty;\nvar propIsEnumerable = Object.prototype.propertyIsEnumerable;\n\nfunction toObject(val) {\n\tif (val === null || val === undefined) {\n\t\tthrow new TypeError('Object.assign cannot be called with null or undefined');\n\t}\n\n\treturn Object(val);\n}\n\nfunction shouldUseNative() {\n\ttry {\n\t\tif (!Object.assign) {\n\t\t\treturn false;\n\t\t}\n\n\t\t// Detect buggy property enumeration order in older V8 versions.\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=4118\n\t\tvar test1 = new String('abc');  // eslint-disable-line no-new-wrappers\n\t\ttest1[5] = 'de';\n\t\tif (Object.getOwnPropertyNames(test1)[0] === '5') {\n\t\t\treturn false;\n\t\t}\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=3056\n\t\tvar test2 = {};\n\t\tfor (var i = 0; i < 10; i++) {\n\t\t\ttest2['_' + String.fromCharCode(i)] = i;\n\t\t}\n\t\tvar order2 = Object.getOwnPropertyNames(test2).map(function (n) {\n\t\t\treturn test2[n];\n\t\t});\n\t\tif (order2.join('') !== '0123456789') {\n\t\t\treturn false;\n\t\t}\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=3056\n\t\tvar test3 = {};\n\t\t'abcdefghijklmnopqrst'.split('').forEach(function (letter) {\n\t\t\ttest3[letter] = letter;\n\t\t});\n\t\tif (Object.keys(Object.assign({}, test3)).join('') !==\n\t\t\t\t'abcdefghijklmnopqrst') {\n\t\t\treturn false;\n\t\t}\n\n\t\treturn true;\n\t} catch (err) {\n\t\t// We don't expect any of the above to throw, but better to be safe.\n\t\treturn false;\n\t}\n}\n\nmodule.exports = shouldUseNative() ? Object.assign : function (target, source) {\n\tvar from;\n\tvar to = toObject(target);\n\tvar symbols;\n\n\tfor (var s = 1; s < arguments.length; s++) {\n\t\tfrom = Object(arguments[s]);\n\n\t\tfor (var key in from) {\n\t\t\tif (hasOwnProperty.call(from, key)) {\n\t\t\t\tto[key] = from[key];\n\t\t\t}\n\t\t}\n\n\t\tif (getOwnPropertySymbols) {\n\t\t\tsymbols = getOwnPropertySymbols(from);\n\t\t\tfor (var i = 0; i < symbols.length; i++) {\n\t\t\t\tif (propIsEnumerable.call(from, symbols[i])) {\n\t\t\t\t\tto[symbols[i]] = from[symbols[i]];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\treturn to;\n};\n","/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n'use strict';\n\nvar ReactPropTypesSecret = require('./lib/ReactPropTypesSecret');\n\nfunction emptyFunction() {}\nfunction emptyFunctionWithReset() {}\nemptyFunctionWithReset.resetWarningCache = emptyFunction;\n\nmodule.exports = function() {\n  function shim(props, propName, componentName, location, propFullName, secret) {\n    if (secret === ReactPropTypesSecret) {\n      // It is still safe when called from React.\n      return;\n    }\n    var err = new Error(\n      'Calling PropTypes validators directly is not supported by the `prop-types` package. ' +\n      'Use PropTypes.checkPropTypes() to call them. ' +\n      'Read more at http://fb.me/use-check-prop-types'\n    );\n    err.name = 'Invariant Violation';\n    throw err;\n  };\n  shim.isRequired = shim;\n  function getShim() {\n    return shim;\n  };\n  // Important!\n  // Keep this list in sync with production version in `./factoryWithTypeCheckers.js`.\n  var ReactPropTypes = {\n    array: shim,\n    bigint: shim,\n    bool: shim,\n    func: shim,\n    number: shim,\n    object: shim,\n    string: shim,\n    symbol: shim,\n\n    any: shim,\n    arrayOf: getShim,\n    element: shim,\n    elementType: shim,\n    instanceOf: getShim,\n    node: shim,\n    objectOf: getShim,\n    oneOf: getShim,\n    oneOfType: getShim,\n    shape: getShim,\n    exact: getShim,\n\n    checkPropTypes: emptyFunctionWithReset,\n    resetWarningCache: emptyFunction\n  };\n\n  ReactPropTypes.PropTypes = ReactPropTypes;\n\n  return ReactPropTypes;\n};\n","/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nif (process.env.NODE_ENV !== 'production') {\n  var ReactIs = require('react-is');\n\n  // By explicitly using `prop-types` you are opting into new development behavior.\n  // http://fb.me/prop-types-in-prod\n  var throwOnDirectAccess = true;\n  module.exports = require('./factoryWithTypeCheckers')(ReactIs.isElement, throwOnDirectAccess);\n} else {\n  // By explicitly using `prop-types` you are opting into new production behavior.\n  // http://fb.me/prop-types-in-prod\n  module.exports = require('./factoryWithThrowingShims')();\n}\n","/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n'use strict';\n\nvar ReactPropTypesSecret = 'SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED';\n\nmodule.exports = ReactPropTypesSecret;\n","var mode = require('./mode');\n\nfunction QR8bitByte(data) {\n\tthis.mode = mode.MODE_8BIT_BYTE;\n\tthis.data = data;\n}\n\nQR8bitByte.prototype = {\n\n\tgetLength : function(buffer) {\n\t\treturn this.data.length;\n\t},\n\t\n\twrite : function(buffer) {\n\t\tfor (var i = 0; i < this.data.length; i++) {\n\t\t\t// not JIS ...\n\t\t\tbuffer.put(this.data.charCodeAt(i), 8);\n\t\t}\n\t}\n};\n\nmodule.exports = QR8bitByte;\n\n","function QRBitBuffer() {\n\tthis.buffer = new Array();\n\tthis.length = 0;\n}\n\nQRBitBuffer.prototype = {\n\n\tget : function(index) {\n\t\tvar bufIndex = Math.floor(index / 8);\n\t\treturn ( (this.buffer[bufIndex] >>> (7 - index % 8) ) & 1) == 1;\n\t},\n\t\n\tput : function(num, length) {\n\t\tfor (var i = 0; i < length; i++) {\n\t\t\tthis.putBit( ( (num >>> (length - i - 1) ) & 1) == 1);\n\t\t}\n\t},\n\t\n\tgetLengthInBits : function() {\n\t\treturn this.length;\n\t},\n\t\n\tputBit : function(bit) {\n\t\n\t\tvar bufIndex = Math.floor(this.length / 8);\n\t\tif (this.buffer.length <= bufIndex) {\n\t\t\tthis.buffer.push(0);\n\t\t}\n\t\n\t\tif (bit) {\n\t\t\tthis.buffer[bufIndex] |= (0x80 >>> (this.length % 8) );\n\t\t}\n\t\n\t\tthis.length++;\n\t}\n};\n\nmodule.exports = QRBitBuffer;\n","module.exports = {\n\tL : 1,\n\tM : 0,\n\tQ : 3,\n\tH : 2\n};\n\n","var math = require('./math');\n\nfunction QRPolynomial(num, shift) {\n\n\tif (num.length == undefined) {\n\t\tthrow new Error(num.length + \"/\" + shift);\n\t}\n\n\tvar offset = 0;\n\n\twhile (offset < num.length && num[offset] == 0) {\n\t\toffset++;\n\t}\n\n\tthis.num = new Array(num.length - offset + shift);\n\tfor (var i = 0; i < num.length - offset; i++) {\n\t\tthis.num[i] = num[i + offset];\n\t}\n}\n\nQRPolynomial.prototype = {\n\n\tget : function(index) {\n\t\treturn this.num[index];\n\t},\n\t\n\tgetLength : function() {\n\t\treturn this.num.length;\n\t},\n\t\n\tmultiply : function(e) {\n\t\n\t\tvar num = new Array(this.getLength() + e.getLength() - 1);\n\t\n\t\tfor (var i = 0; i < this.getLength(); i++) {\n\t\t\tfor (var j = 0; j < e.getLength(); j++) {\n\t\t\t\tnum[i + j] ^= math.gexp(math.glog(this.get(i) ) + math.glog(e.get(j) ) );\n\t\t\t}\n\t\t}\n\t\n\t\treturn new QRPolynomial(num, 0);\n\t},\n\t\n\tmod : function(e) {\n\t\n\t\tif (this.getLength() - e.getLength() < 0) {\n\t\t\treturn this;\n\t\t}\n\t\n\t\tvar ratio = math.glog(this.get(0) ) - math.glog(e.get(0) );\n\t\n\t\tvar num = new Array(this.getLength() );\n\t\t\n\t\tfor (var i = 0; i < this.getLength(); i++) {\n\t\t\tnum[i] = this.get(i);\n\t\t}\n\t\t\n\t\tfor (var i = 0; i < e.getLength(); i++) {\n\t\t\tnum[i] ^= math.gexp(math.glog(e.get(i) ) + ratio);\n\t\t}\n\t\n\t\t// recursive call\n\t\treturn new QRPolynomial(num, 0).mod(e);\n\t}\n};\n\nmodule.exports = QRPolynomial;\n","var BitByte = require('./8BitByte');\nvar RSBlock = require('./RSBlock');\nvar BitBuffer = require('./BitBuffer');\nvar util = require('./util');\nvar Polynomial = require('./Polynomial');\n\nfunction QRCode(typeNumber, errorCorrectLevel) {\n\tthis.typeNumber = typeNumber;\n\tthis.errorCorrectLevel = errorCorrectLevel;\n\tthis.modules = null;\n\tthis.moduleCount = 0;\n\tthis.dataCache = null;\n\tthis.dataList = [];\n}\n\n// for client side minification\nvar proto = QRCode.prototype;\n\nproto.addData = function(data) {\n\tvar newData = new BitByte(data);\n\tthis.dataList.push(newData);\n\tthis.dataCache = null;\n};\n\nproto.isDark = function(row, col) {\n\tif (row < 0 || this.moduleCount <= row || col < 0 || this.moduleCount <= col) {\n\t\tthrow new Error(row + \",\" + col);\n\t}\n\treturn this.modules[row][col];\n};\n\nproto.getModuleCount = function() {\n\treturn this.moduleCount;\n};\n\nproto.make = function() {\n\t// Calculate automatically typeNumber if provided is < 1\n\tif (this.typeNumber < 1 ){\n\t\tvar typeNumber = 1;\n\t\tfor (typeNumber = 1; typeNumber < 40; typeNumber++) {\n\t\t\tvar rsBlocks = RSBlock.getRSBlocks(typeNumber, this.errorCorrectLevel);\n\n\t\t\tvar buffer = new BitBuffer();\n\t\t\tvar totalDataCount = 0;\n\t\t\tfor (var i = 0; i < rsBlocks.length; i++) {\n\t\t\t\ttotalDataCount += rsBlocks[i].dataCount;\n\t\t\t}\n\n\t\t\tfor (var i = 0; i < this.dataList.length; i++) {\n\t\t\t\tvar data = this.dataList[i];\n\t\t\t\tbuffer.put(data.mode, 4);\n\t\t\t\tbuffer.put(data.getLength(), util.getLengthInBits(data.mode, typeNumber) );\n\t\t\t\tdata.write(buffer);\n\t\t\t}\n\t\t\tif (buffer.getLengthInBits() <= totalDataCount * 8)\n\t\t\t\tbreak;\n\t\t}\n\t\tthis.typeNumber = typeNumber;\n\t}\n\tthis.makeImpl(false, this.getBestMaskPattern() );\n};\n\nproto.makeImpl = function(test, maskPattern) {\n\t\n\tthis.moduleCount = this.typeNumber * 4 + 17;\n\tthis.modules = new Array(this.moduleCount);\n\t\n\tfor (var row = 0; row < this.moduleCount; row++) {\n\t\t\n\t\tthis.modules[row] = new Array(this.moduleCount);\n\t\t\n\t\tfor (var col = 0; col < this.moduleCount; col++) {\n\t\t\tthis.modules[row][col] = null;//(col + row) % 3;\n\t\t}\n\t}\n\n\tthis.setupPositionProbePattern(0, 0);\n\tthis.setupPositionProbePattern(this.moduleCount - 7, 0);\n\tthis.setupPositionProbePattern(0, this.moduleCount - 7);\n\tthis.setupPositionAdjustPattern();\n\tthis.setupTimingPattern();\n\tthis.setupTypeInfo(test, maskPattern);\n\t\n\tif (this.typeNumber >= 7) {\n\t\tthis.setupTypeNumber(test);\n\t}\n\n\tif (this.dataCache == null) {\n\t\tthis.dataCache = QRCode.createData(this.typeNumber, this.errorCorrectLevel, this.dataList);\n\t}\n\n\tthis.mapData(this.dataCache, maskPattern);\n};\n\nproto.setupPositionProbePattern = function(row, col)  {\n\t\n\tfor (var r = -1; r <= 7; r++) {\n\t\t\n\t\tif (row + r <= -1 || this.moduleCount <= row + r) continue;\n\t\t\n\t\tfor (var c = -1; c <= 7; c++) {\n\t\t\t\n\t\t\tif (col + c <= -1 || this.moduleCount <= col + c) continue;\n\t\t\t\n\t\t\tif ( (0 <= r && r <= 6 && (c == 0 || c == 6) )\n\t\t\t\t\t|| (0 <= c && c <= 6 && (r == 0 || r == 6) )\n\t\t\t\t\t|| (2 <= r && r <= 4 && 2 <= c && c <= 4) ) {\n\t\t\t\tthis.modules[row + r][col + c] = true;\n\t\t\t} else {\n\t\t\t\tthis.modules[row + r][col + c] = false;\n\t\t\t}\n\t\t}\t\t\n\t}\t\t\n};\n\nproto.getBestMaskPattern = function() {\n\n\tvar minLostPoint = 0;\n\tvar pattern = 0;\n\n\tfor (var i = 0; i < 8; i++) {\n\t\t\n\t\tthis.makeImpl(true, i);\n\n\t\tvar lostPoint = util.getLostPoint(this);\n\n\t\tif (i == 0 || minLostPoint >  lostPoint) {\n\t\t\tminLostPoint = lostPoint;\n\t\t\tpattern = i;\n\t\t}\n\t}\n\n\treturn pattern;\n};\n\nproto.createMovieClip = function(target_mc, instance_name, depth) {\n\n\tvar qr_mc = target_mc.createEmptyMovieClip(instance_name, depth);\n\tvar cs = 1;\n\n\tthis.make();\n\n\tfor (var row = 0; row < this.modules.length; row++) {\n\t\t\n\t\tvar y = row * cs;\n\t\t\n\t\tfor (var col = 0; col < this.modules[row].length; col++) {\n\n\t\t\tvar x = col * cs;\n\t\t\tvar dark = this.modules[row][col];\n\t\t\n\t\t\tif (dark) {\n\t\t\t\tqr_mc.beginFill(0, 100);\n\t\t\t\tqr_mc.moveTo(x, y);\n\t\t\t\tqr_mc.lineTo(x + cs, y);\n\t\t\t\tqr_mc.lineTo(x + cs, y + cs);\n\t\t\t\tqr_mc.lineTo(x, y + cs);\n\t\t\t\tqr_mc.endFill();\n\t\t\t}\n\t\t}\n\t}\n\t\n\treturn qr_mc;\n};\n\nproto.setupTimingPattern = function() {\n\t\n\tfor (var r = 8; r < this.moduleCount - 8; r++) {\n\t\tif (this.modules[r][6] != null) {\n\t\t\tcontinue;\n\t\t}\n\t\tthis.modules[r][6] = (r % 2 == 0);\n\t}\n\n\tfor (var c = 8; c < this.moduleCount - 8; c++) {\n\t\tif (this.modules[6][c] != null) {\n\t\t\tcontinue;\n\t\t}\n\t\tthis.modules[6][c] = (c % 2 == 0);\n\t}\n};\n\nproto.setupPositionAdjustPattern = function() {\n\n\tvar pos = util.getPatternPosition(this.typeNumber);\n\t\n\tfor (var i = 0; i < pos.length; i++) {\n\t\n\t\tfor (var j = 0; j < pos.length; j++) {\n\t\t\n\t\t\tvar row = pos[i];\n\t\t\tvar col = pos[j];\n\t\t\t\n\t\t\tif (this.modules[row][col] != null) {\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\t\n\t\t\tfor (var r = -2; r <= 2; r++) {\n\t\t\t\n\t\t\t\tfor (var c = -2; c <= 2; c++) {\n\t\t\t\t\n\t\t\t\t\tif (r == -2 || r == 2 || c == -2 || c == 2\n\t\t\t\t\t\t\t|| (r == 0 && c == 0) ) {\n\t\t\t\t\t\tthis.modules[row + r][col + c] = true;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.modules[row + r][col + c] = false;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n};\n\nproto.setupTypeNumber = function(test) {\n\n\tvar bits = util.getBCHTypeNumber(this.typeNumber);\n\n\tfor (var i = 0; i < 18; i++) {\n\t\tvar mod = (!test && ( (bits >> i) & 1) == 1);\n\t\tthis.modules[Math.floor(i / 3)][i % 3 + this.moduleCount - 8 - 3] = mod;\n\t}\n\n\tfor (var i = 0; i < 18; i++) {\n\t\tvar mod = (!test && ( (bits >> i) & 1) == 1);\n\t\tthis.modules[i % 3 + this.moduleCount - 8 - 3][Math.floor(i / 3)] = mod;\n\t}\n};\n\nproto.setupTypeInfo = function(test, maskPattern) {\n\n\tvar data = (this.errorCorrectLevel << 3) | maskPattern;\n\tvar bits = util.getBCHTypeInfo(data);\n\n\t// vertical\t\t\n\tfor (var i = 0; i < 15; i++) {\n\n\t\tvar mod = (!test && ( (bits >> i) & 1) == 1);\n\n\t\tif (i < 6) {\n\t\t\tthis.modules[i][8] = mod;\n\t\t} else if (i < 8) {\n\t\t\tthis.modules[i + 1][8] = mod;\n\t\t} else {\n\t\t\tthis.modules[this.moduleCount - 15 + i][8] = mod;\n\t\t}\n\t}\n\n\t// horizontal\n\tfor (var i = 0; i < 15; i++) {\n\n\t\tvar mod = (!test && ( (bits >> i) & 1) == 1);\n\t\t\n\t\tif (i < 8) {\n\t\t\tthis.modules[8][this.moduleCount - i - 1] = mod;\n\t\t} else if (i < 9) {\n\t\t\tthis.modules[8][15 - i - 1 + 1] = mod;\n\t\t} else {\n\t\t\tthis.modules[8][15 - i - 1] = mod;\n\t\t}\n\t}\n\n\t// fixed module\n\tthis.modules[this.moduleCount - 8][8] = (!test);\n};\n\nproto.mapData = function(data, maskPattern) {\n\t\n\tvar inc = -1;\n\tvar row = this.moduleCount - 1;\n\tvar bitIndex = 7;\n\tvar byteIndex = 0;\n\t\n\tfor (var col = this.moduleCount - 1; col > 0; col -= 2) {\n\n\t\tif (col == 6) col--;\n\n\t\twhile (true) {\n\n\t\t\tfor (var c = 0; c < 2; c++) {\n\t\t\t\t\n\t\t\t\tif (this.modules[row][col - c] == null) {\n\t\t\t\t\t\n\t\t\t\t\tvar dark = false;\n\n\t\t\t\t\tif (byteIndex < data.length) {\n\t\t\t\t\t\tdark = ( ( (data[byteIndex] >>> bitIndex) & 1) == 1);\n\t\t\t\t\t}\n\n\t\t\t\t\tvar mask = util.getMask(maskPattern, row, col - c);\n\n\t\t\t\t\tif (mask) {\n\t\t\t\t\t\tdark = !dark;\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tthis.modules[row][col - c] = dark;\n\t\t\t\t\tbitIndex--;\n\n\t\t\t\t\tif (bitIndex == -1) {\n\t\t\t\t\t\tbyteIndex++;\n\t\t\t\t\t\tbitIndex = 7;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\t\t\t\t\t\n\t\t\trow += inc;\n\n\t\t\tif (row < 0 || this.moduleCount <= row) {\n\t\t\t\trow -= inc;\n\t\t\t\tinc = -inc;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n};\n\nQRCode.PAD0 = 0xEC;\nQRCode.PAD1 = 0x11;\n\nQRCode.createData = function(typeNumber, errorCorrectLevel, dataList) {\n\t\n\tvar rsBlocks = RSBlock.getRSBlocks(typeNumber, errorCorrectLevel);\n\t\n\tvar buffer = new BitBuffer();\n\t\n\tfor (var i = 0; i < dataList.length; i++) {\n\t\tvar data = dataList[i];\n\t\tbuffer.put(data.mode, 4);\n\t\tbuffer.put(data.getLength(), util.getLengthInBits(data.mode, typeNumber) );\n\t\tdata.write(buffer);\n\t}\n\n\t// calc num max data.\n\tvar totalDataCount = 0;\n\tfor (var i = 0; i < rsBlocks.length; i++) {\n\t\ttotalDataCount += rsBlocks[i].dataCount;\n\t}\n\n\tif (buffer.getLengthInBits() > totalDataCount * 8) {\n\t\tthrow new Error(\"code length overflow. (\"\n\t\t\t+ buffer.getLengthInBits()\n\t\t\t+ \">\"\n\t\t\t+  totalDataCount * 8\n\t\t\t+ \")\");\n\t}\n\n\t// end code\n\tif (buffer.getLengthInBits() + 4 <= totalDataCount * 8) {\n\t\tbuffer.put(0, 4);\n\t}\n\n\t// padding\n\twhile (buffer.getLengthInBits() % 8 != 0) {\n\t\tbuffer.putBit(false);\n\t}\n\n\t// padding\n\twhile (true) {\n\t\t\n\t\tif (buffer.getLengthInBits() >= totalDataCount * 8) {\n\t\t\tbreak;\n\t\t}\n\t\tbuffer.put(QRCode.PAD0, 8);\n\t\t\n\t\tif (buffer.getLengthInBits() >= totalDataCount * 8) {\n\t\t\tbreak;\n\t\t}\n\t\tbuffer.put(QRCode.PAD1, 8);\n\t}\n\n\treturn QRCode.createBytes(buffer, rsBlocks);\n};\n\nQRCode.createBytes = function(buffer, rsBlocks) {\n\n\tvar offset = 0;\n\t\n\tvar maxDcCount = 0;\n\tvar maxEcCount = 0;\n\t\n\tvar dcdata = new Array(rsBlocks.length);\n\tvar ecdata = new Array(rsBlocks.length);\n\t\n\tfor (var r = 0; r < rsBlocks.length; r++) {\n\n\t\tvar dcCount = rsBlocks[r].dataCount;\n\t\tvar ecCount = rsBlocks[r].totalCount - dcCount;\n\n\t\tmaxDcCount = Math.max(maxDcCount, dcCount);\n\t\tmaxEcCount = Math.max(maxEcCount, ecCount);\n\t\t\n\t\tdcdata[r] = new Array(dcCount);\n\t\t\n\t\tfor (var i = 0; i < dcdata[r].length; i++) {\n\t\t\tdcdata[r][i] = 0xff & buffer.buffer[i + offset];\n\t\t}\n\t\toffset += dcCount;\n\t\t\n\t\tvar rsPoly = util.getErrorCorrectPolynomial(ecCount);\n\t\tvar rawPoly = new Polynomial(dcdata[r], rsPoly.getLength() - 1);\n\n\t\tvar modPoly = rawPoly.mod(rsPoly);\n\t\tecdata[r] = new Array(rsPoly.getLength() - 1);\n\t\tfor (var i = 0; i < ecdata[r].length; i++) {\n            var modIndex = i + modPoly.getLength() - ecdata[r].length;\n\t\t\tecdata[r][i] = (modIndex >= 0)? modPoly.get(modIndex) : 0;\n\t\t}\n\n\t}\n\t\n\tvar totalCodeCount = 0;\n\tfor (var i = 0; i < rsBlocks.length; i++) {\n\t\ttotalCodeCount += rsBlocks[i].totalCount;\n\t}\n\n\tvar data = new Array(totalCodeCount);\n\tvar index = 0;\n\n\tfor (var i = 0; i < maxDcCount; i++) {\n\t\tfor (var r = 0; r < rsBlocks.length; r++) {\n\t\t\tif (i < dcdata[r].length) {\n\t\t\t\tdata[index++] = dcdata[r][i];\n\t\t\t}\n\t\t}\n\t}\n\n\tfor (var i = 0; i < maxEcCount; i++) {\n\t\tfor (var r = 0; r < rsBlocks.length; r++) {\n\t\t\tif (i < ecdata[r].length) {\n\t\t\t\tdata[index++] = ecdata[r][i];\n\t\t\t}\n\t\t}\n\t}\n\n\treturn data;\n};\n\nmodule.exports = QRCode;\n\n","// ErrorCorrectLevel\nvar ECL = require('./ErrorCorrectLevel');\n\nfunction QRRSBlock(totalCount, dataCount) {\n\tthis.totalCount = totalCount;\n\tthis.dataCount  = dataCount;\n}\n\nQRRSBlock.RS_BLOCK_TABLE = [\n\n\t// L\n\t// M\n\t// Q\n\t// H\n\n\t// 1\n\t[1, 26, 19],\n\t[1, 26, 16],\n\t[1, 26, 13],\n\t[1, 26, 9],\n\t\n\t// 2\n\t[1, 44, 34],\n\t[1, 44, 28],\n\t[1, 44, 22],\n\t[1, 44, 16],\n\n\t// 3\n\t[1, 70, 55],\n\t[1, 70, 44],\n\t[2, 35, 17],\n\t[2, 35, 13],\n\n\t// 4\t\t\n\t[1, 100, 80],\n\t[2, 50, 32],\n\t[2, 50, 24],\n\t[4, 25, 9],\n\t\n\t// 5\n\t[1, 134, 108],\n\t[2, 67, 43],\n\t[2, 33, 15, 2, 34, 16],\n\t[2, 33, 11, 2, 34, 12],\n\t\n\t// 6\n\t[2, 86, 68],\n\t[4, 43, 27],\n\t[4, 43, 19],\n\t[4, 43, 15],\n\t\n\t// 7\t\t\n\t[2, 98, 78],\n\t[4, 49, 31],\n\t[2, 32, 14, 4, 33, 15],\n\t[4, 39, 13, 1, 40, 14],\n\t\n\t// 8\n\t[2, 121, 97],\n\t[2, 60, 38, 2, 61, 39],\n\t[4, 40, 18, 2, 41, 19],\n\t[4, 40, 14, 2, 41, 15],\n\t\n\t// 9\n\t[2, 146, 116],\n\t[3, 58, 36, 2, 59, 37],\n\t[4, 36, 16, 4, 37, 17],\n\t[4, 36, 12, 4, 37, 13],\n\t\n\t// 10\t\t\n\t[2, 86, 68, 2, 87, 69],\n\t[4, 69, 43, 1, 70, 44],\n\t[6, 43, 19, 2, 44, 20],\n\t[6, 43, 15, 2, 44, 16],\n\n\t// 11\n\t[4, 101, 81],\n\t[1, 80, 50, 4, 81, 51],\n\t[4, 50, 22, 4, 51, 23],\n\t[3, 36, 12, 8, 37, 13],\n\n\t// 12\n\t[2, 116, 92, 2, 117, 93],\n\t[6, 58, 36, 2, 59, 37],\n\t[4, 46, 20, 6, 47, 21],\n\t[7, 42, 14, 4, 43, 15],\n\n\t// 13\n\t[4, 133, 107],\n\t[8, 59, 37, 1, 60, 38],\n\t[8, 44, 20, 4, 45, 21],\n\t[12, 33, 11, 4, 34, 12],\n\n\t// 14\n\t[3, 145, 115, 1, 146, 116],\n\t[4, 64, 40, 5, 65, 41],\n\t[11, 36, 16, 5, 37, 17],\n\t[11, 36, 12, 5, 37, 13],\n\n\t// 15\n\t[5, 109, 87, 1, 110, 88],\n\t[5, 65, 41, 5, 66, 42],\n\t[5, 54, 24, 7, 55, 25],\n\t[11, 36, 12],\n\n\t// 16\n\t[5, 122, 98, 1, 123, 99],\n\t[7, 73, 45, 3, 74, 46],\n\t[15, 43, 19, 2, 44, 20],\n\t[3, 45, 15, 13, 46, 16],\n\n\t// 17\n\t[1, 135, 107, 5, 136, 108],\n\t[10, 74, 46, 1, 75, 47],\n\t[1, 50, 22, 15, 51, 23],\n\t[2, 42, 14, 17, 43, 15],\n\n\t// 18\n\t[5, 150, 120, 1, 151, 121],\n\t[9, 69, 43, 4, 70, 44],\n\t[17, 50, 22, 1, 51, 23],\n\t[2, 42, 14, 19, 43, 15],\n\n\t// 19\n\t[3, 141, 113, 4, 142, 114],\n\t[3, 70, 44, 11, 71, 45],\n\t[17, 47, 21, 4, 48, 22],\n\t[9, 39, 13, 16, 40, 14],\n\n\t// 20\n\t[3, 135, 107, 5, 136, 108],\n\t[3, 67, 41, 13, 68, 42],\n\t[15, 54, 24, 5, 55, 25],\n\t[15, 43, 15, 10, 44, 16],\n\n\t// 21\n\t[4, 144, 116, 4, 145, 117],\n\t[17, 68, 42],\n\t[17, 50, 22, 6, 51, 23],\n\t[19, 46, 16, 6, 47, 17],\n\n\t// 22\n\t[2, 139, 111, 7, 140, 112],\n\t[17, 74, 46],\n\t[7, 54, 24, 16, 55, 25],\n\t[34, 37, 13],\n\n\t// 23\n\t[4, 151, 121, 5, 152, 122],\n\t[4, 75, 47, 14, 76, 48],\n\t[11, 54, 24, 14, 55, 25],\n\t[16, 45, 15, 14, 46, 16],\n\n\t// 24\n\t[6, 147, 117, 4, 148, 118],\n\t[6, 73, 45, 14, 74, 46],\n\t[11, 54, 24, 16, 55, 25],\n\t[30, 46, 16, 2, 47, 17],\n\n\t// 25\n\t[8, 132, 106, 4, 133, 107],\n\t[8, 75, 47, 13, 76, 48],\n\t[7, 54, 24, 22, 55, 25],\n\t[22, 45, 15, 13, 46, 16],\n\n\t// 26\n\t[10, 142, 114, 2, 143, 115],\n\t[19, 74, 46, 4, 75, 47],\n\t[28, 50, 22, 6, 51, 23],\n\t[33, 46, 16, 4, 47, 17],\n\n\t// 27\n\t[8, 152, 122, 4, 153, 123],\n\t[22, 73, 45, 3, 74, 46],\n\t[8, 53, 23, 26, 54, 24],\n\t[12, 45, 15, 28, 46, 16],\n\n\t// 28\n\t[3, 147, 117, 10, 148, 118],\n\t[3, 73, 45, 23, 74, 46],\n\t[4, 54, 24, 31, 55, 25],\n\t[11, 45, 15, 31, 46, 16],\n\n\t// 29\n\t[7, 146, 116, 7, 147, 117],\n\t[21, 73, 45, 7, 74, 46],\n\t[1, 53, 23, 37, 54, 24],\n\t[19, 45, 15, 26, 46, 16],\n\n\t// 30\n\t[5, 145, 115, 10, 146, 116],\n\t[19, 75, 47, 10, 76, 48],\n\t[15, 54, 24, 25, 55, 25],\n\t[23, 45, 15, 25, 46, 16],\n\n\t// 31\n\t[13, 145, 115, 3, 146, 116],\n\t[2, 74, 46, 29, 75, 47],\n\t[42, 54, 24, 1, 55, 25],\n\t[23, 45, 15, 28, 46, 16],\n\n\t// 32\n\t[17, 145, 115],\n\t[10, 74, 46, 23, 75, 47],\n\t[10, 54, 24, 35, 55, 25],\n\t[19, 45, 15, 35, 46, 16],\n\n\t// 33\n\t[17, 145, 115, 1, 146, 116],\n\t[14, 74, 46, 21, 75, 47],\n\t[29, 54, 24, 19, 55, 25],\n\t[11, 45, 15, 46, 46, 16],\n\n\t// 34\n\t[13, 145, 115, 6, 146, 116],\n\t[14, 74, 46, 23, 75, 47],\n\t[44, 54, 24, 7, 55, 25],\n\t[59, 46, 16, 1, 47, 17],\n\n\t// 35\n\t[12, 151, 121, 7, 152, 122],\n\t[12, 75, 47, 26, 76, 48],\n\t[39, 54, 24, 14, 55, 25],\n\t[22, 45, 15, 41, 46, 16],\n\n\t// 36\n\t[6, 151, 121, 14, 152, 122],\n\t[6, 75, 47, 34, 76, 48],\n\t[46, 54, 24, 10, 55, 25],\n\t[2, 45, 15, 64, 46, 16],\n\n\t// 37\n\t[17, 152, 122, 4, 153, 123],\n\t[29, 74, 46, 14, 75, 47],\n\t[49, 54, 24, 10, 55, 25],\n\t[24, 45, 15, 46, 46, 16],\n\n\t// 38\n\t[4, 152, 122, 18, 153, 123],\n\t[13, 74, 46, 32, 75, 47],\n\t[48, 54, 24, 14, 55, 25],\n\t[42, 45, 15, 32, 46, 16],\n\n\t// 39\n\t[20, 147, 117, 4, 148, 118],\n\t[40, 75, 47, 7, 76, 48],\n\t[43, 54, 24, 22, 55, 25],\n\t[10, 45, 15, 67, 46, 16],\n\n\t// 40\n\t[19, 148, 118, 6, 149, 119],\n\t[18, 75, 47, 31, 76, 48],\n\t[34, 54, 24, 34, 55, 25],\n\t[20, 45, 15, 61, 46, 16]\n];\n\nQRRSBlock.getRSBlocks = function(typeNumber, errorCorrectLevel) {\n\t\n\tvar rsBlock = QRRSBlock.getRsBlockTable(typeNumber, errorCorrectLevel);\n\t\n\tif (rsBlock == undefined) {\n\t\tthrow new Error(\"bad rs block @ typeNumber:\" + typeNumber + \"/errorCorrectLevel:\" + errorCorrectLevel);\n\t}\n\n\tvar length = rsBlock.length / 3;\n\t\n\tvar list = new Array();\n\t\n\tfor (var i = 0; i < length; i++) {\n\n\t\tvar count = rsBlock[i * 3 + 0];\n\t\tvar totalCount = rsBlock[i * 3 + 1];\n\t\tvar dataCount  = rsBlock[i * 3 + 2];\n\n\t\tfor (var j = 0; j < count; j++) {\n\t\t\tlist.push(new QRRSBlock(totalCount, dataCount) );\t\n\t\t}\n\t}\n\t\n\treturn list;\n}\n\nQRRSBlock.getRsBlockTable = function(typeNumber, errorCorrectLevel) {\n\n\tswitch(errorCorrectLevel) {\n\tcase ECL.L :\n\t\treturn QRRSBlock.RS_BLOCK_TABLE[(typeNumber - 1) * 4 + 0];\n\tcase ECL.M :\n\t\treturn QRRSBlock.RS_BLOCK_TABLE[(typeNumber - 1) * 4 + 1];\n\tcase ECL.Q :\n\t\treturn QRRSBlock.RS_BLOCK_TABLE[(typeNumber - 1) * 4 + 2];\n\tcase ECL.H :\n\t\treturn QRRSBlock.RS_BLOCK_TABLE[(typeNumber - 1) * 4 + 3];\n\tdefault :\n\t\treturn undefined;\n\t}\n}\n\nmodule.exports = QRRSBlock;\n","var QRMath = {\n\n\tglog : function(n) {\n\t\n\t\tif (n < 1) {\n\t\t\tthrow new Error(\"glog(\" + n + \")\");\n\t\t}\n\t\t\n\t\treturn QRMath.LOG_TABLE[n];\n\t},\n\t\n\tgexp : function(n) {\n\t\n\t\twhile (n < 0) {\n\t\t\tn += 255;\n\t\t}\n\t\n\t\twhile (n >= 256) {\n\t\t\tn -= 255;\n\t\t}\n\t\n\t\treturn QRMath.EXP_TABLE[n];\n\t},\n\t\n\tEXP_TABLE : new Array(256),\n\t\n\tLOG_TABLE : new Array(256)\n\n};\n\t\nfor (var i = 0; i < 8; i++) {\n\tQRMath.EXP_TABLE[i] = 1 << i;\n}\nfor (var i = 8; i < 256; i++) {\n\tQRMath.EXP_TABLE[i] = QRMath.EXP_TABLE[i - 4]\n\t\t^ QRMath.EXP_TABLE[i - 5]\n\t\t^ QRMath.EXP_TABLE[i - 6]\n\t\t^ QRMath.EXP_TABLE[i - 8];\n}\nfor (var i = 0; i < 255; i++) {\n\tQRMath.LOG_TABLE[QRMath.EXP_TABLE[i] ] = i;\n}\n\nmodule.exports = QRMath;\n","module.exports = {\n\tMODE_NUMBER :\t\t1 << 0,\n\tMODE_ALPHA_NUM : \t1 << 1,\n\tMODE_8BIT_BYTE : \t1 << 2,\n\tMODE_KANJI :\t\t1 << 3\n};\n","var Mode = require('./mode');\nvar Polynomial = require('./Polynomial');\nvar math = require('./math');\n\nvar QRMaskPattern = {\n\tPATTERN000 : 0,\n\tPATTERN001 : 1,\n\tPATTERN010 : 2,\n\tPATTERN011 : 3,\n\tPATTERN100 : 4,\n\tPATTERN101 : 5,\n\tPATTERN110 : 6,\n\tPATTERN111 : 7\n};\n\nvar QRUtil = {\n\n    PATTERN_POSITION_TABLE : [\n\t    [],\n\t    [6, 18],\n\t    [6, 22],\n\t    [6, 26],\n\t    [6, 30],\n\t    [6, 34],\n\t    [6, 22, 38],\n\t    [6, 24, 42],\n\t    [6, 26, 46],\n\t    [6, 28, 50],\n\t    [6, 30, 54],\t\t\n\t    [6, 32, 58],\n\t    [6, 34, 62],\n\t    [6, 26, 46, 66],\n\t    [6, 26, 48, 70],\n\t    [6, 26, 50, 74],\n\t    [6, 30, 54, 78],\n\t    [6, 30, 56, 82],\n\t    [6, 30, 58, 86],\n\t    [6, 34, 62, 90],\n\t    [6, 28, 50, 72, 94],\n\t    [6, 26, 50, 74, 98],\n\t    [6, 30, 54, 78, 102],\n\t    [6, 28, 54, 80, 106],\n\t    [6, 32, 58, 84, 110],\n\t    [6, 30, 58, 86, 114],\n\t    [6, 34, 62, 90, 118],\n\t    [6, 26, 50, 74, 98, 122],\n\t    [6, 30, 54, 78, 102, 126],\n\t    [6, 26, 52, 78, 104, 130],\n\t    [6, 30, 56, 82, 108, 134],\n\t    [6, 34, 60, 86, 112, 138],\n\t    [6, 30, 58, 86, 114, 142],\n\t    [6, 34, 62, 90, 118, 146],\n\t    [6, 30, 54, 78, 102, 126, 150],\n\t    [6, 24, 50, 76, 102, 128, 154],\n\t    [6, 28, 54, 80, 106, 132, 158],\n\t    [6, 32, 58, 84, 110, 136, 162],\n\t    [6, 26, 54, 82, 110, 138, 166],\n\t    [6, 30, 58, 86, 114, 142, 170]\n    ],\n\n    G15 : (1 << 10) | (1 << 8) | (1 << 5) | (1 << 4) | (1 << 2) | (1 << 1) | (1 << 0),\n    G18 : (1 << 12) | (1 << 11) | (1 << 10) | (1 << 9) | (1 << 8) | (1 << 5) | (1 << 2) | (1 << 0),\n    G15_MASK : (1 << 14) | (1 << 12) | (1 << 10)\t| (1 << 4) | (1 << 1),\n\n    getBCHTypeInfo : function(data) {\n\t    var d = data << 10;\n\t    while (QRUtil.getBCHDigit(d) - QRUtil.getBCHDigit(QRUtil.G15) >= 0) {\n\t\t    d ^= (QRUtil.G15 << (QRUtil.getBCHDigit(d) - QRUtil.getBCHDigit(QRUtil.G15) ) ); \t\n\t    }\n\t    return ( (data << 10) | d) ^ QRUtil.G15_MASK;\n    },\n\n    getBCHTypeNumber : function(data) {\n\t    var d = data << 12;\n\t    while (QRUtil.getBCHDigit(d) - QRUtil.getBCHDigit(QRUtil.G18) >= 0) {\n\t\t    d ^= (QRUtil.G18 << (QRUtil.getBCHDigit(d) - QRUtil.getBCHDigit(QRUtil.G18) ) ); \t\n\t    }\n\t    return (data << 12) | d;\n    },\n\n    getBCHDigit : function(data) {\n\n\t    var digit = 0;\n\n\t    while (data != 0) {\n\t\t    digit++;\n\t\t    data >>>= 1;\n\t    }\n\n\t    return digit;\n    },\n\n    getPatternPosition : function(typeNumber) {\n\t    return QRUtil.PATTERN_POSITION_TABLE[typeNumber - 1];\n    },\n\n    getMask : function(maskPattern, i, j) {\n\t    \n\t    switch (maskPattern) {\n\t\t    \n\t    case QRMaskPattern.PATTERN000 : return (i + j) % 2 == 0;\n\t    case QRMaskPattern.PATTERN001 : return i % 2 == 0;\n\t    case QRMaskPattern.PATTERN010 : return j % 3 == 0;\n\t    case QRMaskPattern.PATTERN011 : return (i + j) % 3 == 0;\n\t    case QRMaskPattern.PATTERN100 : return (Math.floor(i / 2) + Math.floor(j / 3) ) % 2 == 0;\n\t    case QRMaskPattern.PATTERN101 : return (i * j) % 2 + (i * j) % 3 == 0;\n\t    case QRMaskPattern.PATTERN110 : return ( (i * j) % 2 + (i * j) % 3) % 2 == 0;\n\t    case QRMaskPattern.PATTERN111 : return ( (i * j) % 3 + (i + j) % 2) % 2 == 0;\n\n\t    default :\n\t\t    throw new Error(\"bad maskPattern:\" + maskPattern);\n\t    }\n    },\n\n    getErrorCorrectPolynomial : function(errorCorrectLength) {\n\n\t    var a = new Polynomial([1], 0);\n\n\t    for (var i = 0; i < errorCorrectLength; i++) {\n\t\t    a = a.multiply(new Polynomial([1, math.gexp(i)], 0) );\n\t    }\n\n\t    return a;\n    },\n\n    getLengthInBits : function(mode, type) {\n\n\t    if (1 <= type && type < 10) {\n\n\t\t    // 1 - 9\n\n\t\t    switch(mode) {\n\t\t    case Mode.MODE_NUMBER \t: return 10;\n\t\t    case Mode.MODE_ALPHA_NUM \t: return 9;\n\t\t    case Mode.MODE_8BIT_BYTE\t: return 8;\n\t\t    case Mode.MODE_KANJI  \t: return 8;\n\t\t    default :\n\t\t\t    throw new Error(\"mode:\" + mode);\n\t\t    }\n\n\t    } else if (type < 27) {\n\n\t\t    // 10 - 26\n\n\t\t    switch(mode) {\n\t\t    case Mode.MODE_NUMBER \t: return 12;\n\t\t    case Mode.MODE_ALPHA_NUM \t: return 11;\n\t\t    case Mode.MODE_8BIT_BYTE\t: return 16;\n\t\t    case Mode.MODE_KANJI  \t: return 10;\n\t\t    default :\n\t\t\t    throw new Error(\"mode:\" + mode);\n\t\t    }\n\n\t    } else if (type < 41) {\n\n\t\t    // 27 - 40\n\n\t\t    switch(mode) {\n\t\t    case Mode.MODE_NUMBER \t: return 14;\n\t\t    case Mode.MODE_ALPHA_NUM\t: return 13;\n\t\t    case Mode.MODE_8BIT_BYTE\t: return 16;\n\t\t    case Mode.MODE_KANJI  \t: return 12;\n\t\t    default :\n\t\t\t    throw new Error(\"mode:\" + mode);\n\t\t    }\n\n\t    } else {\n\t\t    throw new Error(\"type:\" + type);\n\t    }\n    },\n\n    getLostPoint : function(qrCode) {\n\t    \n\t    var moduleCount = qrCode.getModuleCount();\n\t    \n\t    var lostPoint = 0;\n\t    \n\t    // LEVEL1\n\t    \n\t    for (var row = 0; row < moduleCount; row++) {\n\n\t\t    for (var col = 0; col < moduleCount; col++) {\n\n\t\t\t    var sameCount = 0;\n\t\t\t    var dark = qrCode.isDark(row, col);\n\n\t\t\t\tfor (var r = -1; r <= 1; r++) {\n\n\t\t\t\t    if (row + r < 0 || moduleCount <= row + r) {\n\t\t\t\t\t    continue;\n\t\t\t\t    }\n\n\t\t\t\t    for (var c = -1; c <= 1; c++) {\n\n\t\t\t\t\t    if (col + c < 0 || moduleCount <= col + c) {\n\t\t\t\t\t\t    continue;\n\t\t\t\t\t    }\n\n\t\t\t\t\t    if (r == 0 && c == 0) {\n\t\t\t\t\t\t    continue;\n\t\t\t\t\t    }\n\n\t\t\t\t\t    if (dark == qrCode.isDark(row + r, col + c) ) {\n\t\t\t\t\t\t    sameCount++;\n\t\t\t\t\t    }\n\t\t\t\t    }\n\t\t\t    }\n\n\t\t\t    if (sameCount > 5) {\n\t\t\t\t    lostPoint += (3 + sameCount - 5);\n\t\t\t    }\n\t\t    }\n\t    }\n\n\t    // LEVEL2\n\n\t    for (var row = 0; row < moduleCount - 1; row++) {\n\t\t    for (var col = 0; col < moduleCount - 1; col++) {\n\t\t\t    var count = 0;\n\t\t\t    if (qrCode.isDark(row,     col    ) ) count++;\n\t\t\t    if (qrCode.isDark(row + 1, col    ) ) count++;\n\t\t\t    if (qrCode.isDark(row,     col + 1) ) count++;\n\t\t\t    if (qrCode.isDark(row + 1, col + 1) ) count++;\n\t\t\t    if (count == 0 || count == 4) {\n\t\t\t\t    lostPoint += 3;\n\t\t\t    }\n\t\t    }\n\t    }\n\n\t    // LEVEL3\n\n\t    for (var row = 0; row < moduleCount; row++) {\n\t\t    for (var col = 0; col < moduleCount - 6; col++) {\n\t\t\t    if (qrCode.isDark(row, col)\n\t\t\t\t\t    && !qrCode.isDark(row, col + 1)\n\t\t\t\t\t    &&  qrCode.isDark(row, col + 2)\n\t\t\t\t\t    &&  qrCode.isDark(row, col + 3)\n\t\t\t\t\t    &&  qrCode.isDark(row, col + 4)\n\t\t\t\t\t    && !qrCode.isDark(row, col + 5)\n\t\t\t\t\t    &&  qrCode.isDark(row, col + 6) ) {\n\t\t\t\t    lostPoint += 40;\n\t\t\t    }\n\t\t    }\n\t    }\n\n\t    for (var col = 0; col < moduleCount; col++) {\n\t\t    for (var row = 0; row < moduleCount - 6; row++) {\n\t\t\t    if (qrCode.isDark(row, col)\n\t\t\t\t\t    && !qrCode.isDark(row + 1, col)\n\t\t\t\t\t    &&  qrCode.isDark(row + 2, col)\n\t\t\t\t\t    &&  qrCode.isDark(row + 3, col)\n\t\t\t\t\t    &&  qrCode.isDark(row + 4, col)\n\t\t\t\t\t    && !qrCode.isDark(row + 5, col)\n\t\t\t\t\t    &&  qrCode.isDark(row + 6, col) ) {\n\t\t\t\t    lostPoint += 40;\n\t\t\t    }\n\t\t    }\n\t    }\n\n\t    // LEVEL4\n\t    \n\t    var darkCount = 0;\n\n\t    for (var col = 0; col < moduleCount; col++) {\n\t\t    for (var row = 0; row < moduleCount; row++) {\n\t\t\t    if (qrCode.isDark(row, col) ) {\n\t\t\t\t    darkCount++;\n\t\t\t    }\n\t\t    }\n\t    }\n\t    \n\t    var ratio = Math.abs(100 * darkCount / moduleCount / moduleCount - 50) / 5;\n\t    lostPoint += ratio * 10;\n\n\t    return lostPoint;\t\t\n    }\n};\n\nmodule.exports = QRUtil;\n","/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nfunction componentWillMount() {\n  // Call this.constructor.gDSFP to support sub-classes.\n  var state = this.constructor.getDerivedStateFromProps(this.props, this.state);\n  if (state !== null && state !== undefined) {\n    this.setState(state);\n  }\n}\n\nfunction componentWillReceiveProps(nextProps) {\n  // Call this.constructor.gDSFP to support sub-classes.\n  // Use the setState() updater to ensure state isn't stale in certain edge cases.\n  function updater(prevState) {\n    var state = this.constructor.getDerivedStateFromProps(nextProps, prevState);\n    return state !== null && state !== undefined ? state : null;\n  }\n  // Binding \"this\" is important for shallow renderer support.\n  this.setState(updater.bind(this));\n}\n\nfunction componentWillUpdate(nextProps, nextState) {\n  try {\n    var prevProps = this.props;\n    var prevState = this.state;\n    this.props = nextProps;\n    this.state = nextState;\n    this.__reactInternalSnapshotFlag = true;\n    this.__reactInternalSnapshot = this.getSnapshotBeforeUpdate(\n      prevProps,\n      prevState\n    );\n  } finally {\n    this.props = prevProps;\n    this.state = prevState;\n  }\n}\n\n// React may warn about cWM/cWRP/cWU methods being deprecated.\n// Add a flag to suppress these warnings for this special case.\ncomponentWillMount.__suppressDeprecationWarning = true;\ncomponentWillReceiveProps.__suppressDeprecationWarning = true;\ncomponentWillUpdate.__suppressDeprecationWarning = true;\n\nfunction polyfill(Component) {\n  var prototype = Component.prototype;\n\n  if (!prototype || !prototype.isReactComponent) {\n    throw new Error('Can only polyfill class components');\n  }\n\n  if (\n    typeof Component.getDerivedStateFromProps !== 'function' &&\n    typeof prototype.getSnapshotBeforeUpdate !== 'function'\n  ) {\n    return Component;\n  }\n\n  // If new component APIs are defined, \"unsafe\" lifecycles won't be called.\n  // Error if any of these lifecycles are present,\n  // Because they would work differently between older and newer (16.3+) versions of React.\n  var foundWillMountName = null;\n  var foundWillReceivePropsName = null;\n  var foundWillUpdateName = null;\n  if (typeof prototype.componentWillMount === 'function') {\n    foundWillMountName = 'componentWillMount';\n  } else if (typeof prototype.UNSAFE_componentWillMount === 'function') {\n    foundWillMountName = 'UNSAFE_componentWillMount';\n  }\n  if (typeof prototype.componentWillReceiveProps === 'function') {\n    foundWillReceivePropsName = 'componentWillReceiveProps';\n  } else if (typeof prototype.UNSAFE_componentWillReceiveProps === 'function') {\n    foundWillReceivePropsName = 'UNSAFE_componentWillReceiveProps';\n  }\n  if (typeof prototype.componentWillUpdate === 'function') {\n    foundWillUpdateName = 'componentWillUpdate';\n  } else if (typeof prototype.UNSAFE_componentWillUpdate === 'function') {\n    foundWillUpdateName = 'UNSAFE_componentWillUpdate';\n  }\n  if (\n    foundWillMountName !== null ||\n    foundWillReceivePropsName !== null ||\n    foundWillUpdateName !== null\n  ) {\n    var componentName = Component.displayName || Component.name;\n    var newApiName =\n      typeof Component.getDerivedStateFromProps === 'function'\n        ? 'getDerivedStateFromProps()'\n        : 'getSnapshotBeforeUpdate()';\n\n    throw Error(\n      'Unsafe legacy lifecycles will not be called for components using new component APIs.\\n\\n' +\n        componentName +\n        ' uses ' +\n        newApiName +\n        ' but also contains the following legacy lifecycles:' +\n        (foundWillMountName !== null ? '\\n  ' + foundWillMountName : '') +\n        (foundWillReceivePropsName !== null\n          ? '\\n  ' + foundWillReceivePropsName\n          : '') +\n        (foundWillUpdateName !== null ? '\\n  ' + foundWillUpdateName : '') +\n        '\\n\\nThe above lifecycles should be removed. Learn more about this warning here:\\n' +\n        'https://fb.me/react-async-component-lifecycle-hooks'\n    );\n  }\n\n  // React <= 16.2 does not support static getDerivedStateFromProps.\n  // As a workaround, use cWM and cWRP to invoke the new static lifecycle.\n  // Newer versions of React will ignore these lifecycles if gDSFP exists.\n  if (typeof Component.getDerivedStateFromProps === 'function') {\n    prototype.componentWillMount = componentWillMount;\n    prototype.componentWillReceiveProps = componentWillReceiveProps;\n  }\n\n  // React <= 16.2 does not support getSnapshotBeforeUpdate.\n  // As a workaround, use cWU to invoke the new lifecycle.\n  // Newer versions of React will ignore that lifecycle if gSBU exists.\n  if (typeof prototype.getSnapshotBeforeUpdate === 'function') {\n    if (typeof prototype.componentDidUpdate !== 'function') {\n      throw new Error(\n        'Cannot polyfill getSnapshotBeforeUpdate() for components that do not define componentDidUpdate() on the prototype'\n      );\n    }\n\n    prototype.componentWillUpdate = componentWillUpdate;\n\n    var componentDidUpdate = prototype.componentDidUpdate;\n\n    prototype.componentDidUpdate = function componentDidUpdatePolyfill(\n      prevProps,\n      prevState,\n      maybeSnapshot\n    ) {\n      // 16.3+ will not execute our will-update method;\n      // It will pass a snapshot value to did-update though.\n      // Older versions will require our polyfilled will-update value.\n      // We need to handle both cases, but can't just check for the presence of \"maybeSnapshot\",\n      // Because for <= 15.x versions this might be a \"prevContext\" object.\n      // We also can't just check \"__reactInternalSnapshot\",\n      // Because get-snapshot might return a falsy value.\n      // So check for the explicit __reactInternalSnapshotFlag flag to determine behavior.\n      var snapshot = this.__reactInternalSnapshotFlag\n        ? this.__reactInternalSnapshot\n        : maybeSnapshot;\n\n      componentDidUpdate.call(this, prevProps, prevState, snapshot);\n    };\n  }\n\n  return Component;\n}\n\nexport { polyfill };\n","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.bodyOpenClassName = exports.portalClassName = undefined;\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _react = require(\"react\");\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _reactDom = require(\"react-dom\");\n\nvar _reactDom2 = _interopRequireDefault(_reactDom);\n\nvar _propTypes = require(\"prop-types\");\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _ModalPortal = require(\"./ModalPortal\");\n\nvar _ModalPortal2 = _interopRequireDefault(_ModalPortal);\n\nvar _ariaAppHider = require(\"../helpers/ariaAppHider\");\n\nvar ariaAppHider = _interopRequireWildcard(_ariaAppHider);\n\nvar _safeHTMLElement = require(\"../helpers/safeHTMLElement\");\n\nvar _safeHTMLElement2 = _interopRequireDefault(_safeHTMLElement);\n\nvar _reactLifecyclesCompat = require(\"react-lifecycles-compat\");\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar portalClassName = exports.portalClassName = \"ReactModalPortal\";\nvar bodyOpenClassName = exports.bodyOpenClassName = \"ReactModal__Body--open\";\n\nvar isReact16 = _safeHTMLElement.canUseDOM && _reactDom2.default.createPortal !== undefined;\n\nvar createHTMLElement = function createHTMLElement(name) {\n  return document.createElement(name);\n};\n\nvar getCreatePortal = function getCreatePortal() {\n  return isReact16 ? _reactDom2.default.createPortal : _reactDom2.default.unstable_renderSubtreeIntoContainer;\n};\n\nfunction getParentElement(parentSelector) {\n  return parentSelector();\n}\n\nvar Modal = function (_Component) {\n  _inherits(Modal, _Component);\n\n  function Modal() {\n    var _ref;\n\n    var _temp, _this, _ret;\n\n    _classCallCheck(this, Modal);\n\n    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    return _ret = (_temp = (_this = _possibleConstructorReturn(this, (_ref = Modal.__proto__ || Object.getPrototypeOf(Modal)).call.apply(_ref, [this].concat(args))), _this), _this.removePortal = function () {\n      !isReact16 && _reactDom2.default.unmountComponentAtNode(_this.node);\n      var parent = getParentElement(_this.props.parentSelector);\n      if (parent && parent.contains(_this.node)) {\n        parent.removeChild(_this.node);\n      } else {\n        // eslint-disable-next-line no-console\n        console.warn('React-Modal: \"parentSelector\" prop did not returned any DOM ' + \"element. Make sure that the parent element is unmounted to \" + \"avoid any memory leaks.\");\n      }\n    }, _this.portalRef = function (ref) {\n      _this.portal = ref;\n    }, _this.renderPortal = function (props) {\n      var createPortal = getCreatePortal();\n      var portal = createPortal(_this, _react2.default.createElement(_ModalPortal2.default, _extends({ defaultStyles: Modal.defaultStyles }, props)), _this.node);\n      _this.portalRef(portal);\n    }, _temp), _possibleConstructorReturn(_this, _ret);\n  }\n\n  _createClass(Modal, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      if (!_safeHTMLElement.canUseDOM) return;\n\n      if (!isReact16) {\n        this.node = createHTMLElement(\"div\");\n      }\n      this.node.className = this.props.portalClassName;\n\n      var parent = getParentElement(this.props.parentSelector);\n      parent.appendChild(this.node);\n\n      !isReact16 && this.renderPortal(this.props);\n    }\n  }, {\n    key: \"getSnapshotBeforeUpdate\",\n    value: function getSnapshotBeforeUpdate(prevProps) {\n      var prevParent = getParentElement(prevProps.parentSelector);\n      var nextParent = getParentElement(this.props.parentSelector);\n      return { prevParent: prevParent, nextParent: nextParent };\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps, _, snapshot) {\n      if (!_safeHTMLElement.canUseDOM) return;\n      var _props = this.props,\n          isOpen = _props.isOpen,\n          portalClassName = _props.portalClassName;\n\n\n      if (prevProps.portalClassName !== portalClassName) {\n        this.node.className = portalClassName;\n      }\n\n      var prevParent = snapshot.prevParent,\n          nextParent = snapshot.nextParent;\n\n      if (nextParent !== prevParent) {\n        prevParent.removeChild(this.node);\n        nextParent.appendChild(this.node);\n      }\n\n      // Stop unnecessary renders if modal is remaining closed\n      if (!prevProps.isOpen && !isOpen) return;\n\n      !isReact16 && this.renderPortal(this.props);\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      if (!_safeHTMLElement.canUseDOM || !this.node || !this.portal) return;\n\n      var state = this.portal.state;\n      var now = Date.now();\n      var closesAt = state.isOpen && this.props.closeTimeoutMS && (state.closesAt || now + this.props.closeTimeoutMS);\n\n      if (closesAt) {\n        if (!state.beforeClose) {\n          this.portal.closeWithTimeout();\n        }\n\n        setTimeout(this.removePortal, closesAt - now);\n      } else {\n        this.removePortal();\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      if (!_safeHTMLElement.canUseDOM || !isReact16) {\n        return null;\n      }\n\n      if (!this.node && isReact16) {\n        this.node = createHTMLElement(\"div\");\n      }\n\n      var createPortal = getCreatePortal();\n      return createPortal(_react2.default.createElement(_ModalPortal2.default, _extends({\n        ref: this.portalRef,\n        defaultStyles: Modal.defaultStyles\n      }, this.props)), this.node);\n    }\n  }], [{\n    key: \"setAppElement\",\n    value: function setAppElement(element) {\n      ariaAppHider.setElement(element);\n    }\n\n    /* eslint-disable react/no-unused-prop-types */\n\n    /* eslint-enable react/no-unused-prop-types */\n\n  }]);\n\n  return Modal;\n}(_react.Component);\n\nModal.propTypes = {\n  isOpen: _propTypes2.default.bool.isRequired,\n  style: _propTypes2.default.shape({\n    content: _propTypes2.default.object,\n    overlay: _propTypes2.default.object\n  }),\n  portalClassName: _propTypes2.default.string,\n  bodyOpenClassName: _propTypes2.default.string,\n  htmlOpenClassName: _propTypes2.default.string,\n  className: _propTypes2.default.oneOfType([_propTypes2.default.string, _propTypes2.default.shape({\n    base: _propTypes2.default.string.isRequired,\n    afterOpen: _propTypes2.default.string.isRequired,\n    beforeClose: _propTypes2.default.string.isRequired\n  })]),\n  overlayClassName: _propTypes2.default.oneOfType([_propTypes2.default.string, _propTypes2.default.shape({\n    base: _propTypes2.default.string.isRequired,\n    afterOpen: _propTypes2.default.string.isRequired,\n    beforeClose: _propTypes2.default.string.isRequired\n  })]),\n  appElement: _propTypes2.default.oneOfType([_propTypes2.default.instanceOf(_safeHTMLElement2.default), _propTypes2.default.instanceOf(_safeHTMLElement.SafeHTMLCollection), _propTypes2.default.instanceOf(_safeHTMLElement.SafeNodeList), _propTypes2.default.arrayOf(_propTypes2.default.instanceOf(_safeHTMLElement2.default))]),\n  onAfterOpen: _propTypes2.default.func,\n  onRequestClose: _propTypes2.default.func,\n  closeTimeoutMS: _propTypes2.default.number,\n  ariaHideApp: _propTypes2.default.bool,\n  shouldFocusAfterRender: _propTypes2.default.bool,\n  shouldCloseOnOverlayClick: _propTypes2.default.bool,\n  shouldReturnFocusAfterClose: _propTypes2.default.bool,\n  preventScroll: _propTypes2.default.bool,\n  parentSelector: _propTypes2.default.func,\n  aria: _propTypes2.default.object,\n  data: _propTypes2.default.object,\n  role: _propTypes2.default.string,\n  contentLabel: _propTypes2.default.string,\n  shouldCloseOnEsc: _propTypes2.default.bool,\n  overlayRef: _propTypes2.default.func,\n  contentRef: _propTypes2.default.func,\n  id: _propTypes2.default.string,\n  overlayElement: _propTypes2.default.func,\n  contentElement: _propTypes2.default.func\n};\nModal.defaultProps = {\n  isOpen: false,\n  portalClassName: portalClassName,\n  bodyOpenClassName: bodyOpenClassName,\n  role: \"dialog\",\n  ariaHideApp: true,\n  closeTimeoutMS: 0,\n  shouldFocusAfterRender: true,\n  shouldCloseOnEsc: true,\n  shouldCloseOnOverlayClick: true,\n  shouldReturnFocusAfterClose: true,\n  preventScroll: false,\n  parentSelector: function parentSelector() {\n    return document.body;\n  },\n  overlayElement: function overlayElement(props, contentEl) {\n    return _react2.default.createElement(\n      \"div\",\n      props,\n      contentEl\n    );\n  },\n  contentElement: function contentElement(props, children) {\n    return _react2.default.createElement(\n      \"div\",\n      props,\n      children\n    );\n  }\n};\nModal.defaultStyles = {\n  overlay: {\n    position: \"fixed\",\n    top: 0,\n    left: 0,\n    right: 0,\n    bottom: 0,\n    backgroundColor: \"rgba(255, 255, 255, 0.75)\"\n  },\n  content: {\n    position: \"absolute\",\n    top: \"40px\",\n    left: \"40px\",\n    right: \"40px\",\n    bottom: \"40px\",\n    border: \"1px solid #ccc\",\n    background: \"#fff\",\n    overflow: \"auto\",\n    WebkitOverflowScrolling: \"touch\",\n    borderRadius: \"4px\",\n    outline: \"none\",\n    padding: \"20px\"\n  }\n};\n\n\n(0, _reactLifecyclesCompat.polyfill)(Modal);\n\nif (process.env.NODE_ENV !== \"production\") {\n  Modal.setCreateHTMLElement = function (fn) {\n    return createHTMLElement = fn;\n  };\n}\n\nexports.default = Modal;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _react = require(\"react\");\n\nvar _propTypes = require(\"prop-types\");\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _focusManager = require(\"../helpers/focusManager\");\n\nvar focusManager = _interopRequireWildcard(_focusManager);\n\nvar _scopeTab = require(\"../helpers/scopeTab\");\n\nvar _scopeTab2 = _interopRequireDefault(_scopeTab);\n\nvar _ariaAppHider = require(\"../helpers/ariaAppHider\");\n\nvar ariaAppHider = _interopRequireWildcard(_ariaAppHider);\n\nvar _classList = require(\"../helpers/classList\");\n\nvar classList = _interopRequireWildcard(_classList);\n\nvar _safeHTMLElement = require(\"../helpers/safeHTMLElement\");\n\nvar _safeHTMLElement2 = _interopRequireDefault(_safeHTMLElement);\n\nvar _portalOpenInstances = require(\"../helpers/portalOpenInstances\");\n\nvar _portalOpenInstances2 = _interopRequireDefault(_portalOpenInstances);\n\nrequire(\"../helpers/bodyTrap\");\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\n// so that our CSS is statically analyzable\nvar CLASS_NAMES = {\n  overlay: \"ReactModal__Overlay\",\n  content: \"ReactModal__Content\"\n};\n\n/**\n * We need to support the deprecated `KeyboardEvent.keyCode` in addition to\n * `KeyboardEvent.code` for apps that still support IE11. Can be removed when\n * `react-modal` only supports React >18 (which dropped IE support).\n */\nvar isTabKey = function isTabKey(event) {\n  return event.code === \"Tab\" || event.keyCode === 9;\n};\nvar isEscKey = function isEscKey(event) {\n  return event.code === \"Escape\" || event.keyCode === 27;\n};\n\nvar ariaHiddenInstances = 0;\n\nvar ModalPortal = function (_Component) {\n  _inherits(ModalPortal, _Component);\n\n  function ModalPortal(props) {\n    _classCallCheck(this, ModalPortal);\n\n    var _this = _possibleConstructorReturn(this, (ModalPortal.__proto__ || Object.getPrototypeOf(ModalPortal)).call(this, props));\n\n    _this.setOverlayRef = function (overlay) {\n      _this.overlay = overlay;\n      _this.props.overlayRef && _this.props.overlayRef(overlay);\n    };\n\n    _this.setContentRef = function (content) {\n      _this.content = content;\n      _this.props.contentRef && _this.props.contentRef(content);\n    };\n\n    _this.afterClose = function () {\n      var _this$props = _this.props,\n          appElement = _this$props.appElement,\n          ariaHideApp = _this$props.ariaHideApp,\n          htmlOpenClassName = _this$props.htmlOpenClassName,\n          bodyOpenClassName = _this$props.bodyOpenClassName,\n          parentSelector = _this$props.parentSelector;\n\n\n      var parentDocument = parentSelector && parentSelector().ownerDocument || document;\n\n      // Remove classes.\n      bodyOpenClassName && classList.remove(parentDocument.body, bodyOpenClassName);\n\n      htmlOpenClassName && classList.remove(parentDocument.getElementsByTagName(\"html\")[0], htmlOpenClassName);\n\n      // Reset aria-hidden attribute if all modals have been removed\n      if (ariaHideApp && ariaHiddenInstances > 0) {\n        ariaHiddenInstances -= 1;\n\n        if (ariaHiddenInstances === 0) {\n          ariaAppHider.show(appElement);\n        }\n      }\n\n      if (_this.props.shouldFocusAfterRender) {\n        if (_this.props.shouldReturnFocusAfterClose) {\n          focusManager.returnFocus(_this.props.preventScroll);\n          focusManager.teardownScopedFocus();\n        } else {\n          focusManager.popWithoutFocus();\n        }\n      }\n\n      if (_this.props.onAfterClose) {\n        _this.props.onAfterClose();\n      }\n\n      _portalOpenInstances2.default.deregister(_this);\n    };\n\n    _this.open = function () {\n      _this.beforeOpen();\n      if (_this.state.afterOpen && _this.state.beforeClose) {\n        clearTimeout(_this.closeTimer);\n        _this.setState({ beforeClose: false });\n      } else {\n        if (_this.props.shouldFocusAfterRender) {\n          focusManager.setupScopedFocus(_this.node);\n          focusManager.markForFocusLater();\n        }\n\n        _this.setState({ isOpen: true }, function () {\n          _this.openAnimationFrame = requestAnimationFrame(function () {\n            _this.setState({ afterOpen: true });\n\n            if (_this.props.isOpen && _this.props.onAfterOpen) {\n              _this.props.onAfterOpen({\n                overlayEl: _this.overlay,\n                contentEl: _this.content\n              });\n            }\n          });\n        });\n      }\n    };\n\n    _this.close = function () {\n      if (_this.props.closeTimeoutMS > 0) {\n        _this.closeWithTimeout();\n      } else {\n        _this.closeWithoutTimeout();\n      }\n    };\n\n    _this.focusContent = function () {\n      return _this.content && !_this.contentHasFocus() && _this.content.focus({ preventScroll: true });\n    };\n\n    _this.closeWithTimeout = function () {\n      var closesAt = Date.now() + _this.props.closeTimeoutMS;\n      _this.setState({ beforeClose: true, closesAt: closesAt }, function () {\n        _this.closeTimer = setTimeout(_this.closeWithoutTimeout, _this.state.closesAt - Date.now());\n      });\n    };\n\n    _this.closeWithoutTimeout = function () {\n      _this.setState({\n        beforeClose: false,\n        isOpen: false,\n        afterOpen: false,\n        closesAt: null\n      }, _this.afterClose);\n    };\n\n    _this.handleKeyDown = function (event) {\n      if (isTabKey(event)) {\n        (0, _scopeTab2.default)(_this.content, event);\n      }\n\n      if (_this.props.shouldCloseOnEsc && isEscKey(event)) {\n        event.stopPropagation();\n        _this.requestClose(event);\n      }\n    };\n\n    _this.handleOverlayOnClick = function (event) {\n      if (_this.shouldClose === null) {\n        _this.shouldClose = true;\n      }\n\n      if (_this.shouldClose && _this.props.shouldCloseOnOverlayClick) {\n        if (_this.ownerHandlesClose()) {\n          _this.requestClose(event);\n        } else {\n          _this.focusContent();\n        }\n      }\n      _this.shouldClose = null;\n    };\n\n    _this.handleContentOnMouseUp = function () {\n      _this.shouldClose = false;\n    };\n\n    _this.handleOverlayOnMouseDown = function (event) {\n      if (!_this.props.shouldCloseOnOverlayClick && event.target == _this.overlay) {\n        event.preventDefault();\n      }\n    };\n\n    _this.handleContentOnClick = function () {\n      _this.shouldClose = false;\n    };\n\n    _this.handleContentOnMouseDown = function () {\n      _this.shouldClose = false;\n    };\n\n    _this.requestClose = function (event) {\n      return _this.ownerHandlesClose() && _this.props.onRequestClose(event);\n    };\n\n    _this.ownerHandlesClose = function () {\n      return _this.props.onRequestClose;\n    };\n\n    _this.shouldBeClosed = function () {\n      return !_this.state.isOpen && !_this.state.beforeClose;\n    };\n\n    _this.contentHasFocus = function () {\n      return document.activeElement === _this.content || _this.content.contains(document.activeElement);\n    };\n\n    _this.buildClassName = function (which, additional) {\n      var classNames = (typeof additional === \"undefined\" ? \"undefined\" : _typeof(additional)) === \"object\" ? additional : {\n        base: CLASS_NAMES[which],\n        afterOpen: CLASS_NAMES[which] + \"--after-open\",\n        beforeClose: CLASS_NAMES[which] + \"--before-close\"\n      };\n      var className = classNames.base;\n      if (_this.state.afterOpen) {\n        className = className + \" \" + classNames.afterOpen;\n      }\n      if (_this.state.beforeClose) {\n        className = className + \" \" + classNames.beforeClose;\n      }\n      return typeof additional === \"string\" && additional ? className + \" \" + additional : className;\n    };\n\n    _this.attributesFromObject = function (prefix, items) {\n      return Object.keys(items).reduce(function (acc, name) {\n        acc[prefix + \"-\" + name] = items[name];\n        return acc;\n      }, {});\n    };\n\n    _this.state = {\n      afterOpen: false,\n      beforeClose: false\n    };\n\n    _this.shouldClose = null;\n    _this.moveFromContentToOverlay = null;\n    return _this;\n  }\n\n  _createClass(ModalPortal, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      if (this.props.isOpen) {\n        this.open();\n      }\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps, prevState) {\n      if (process.env.NODE_ENV !== \"production\") {\n        if (prevProps.bodyOpenClassName !== this.props.bodyOpenClassName) {\n          // eslint-disable-next-line no-console\n          console.warn('React-Modal: \"bodyOpenClassName\" prop has been modified. ' + \"This may cause unexpected behavior when multiple modals are open.\");\n        }\n        if (prevProps.htmlOpenClassName !== this.props.htmlOpenClassName) {\n          // eslint-disable-next-line no-console\n          console.warn('React-Modal: \"htmlOpenClassName\" prop has been modified. ' + \"This may cause unexpected behavior when multiple modals are open.\");\n        }\n      }\n\n      if (this.props.isOpen && !prevProps.isOpen) {\n        this.open();\n      } else if (!this.props.isOpen && prevProps.isOpen) {\n        this.close();\n      }\n\n      // Focus only needs to be set once when the modal is being opened\n      if (this.props.shouldFocusAfterRender && this.state.isOpen && !prevState.isOpen) {\n        this.focusContent();\n      }\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      if (this.state.isOpen) {\n        this.afterClose();\n      }\n      clearTimeout(this.closeTimer);\n      cancelAnimationFrame(this.openAnimationFrame);\n    }\n  }, {\n    key: \"beforeOpen\",\n    value: function beforeOpen() {\n      var _props = this.props,\n          appElement = _props.appElement,\n          ariaHideApp = _props.ariaHideApp,\n          htmlOpenClassName = _props.htmlOpenClassName,\n          bodyOpenClassName = _props.bodyOpenClassName,\n          parentSelector = _props.parentSelector;\n\n\n      var parentDocument = parentSelector && parentSelector().ownerDocument || document;\n\n      // Add classes.\n      bodyOpenClassName && classList.add(parentDocument.body, bodyOpenClassName);\n\n      htmlOpenClassName && classList.add(parentDocument.getElementsByTagName(\"html\")[0], htmlOpenClassName);\n\n      if (ariaHideApp) {\n        ariaHiddenInstances += 1;\n        ariaAppHider.hide(appElement);\n      }\n\n      _portalOpenInstances2.default.register(this);\n    }\n\n    // Don't steal focus from inner elements\n\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _props2 = this.props,\n          id = _props2.id,\n          className = _props2.className,\n          overlayClassName = _props2.overlayClassName,\n          defaultStyles = _props2.defaultStyles,\n          children = _props2.children;\n\n      var contentStyles = className ? {} : defaultStyles.content;\n      var overlayStyles = overlayClassName ? {} : defaultStyles.overlay;\n\n      if (this.shouldBeClosed()) {\n        return null;\n      }\n\n      var overlayProps = {\n        ref: this.setOverlayRef,\n        className: this.buildClassName(\"overlay\", overlayClassName),\n        style: _extends({}, overlayStyles, this.props.style.overlay),\n        onClick: this.handleOverlayOnClick,\n        onMouseDown: this.handleOverlayOnMouseDown\n      };\n\n      var contentProps = _extends({\n        id: id,\n        ref: this.setContentRef,\n        style: _extends({}, contentStyles, this.props.style.content),\n        className: this.buildClassName(\"content\", className),\n        tabIndex: \"-1\",\n        onKeyDown: this.handleKeyDown,\n        onMouseDown: this.handleContentOnMouseDown,\n        onMouseUp: this.handleContentOnMouseUp,\n        onClick: this.handleContentOnClick,\n        role: this.props.role,\n        \"aria-label\": this.props.contentLabel\n      }, this.attributesFromObject(\"aria\", _extends({ modal: true }, this.props.aria)), this.attributesFromObject(\"data\", this.props.data || {}), {\n        \"data-testid\": this.props.testId\n      });\n\n      var contentElement = this.props.contentElement(contentProps, children);\n      return this.props.overlayElement(overlayProps, contentElement);\n    }\n  }]);\n\n  return ModalPortal;\n}(_react.Component);\n\nModalPortal.defaultProps = {\n  style: {\n    overlay: {},\n    content: {}\n  },\n  defaultStyles: {}\n};\nModalPortal.propTypes = {\n  isOpen: _propTypes2.default.bool.isRequired,\n  defaultStyles: _propTypes2.default.shape({\n    content: _propTypes2.default.object,\n    overlay: _propTypes2.default.object\n  }),\n  style: _propTypes2.default.shape({\n    content: _propTypes2.default.object,\n    overlay: _propTypes2.default.object\n  }),\n  className: _propTypes2.default.oneOfType([_propTypes2.default.string, _propTypes2.default.object]),\n  overlayClassName: _propTypes2.default.oneOfType([_propTypes2.default.string, _propTypes2.default.object]),\n  parentSelector: _propTypes2.default.func,\n  bodyOpenClassName: _propTypes2.default.string,\n  htmlOpenClassName: _propTypes2.default.string,\n  ariaHideApp: _propTypes2.default.bool,\n  appElement: _propTypes2.default.oneOfType([_propTypes2.default.instanceOf(_safeHTMLElement2.default), _propTypes2.default.instanceOf(_safeHTMLElement.SafeHTMLCollection), _propTypes2.default.instanceOf(_safeHTMLElement.SafeNodeList), _propTypes2.default.arrayOf(_propTypes2.default.instanceOf(_safeHTMLElement2.default))]),\n  onAfterOpen: _propTypes2.default.func,\n  onAfterClose: _propTypes2.default.func,\n  onRequestClose: _propTypes2.default.func,\n  closeTimeoutMS: _propTypes2.default.number,\n  shouldFocusAfterRender: _propTypes2.default.bool,\n  shouldCloseOnOverlayClick: _propTypes2.default.bool,\n  shouldReturnFocusAfterClose: _propTypes2.default.bool,\n  preventScroll: _propTypes2.default.bool,\n  role: _propTypes2.default.string,\n  contentLabel: _propTypes2.default.string,\n  aria: _propTypes2.default.object,\n  data: _propTypes2.default.object,\n  children: _propTypes2.default.node,\n  shouldCloseOnEsc: _propTypes2.default.bool,\n  overlayRef: _propTypes2.default.func,\n  contentRef: _propTypes2.default.func,\n  id: _propTypes2.default.string,\n  overlayElement: _propTypes2.default.func,\n  contentElement: _propTypes2.default.func,\n  testId: _propTypes2.default.string\n};\nexports.default = ModalPortal;\nmodule.exports = exports[\"default\"];","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.resetState = resetState;\nexports.log = log;\nexports.assertNodeList = assertNodeList;\nexports.setElement = setElement;\nexports.validateElement = validateElement;\nexports.hide = hide;\nexports.show = show;\nexports.documentNotReadyOrSSRTesting = documentNotReadyOrSSRTesting;\n\nvar _warning = require(\"warning\");\n\nvar _warning2 = _interopRequireDefault(_warning);\n\nvar _safeHTMLElement = require(\"./safeHTMLElement\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar globalElement = null;\n\n/* eslint-disable no-console */\n/* istanbul ignore next */\nfunction resetState() {\n  if (globalElement) {\n    if (globalElement.removeAttribute) {\n      globalElement.removeAttribute(\"aria-hidden\");\n    } else if (globalElement.length != null) {\n      globalElement.forEach(function (element) {\n        return element.removeAttribute(\"aria-hidden\");\n      });\n    } else {\n      document.querySelectorAll(globalElement).forEach(function (element) {\n        return element.removeAttribute(\"aria-hidden\");\n      });\n    }\n  }\n  globalElement = null;\n}\n\n/* istanbul ignore next */\nfunction log() {\n  if (process.env.NODE_ENV !== \"production\") {\n    var check = globalElement || {};\n    console.log(\"ariaAppHider ----------\");\n    console.log(check.nodeName, check.className, check.id);\n    console.log(\"end ariaAppHider ----------\");\n  }\n}\n/* eslint-enable no-console */\n\nfunction assertNodeList(nodeList, selector) {\n  if (!nodeList || !nodeList.length) {\n    throw new Error(\"react-modal: No elements were found for selector \" + selector + \".\");\n  }\n}\n\nfunction setElement(element) {\n  var useElement = element;\n  if (typeof useElement === \"string\" && _safeHTMLElement.canUseDOM) {\n    var el = document.querySelectorAll(useElement);\n    assertNodeList(el, useElement);\n    useElement = el;\n  }\n  globalElement = useElement || globalElement;\n  return globalElement;\n}\n\nfunction validateElement(appElement) {\n  var el = appElement || globalElement;\n  if (el) {\n    return Array.isArray(el) || el instanceof HTMLCollection || el instanceof NodeList ? el : [el];\n  } else {\n    (0, _warning2.default)(false, [\"react-modal: App element is not defined.\", \"Please use `Modal.setAppElement(el)` or set `appElement={el}`.\", \"This is needed so screen readers don't see main content\", \"when modal is opened. It is not recommended, but you can opt-out\", \"by setting `ariaHideApp={false}`.\"].join(\" \"));\n\n    return [];\n  }\n}\n\nfunction hide(appElement) {\n  var _iteratorNormalCompletion = true;\n  var _didIteratorError = false;\n  var _iteratorError = undefined;\n\n  try {\n    for (var _iterator = validateElement(appElement)[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n      var el = _step.value;\n\n      el.setAttribute(\"aria-hidden\", \"true\");\n    }\n  } catch (err) {\n    _didIteratorError = true;\n    _iteratorError = err;\n  } finally {\n    try {\n      if (!_iteratorNormalCompletion && _iterator.return) {\n        _iterator.return();\n      }\n    } finally {\n      if (_didIteratorError) {\n        throw _iteratorError;\n      }\n    }\n  }\n}\n\nfunction show(appElement) {\n  var _iteratorNormalCompletion2 = true;\n  var _didIteratorError2 = false;\n  var _iteratorError2 = undefined;\n\n  try {\n    for (var _iterator2 = validateElement(appElement)[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n      var el = _step2.value;\n\n      el.removeAttribute(\"aria-hidden\");\n    }\n  } catch (err) {\n    _didIteratorError2 = true;\n    _iteratorError2 = err;\n  } finally {\n    try {\n      if (!_iteratorNormalCompletion2 && _iterator2.return) {\n        _iterator2.return();\n      }\n    } finally {\n      if (_didIteratorError2) {\n        throw _iteratorError2;\n      }\n    }\n  }\n}\n\nfunction documentNotReadyOrSSRTesting() {\n  globalElement = null;\n}","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.resetState = resetState;\nexports.log = log;\n\nvar _portalOpenInstances = require(\"./portalOpenInstances\");\n\nvar _portalOpenInstances2 = _interopRequireDefault(_portalOpenInstances);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n// Body focus trap see Issue #742\n\nvar before = void 0,\n    after = void 0,\n    instances = [];\n\n/* eslint-disable no-console */\n/* istanbul ignore next */\nfunction resetState() {\n  var _arr = [before, after];\n\n  for (var _i = 0; _i < _arr.length; _i++) {\n    var item = _arr[_i];\n    if (!item) continue;\n    item.parentNode && item.parentNode.removeChild(item);\n  }\n  before = after = null;\n  instances = [];\n}\n\n/* istanbul ignore next */\nfunction log() {\n  console.log(\"bodyTrap ----------\");\n  console.log(instances.length);\n  var _arr2 = [before, after];\n  for (var _i2 = 0; _i2 < _arr2.length; _i2++) {\n    var item = _arr2[_i2];\n    var check = item || {};\n    console.log(check.nodeName, check.className, check.id);\n  }\n  console.log(\"edn bodyTrap ----------\");\n}\n/* eslint-enable no-console */\n\nfunction focusContent() {\n  if (instances.length === 0) {\n    if (process.env.NODE_ENV !== \"production\") {\n      // eslint-disable-next-line no-console\n      console.warn(\"React-Modal: Open instances > 0 expected\");\n    }\n    return;\n  }\n  instances[instances.length - 1].focusContent();\n}\n\nfunction bodyTrap(eventType, openInstances) {\n  if (!before && !after) {\n    before = document.createElement(\"div\");\n    before.setAttribute(\"data-react-modal-body-trap\", \"\");\n    before.style.position = \"absolute\";\n    before.style.opacity = \"0\";\n    before.setAttribute(\"tabindex\", \"0\");\n    before.addEventListener(\"focus\", focusContent);\n    after = before.cloneNode();\n    after.addEventListener(\"focus\", focusContent);\n  }\n\n  instances = openInstances;\n\n  if (instances.length > 0) {\n    // Add focus trap\n    if (document.body.firstChild !== before) {\n      document.body.insertBefore(before, document.body.firstChild);\n    }\n    if (document.body.lastChild !== after) {\n      document.body.appendChild(after);\n    }\n  } else {\n    // Remove focus trap\n    if (before.parentElement) {\n      before.parentElement.removeChild(before);\n    }\n    if (after.parentElement) {\n      after.parentElement.removeChild(after);\n    }\n  }\n}\n\n_portalOpenInstances2.default.subscribe(bodyTrap);","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.resetState = resetState;\nexports.log = log;\nvar htmlClassList = {};\nvar docBodyClassList = {};\n\n/* eslint-disable no-console */\n/* istanbul ignore next */\nfunction removeClass(at, cls) {\n  at.classList.remove(cls);\n}\n\n/* istanbul ignore next */\nfunction resetState() {\n  var htmlElement = document.getElementsByTagName(\"html\")[0];\n  for (var cls in htmlClassList) {\n    removeClass(htmlElement, htmlClassList[cls]);\n  }\n\n  var body = document.body;\n  for (var _cls in docBodyClassList) {\n    removeClass(body, docBodyClassList[_cls]);\n  }\n\n  htmlClassList = {};\n  docBodyClassList = {};\n}\n\n/* istanbul ignore next */\nfunction log() {\n  if (process.env.NODE_ENV !== \"production\") {\n    var classes = document.getElementsByTagName(\"html\")[0].className;\n    var buffer = \"Show tracked classes:\\n\\n\";\n\n    buffer += \"<html /> (\" + classes + \"):\\n  \";\n    for (var x in htmlClassList) {\n      buffer += \"  \" + x + \" \" + htmlClassList[x] + \"\\n  \";\n    }\n\n    classes = document.body.className;\n\n    buffer += \"\\n\\ndoc.body (\" + classes + \"):\\n  \";\n    for (var _x in docBodyClassList) {\n      buffer += \"  \" + _x + \" \" + docBodyClassList[_x] + \"\\n  \";\n    }\n\n    buffer += \"\\n\";\n\n    console.log(buffer);\n  }\n}\n/* eslint-enable no-console */\n\n/**\n * Track the number of reference of a class.\n * @param {object} poll The poll to receive the reference.\n * @param {string} className The class name.\n * @return {string}\n */\nvar incrementReference = function incrementReference(poll, className) {\n  if (!poll[className]) {\n    poll[className] = 0;\n  }\n  poll[className] += 1;\n  return className;\n};\n\n/**\n * Drop the reference of a class.\n * @param {object} poll The poll to receive the reference.\n * @param {string} className The class name.\n * @return {string}\n */\nvar decrementReference = function decrementReference(poll, className) {\n  if (poll[className]) {\n    poll[className] -= 1;\n  }\n  return className;\n};\n\n/**\n * Track a class and add to the given class list.\n * @param {Object} classListRef A class list of an element.\n * @param {Object} poll         The poll to be used.\n * @param {Array}  classes      The list of classes to be tracked.\n */\nvar trackClass = function trackClass(classListRef, poll, classes) {\n  classes.forEach(function (className) {\n    incrementReference(poll, className);\n    classListRef.add(className);\n  });\n};\n\n/**\n * Untrack a class and remove from the given class list if the reference\n * reaches 0.\n * @param {Object} classListRef A class list of an element.\n * @param {Object} poll         The poll to be used.\n * @param {Array}  classes      The list of classes to be untracked.\n */\nvar untrackClass = function untrackClass(classListRef, poll, classes) {\n  classes.forEach(function (className) {\n    decrementReference(poll, className);\n    poll[className] === 0 && classListRef.remove(className);\n  });\n};\n\n/**\n * Public inferface to add classes to the document.body.\n * @param {string} bodyClass The class string to be added.\n *                           It may contain more then one class\n *                           with ' ' as separator.\n */\nvar add = exports.add = function add(element, classString) {\n  return trackClass(element.classList, element.nodeName.toLowerCase() == \"html\" ? htmlClassList : docBodyClassList, classString.split(\" \"));\n};\n\n/**\n * Public inferface to remove classes from the document.body.\n * @param {string} bodyClass The class string to be added.\n *                           It may contain more then one class\n *                           with ' ' as separator.\n */\nvar remove = exports.remove = function remove(element, classString) {\n  return untrackClass(element.classList, element.nodeName.toLowerCase() == \"html\" ? htmlClassList : docBodyClassList, classString.split(\" \"));\n};","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.resetState = resetState;\nexports.log = log;\nexports.handleBlur = handleBlur;\nexports.handleFocus = handleFocus;\nexports.markForFocusLater = markForFocusLater;\nexports.returnFocus = returnFocus;\nexports.popWithoutFocus = popWithoutFocus;\nexports.setupScopedFocus = setupScopedFocus;\nexports.teardownScopedFocus = teardownScopedFocus;\n\nvar _tabbable = require(\"../helpers/tabbable\");\n\nvar _tabbable2 = _interopRequireDefault(_tabbable);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar focusLaterElements = [];\nvar modalElement = null;\nvar needToFocus = false;\n\n/* eslint-disable no-console */\n/* istanbul ignore next */\nfunction resetState() {\n  focusLaterElements = [];\n}\n\n/* istanbul ignore next */\nfunction log() {\n  if (process.env.NODE_ENV !== \"production\") {\n    console.log(\"focusManager ----------\");\n    focusLaterElements.forEach(function (f) {\n      var check = f || {};\n      console.log(check.nodeName, check.className, check.id);\n    });\n    console.log(\"end focusManager ----------\");\n  }\n}\n/* eslint-enable no-console */\n\nfunction handleBlur() {\n  needToFocus = true;\n}\n\nfunction handleFocus() {\n  if (needToFocus) {\n    needToFocus = false;\n    if (!modalElement) {\n      return;\n    }\n    // need to see how jQuery shims document.on('focusin') so we don't need the\n    // setTimeout, firefox doesn't support focusin, if it did, we could focus\n    // the element outside of a setTimeout. Side-effect of this implementation\n    // is that the document.body gets focus, and then we focus our element right\n    // after, seems fine.\n    setTimeout(function () {\n      if (modalElement.contains(document.activeElement)) {\n        return;\n      }\n      var el = (0, _tabbable2.default)(modalElement)[0] || modalElement;\n      el.focus();\n    }, 0);\n  }\n}\n\nfunction markForFocusLater() {\n  focusLaterElements.push(document.activeElement);\n}\n\n/* eslint-disable no-console */\nfunction returnFocus() {\n  var preventScroll = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n\n  var toFocus = null;\n  try {\n    if (focusLaterElements.length !== 0) {\n      toFocus = focusLaterElements.pop();\n      toFocus.focus({ preventScroll: preventScroll });\n    }\n    return;\n  } catch (e) {\n    console.warn([\"You tried to return focus to\", toFocus, \"but it is not in the DOM anymore\"].join(\" \"));\n  }\n}\n/* eslint-enable no-console */\n\nfunction popWithoutFocus() {\n  focusLaterElements.length > 0 && focusLaterElements.pop();\n}\n\nfunction setupScopedFocus(element) {\n  modalElement = element;\n\n  if (window.addEventListener) {\n    window.addEventListener(\"blur\", handleBlur, false);\n    document.addEventListener(\"focus\", handleFocus, true);\n  } else {\n    window.attachEvent(\"onBlur\", handleBlur);\n    document.attachEvent(\"onFocus\", handleFocus);\n  }\n}\n\nfunction teardownScopedFocus() {\n  modalElement = null;\n\n  if (window.addEventListener) {\n    window.removeEventListener(\"blur\", handleBlur);\n    document.removeEventListener(\"focus\", handleFocus);\n  } else {\n    window.detachEvent(\"onBlur\", handleBlur);\n    document.detachEvent(\"onFocus\", handleFocus);\n  }\n}","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.log = log;\nexports.resetState = resetState;\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n// Tracks portals that are open and emits events to subscribers\n\nvar PortalOpenInstances = function PortalOpenInstances() {\n  var _this = this;\n\n  _classCallCheck(this, PortalOpenInstances);\n\n  this.register = function (openInstance) {\n    if (_this.openInstances.indexOf(openInstance) !== -1) {\n      if (process.env.NODE_ENV !== \"production\") {\n        // eslint-disable-next-line no-console\n        console.warn(\"React-Modal: Cannot register modal instance that's already open\");\n      }\n      return;\n    }\n    _this.openInstances.push(openInstance);\n    _this.emit(\"register\");\n  };\n\n  this.deregister = function (openInstance) {\n    var index = _this.openInstances.indexOf(openInstance);\n    if (index === -1) {\n      if (process.env.NODE_ENV !== \"production\") {\n        // eslint-disable-next-line no-console\n        console.warn(\"React-Modal: Unable to deregister \" + openInstance + \" as \" + \"it was never registered\");\n      }\n      return;\n    }\n    _this.openInstances.splice(index, 1);\n    _this.emit(\"deregister\");\n  };\n\n  this.subscribe = function (callback) {\n    _this.subscribers.push(callback);\n  };\n\n  this.emit = function (eventType) {\n    _this.subscribers.forEach(function (subscriber) {\n      return subscriber(eventType,\n      // shallow copy to avoid accidental mutation\n      _this.openInstances.slice());\n    });\n  };\n\n  this.openInstances = [];\n  this.subscribers = [];\n};\n\nvar portalOpenInstances = new PortalOpenInstances();\n\n/* eslint-disable no-console */\n/* istanbul ignore next */\nfunction log() {\n  console.log(\"portalOpenInstances ----------\");\n  console.log(portalOpenInstances.openInstances.length);\n  portalOpenInstances.openInstances.forEach(function (p) {\n    return console.log(p);\n  });\n  console.log(\"end portalOpenInstances ----------\");\n}\n\n/* istanbul ignore next */\nfunction resetState() {\n  portalOpenInstances = new PortalOpenInstances();\n}\n/* eslint-enable no-console */\n\nexports.default = portalOpenInstances;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.canUseDOM = exports.SafeNodeList = exports.SafeHTMLCollection = undefined;\n\nvar _exenv = require(\"exenv\");\n\nvar _exenv2 = _interopRequireDefault(_exenv);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar EE = _exenv2.default;\n\nvar SafeHTMLElement = EE.canUseDOM ? window.HTMLElement : {};\n\nvar SafeHTMLCollection = exports.SafeHTMLCollection = EE.canUseDOM ? window.HTMLCollection : {};\n\nvar SafeNodeList = exports.SafeNodeList = EE.canUseDOM ? window.NodeList : {};\n\nvar canUseDOM = exports.canUseDOM = EE.canUseDOM;\n\nexports.default = SafeHTMLElement;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = scopeTab;\n\nvar _tabbable = require(\"./tabbable\");\n\nvar _tabbable2 = _interopRequireDefault(_tabbable);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction getActiveElement() {\n  var el = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : document;\n\n  return el.activeElement.shadowRoot ? getActiveElement(el.activeElement.shadowRoot) : el.activeElement;\n}\n\nfunction scopeTab(node, event) {\n  var tabbable = (0, _tabbable2.default)(node);\n\n  if (!tabbable.length) {\n    // Do nothing, since there are no elements that can receive focus.\n    event.preventDefault();\n    return;\n  }\n\n  var target = void 0;\n\n  var shiftKey = event.shiftKey;\n  var head = tabbable[0];\n  var tail = tabbable[tabbable.length - 1];\n  var activeElement = getActiveElement();\n\n  // proceed with default browser behavior on tab.\n  // Focus on last element on shift + tab.\n  if (node === activeElement) {\n    if (!shiftKey) return;\n    target = tail;\n  }\n\n  if (tail === activeElement && !shiftKey) {\n    target = head;\n  }\n\n  if (head === activeElement && shiftKey) {\n    target = tail;\n  }\n\n  if (target) {\n    event.preventDefault();\n    target.focus();\n    return;\n  }\n\n  // Safari radio issue.\n  //\n  // Safari does not move the focus to the radio button,\n  // so we need to force it to really walk through all elements.\n  //\n  // This is very error prone, since we are trying to guess\n  // if it is a safari browser from the first occurence between\n  // chrome or safari.\n  //\n  // The chrome user agent contains the first ocurrence\n  // as the 'chrome/version' and later the 'safari/version'.\n  var checkSafari = /(\\bChrome\\b|\\bSafari\\b)\\//.exec(navigator.userAgent);\n  var isSafariDesktop = checkSafari != null && checkSafari[1] != \"Chrome\" && /\\biPod\\b|\\biPad\\b/g.exec(navigator.userAgent) == null;\n\n  // If we are not in safari desktop, let the browser control\n  // the focus\n  if (!isSafariDesktop) return;\n\n  var x = tabbable.indexOf(activeElement);\n\n  if (x > -1) {\n    x += shiftKey ? -1 : 1;\n  }\n\n  target = tabbable[x];\n\n  // If the tabbable element does not exist,\n  // focus head/tail based on shiftKey\n  if (typeof target === \"undefined\") {\n    event.preventDefault();\n    target = shiftKey ? tail : head;\n    target.focus();\n    return;\n  }\n\n  event.preventDefault();\n\n  target.focus();\n}\nmodule.exports = exports[\"default\"];","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = findTabbableDescendants;\n/*!\n * Adapted from jQuery UI core\n *\n * http://jqueryui.com\n *\n * Copyright 2014 jQuery Foundation and other contributors\n * Released under the MIT license.\n * http://jquery.org/license\n *\n * http://api.jqueryui.com/category/ui-core/\n */\n\nvar DISPLAY_NONE = \"none\";\nvar DISPLAY_CONTENTS = \"contents\";\n\nvar tabbableNode = /input|select|textarea|button|object|iframe/;\n\nfunction isNotOverflowing(element, style) {\n  return style.getPropertyValue(\"overflow\") !== \"visible\" ||\n  // if 'overflow: visible' set, check if there is actually any overflow\n  element.scrollWidth <= 0 && element.scrollHeight <= 0;\n}\n\nfunction hidesContents(element) {\n  var zeroSize = element.offsetWidth <= 0 && element.offsetHeight <= 0;\n\n  // If the node is empty, this is good enough\n  if (zeroSize && !element.innerHTML) return true;\n\n  try {\n    // Otherwise we need to check some styles\n    var style = window.getComputedStyle(element);\n    var displayValue = style.getPropertyValue(\"display\");\n    return zeroSize ? displayValue !== DISPLAY_CONTENTS && isNotOverflowing(element, style) : displayValue === DISPLAY_NONE;\n  } catch (exception) {\n    // eslint-disable-next-line no-console\n    console.warn(\"Failed to inspect element style\");\n    return false;\n  }\n}\n\nfunction visible(element) {\n  var parentElement = element;\n  var rootNode = element.getRootNode && element.getRootNode();\n  while (parentElement) {\n    if (parentElement === document.body) break;\n\n    // if we are not hidden yet, skip to checking outside the Web Component\n    if (rootNode && parentElement === rootNode) parentElement = rootNode.host.parentNode;\n\n    if (hidesContents(parentElement)) return false;\n    parentElement = parentElement.parentNode;\n  }\n  return true;\n}\n\nfunction focusable(element, isTabIndexNotNaN) {\n  var nodeName = element.nodeName.toLowerCase();\n  var res = tabbableNode.test(nodeName) && !element.disabled || (nodeName === \"a\" ? element.href || isTabIndexNotNaN : isTabIndexNotNaN);\n  return res && visible(element);\n}\n\nfunction tabbable(element) {\n  var tabIndex = element.getAttribute(\"tabindex\");\n  if (tabIndex === null) tabIndex = undefined;\n  var isTabIndexNaN = isNaN(tabIndex);\n  return (isTabIndexNaN || tabIndex >= 0) && focusable(element, !isTabIndexNaN);\n}\n\nfunction findTabbableDescendants(element) {\n  var descendants = [].slice.call(element.querySelectorAll(\"*\"), 0).reduce(function (finished, el) {\n    return finished.concat(!el.shadowRoot ? [el] : findTabbableDescendants(el.shadowRoot));\n  }, []);\n  return descendants.filter(tabbable);\n}\nmodule.exports = exports[\"default\"];","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _Modal = require(\"./components/Modal\");\n\nvar _Modal2 = _interopRequireDefault(_Modal);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = _Modal2.default;\nmodule.exports = exports[\"default\"];","/*\n *  Copyright (c) 2017 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n /* eslint-env node */\n'use strict';\n\nvar SDPUtils = require('sdp');\n\nfunction fixStatsType(stat) {\n  return {\n    inboundrtp: 'inbound-rtp',\n    outboundrtp: 'outbound-rtp',\n    candidatepair: 'candidate-pair',\n    localcandidate: 'local-candidate',\n    remotecandidate: 'remote-candidate'\n  }[stat.type] || stat.type;\n}\n\nfunction writeMediaSection(transceiver, caps, type, stream, dtlsRole) {\n  var sdp = SDPUtils.writeRtpDescription(transceiver.kind, caps);\n\n  // Map ICE parameters (ufrag, pwd) to SDP.\n  sdp += SDPUtils.writeIceParameters(\n      transceiver.iceGatherer.getLocalParameters());\n\n  // Map DTLS parameters to SDP.\n  sdp += SDPUtils.writeDtlsParameters(\n      transceiver.dtlsTransport.getLocalParameters(),\n      type === 'offer' ? 'actpass' : dtlsRole || 'active');\n\n  sdp += 'a=mid:' + transceiver.mid + '\\r\\n';\n\n  if (transceiver.rtpSender && transceiver.rtpReceiver) {\n    sdp += 'a=sendrecv\\r\\n';\n  } else if (transceiver.rtpSender) {\n    sdp += 'a=sendonly\\r\\n';\n  } else if (transceiver.rtpReceiver) {\n    sdp += 'a=recvonly\\r\\n';\n  } else {\n    sdp += 'a=inactive\\r\\n';\n  }\n\n  if (transceiver.rtpSender) {\n    var trackId = transceiver.rtpSender._initialTrackId ||\n        transceiver.rtpSender.track.id;\n    transceiver.rtpSender._initialTrackId = trackId;\n    // spec.\n    var msid = 'msid:' + (stream ? stream.id : '-') + ' ' +\n        trackId + '\\r\\n';\n    sdp += 'a=' + msid;\n    // for Chrome. Legacy should no longer be required.\n    sdp += 'a=ssrc:' + transceiver.sendEncodingParameters[0].ssrc +\n        ' ' + msid;\n\n    // RTX\n    if (transceiver.sendEncodingParameters[0].rtx) {\n      sdp += 'a=ssrc:' + transceiver.sendEncodingParameters[0].rtx.ssrc +\n          ' ' + msid;\n      sdp += 'a=ssrc-group:FID ' +\n          transceiver.sendEncodingParameters[0].ssrc + ' ' +\n          transceiver.sendEncodingParameters[0].rtx.ssrc +\n          '\\r\\n';\n    }\n  }\n  // FIXME: this should be written by writeRtpDescription.\n  sdp += 'a=ssrc:' + transceiver.sendEncodingParameters[0].ssrc +\n      ' cname:' + SDPUtils.localCName + '\\r\\n';\n  if (transceiver.rtpSender && transceiver.sendEncodingParameters[0].rtx) {\n    sdp += 'a=ssrc:' + transceiver.sendEncodingParameters[0].rtx.ssrc +\n        ' cname:' + SDPUtils.localCName + '\\r\\n';\n  }\n  return sdp;\n}\n\n// Edge does not like\n// 1) stun: filtered after 14393 unless ?transport=udp is present\n// 2) turn: that does not have all of turn:host:port?transport=udp\n// 3) turn: with ipv6 addresses\n// 4) turn: occurring muliple times\nfunction filterIceServers(iceServers, edgeVersion) {\n  var hasTurn = false;\n  iceServers = JSON.parse(JSON.stringify(iceServers));\n  return iceServers.filter(function(server) {\n    if (server && (server.urls || server.url)) {\n      var urls = server.urls || server.url;\n      if (server.url && !server.urls) {\n        console.warn('RTCIceServer.url is deprecated! Use urls instead.');\n      }\n      var isString = typeof urls === 'string';\n      if (isString) {\n        urls = [urls];\n      }\n      urls = urls.filter(function(url) {\n        var validTurn = url.indexOf('turn:') === 0 &&\n            url.indexOf('transport=udp') !== -1 &&\n            url.indexOf('turn:[') === -1 &&\n            !hasTurn;\n\n        if (validTurn) {\n          hasTurn = true;\n          return true;\n        }\n        return url.indexOf('stun:') === 0 && edgeVersion >= 14393 &&\n            url.indexOf('?transport=udp') === -1;\n      });\n\n      delete server.url;\n      server.urls = isString ? urls[0] : urls;\n      return !!urls.length;\n    }\n  });\n}\n\n// Determines the intersection of local and remote capabilities.\nfunction getCommonCapabilities(localCapabilities, remoteCapabilities) {\n  var commonCapabilities = {\n    codecs: [],\n    headerExtensions: [],\n    fecMechanisms: []\n  };\n\n  var findCodecByPayloadType = function(pt, codecs) {\n    pt = parseInt(pt, 10);\n    for (var i = 0; i < codecs.length; i++) {\n      if (codecs[i].payloadType === pt ||\n          codecs[i].preferredPayloadType === pt) {\n        return codecs[i];\n      }\n    }\n  };\n\n  var rtxCapabilityMatches = function(lRtx, rRtx, lCodecs, rCodecs) {\n    var lCodec = findCodecByPayloadType(lRtx.parameters.apt, lCodecs);\n    var rCodec = findCodecByPayloadType(rRtx.parameters.apt, rCodecs);\n    return lCodec && rCodec &&\n        lCodec.name.toLowerCase() === rCodec.name.toLowerCase();\n  };\n\n  localCapabilities.codecs.forEach(function(lCodec) {\n    for (var i = 0; i < remoteCapabilities.codecs.length; i++) {\n      var rCodec = remoteCapabilities.codecs[i];\n      if (lCodec.name.toLowerCase() === rCodec.name.toLowerCase() &&\n          lCodec.clockRate === rCodec.clockRate) {\n        if (lCodec.name.toLowerCase() === 'rtx' &&\n            lCodec.parameters && rCodec.parameters.apt) {\n          // for RTX we need to find the local rtx that has a apt\n          // which points to the same local codec as the remote one.\n          if (!rtxCapabilityMatches(lCodec, rCodec,\n              localCapabilities.codecs, remoteCapabilities.codecs)) {\n            continue;\n          }\n        }\n        rCodec = JSON.parse(JSON.stringify(rCodec)); // deepcopy\n        // number of channels is the highest common number of channels\n        rCodec.numChannels = Math.min(lCodec.numChannels,\n            rCodec.numChannels);\n        // push rCodec so we reply with offerer payload type\n        commonCapabilities.codecs.push(rCodec);\n\n        // determine common feedback mechanisms\n        rCodec.rtcpFeedback = rCodec.rtcpFeedback.filter(function(fb) {\n          for (var j = 0; j < lCodec.rtcpFeedback.length; j++) {\n            if (lCodec.rtcpFeedback[j].type === fb.type &&\n                lCodec.rtcpFeedback[j].parameter === fb.parameter) {\n              return true;\n            }\n          }\n          return false;\n        });\n        // FIXME: also need to determine .parameters\n        //  see https://github.com/openpeer/ortc/issues/569\n        break;\n      }\n    }\n  });\n\n  localCapabilities.headerExtensions.forEach(function(lHeaderExtension) {\n    for (var i = 0; i < remoteCapabilities.headerExtensions.length;\n         i++) {\n      var rHeaderExtension = remoteCapabilities.headerExtensions[i];\n      if (lHeaderExtension.uri === rHeaderExtension.uri) {\n        commonCapabilities.headerExtensions.push(rHeaderExtension);\n        break;\n      }\n    }\n  });\n\n  // FIXME: fecMechanisms\n  return commonCapabilities;\n}\n\n// is action=setLocalDescription with type allowed in signalingState\nfunction isActionAllowedInSignalingState(action, type, signalingState) {\n  return {\n    offer: {\n      setLocalDescription: ['stable', 'have-local-offer'],\n      setRemoteDescription: ['stable', 'have-remote-offer']\n    },\n    answer: {\n      setLocalDescription: ['have-remote-offer', 'have-local-pranswer'],\n      setRemoteDescription: ['have-local-offer', 'have-remote-pranswer']\n    }\n  }[type][action].indexOf(signalingState) !== -1;\n}\n\nfunction maybeAddCandidate(iceTransport, candidate) {\n  // Edge's internal representation adds some fields therefore\n  // not all fieldѕ are taken into account.\n  var alreadyAdded = iceTransport.getRemoteCandidates()\n      .find(function(remoteCandidate) {\n        return candidate.foundation === remoteCandidate.foundation &&\n            candidate.ip === remoteCandidate.ip &&\n            candidate.port === remoteCandidate.port &&\n            candidate.priority === remoteCandidate.priority &&\n            candidate.protocol === remoteCandidate.protocol &&\n            candidate.type === remoteCandidate.type;\n      });\n  if (!alreadyAdded) {\n    iceTransport.addRemoteCandidate(candidate);\n  }\n  return !alreadyAdded;\n}\n\n\nfunction makeError(name, description) {\n  var e = new Error(description);\n  e.name = name;\n  // legacy error codes from https://heycam.github.io/webidl/#idl-DOMException-error-names\n  e.code = {\n    NotSupportedError: 9,\n    InvalidStateError: 11,\n    InvalidAccessError: 15,\n    TypeError: undefined,\n    OperationError: undefined\n  }[name];\n  return e;\n}\n\nmodule.exports = function(window, edgeVersion) {\n  // https://w3c.github.io/mediacapture-main/#mediastream\n  // Helper function to add the track to the stream and\n  // dispatch the event ourselves.\n  function addTrackToStreamAndFireEvent(track, stream) {\n    stream.addTrack(track);\n    stream.dispatchEvent(new window.MediaStreamTrackEvent('addtrack',\n        {track: track}));\n  }\n\n  function removeTrackFromStreamAndFireEvent(track, stream) {\n    stream.removeTrack(track);\n    stream.dispatchEvent(new window.MediaStreamTrackEvent('removetrack',\n        {track: track}));\n  }\n\n  function fireAddTrack(pc, track, receiver, streams) {\n    var trackEvent = new Event('track');\n    trackEvent.track = track;\n    trackEvent.receiver = receiver;\n    trackEvent.transceiver = {receiver: receiver};\n    trackEvent.streams = streams;\n    window.setTimeout(function() {\n      pc._dispatchEvent('track', trackEvent);\n    });\n  }\n\n  var RTCPeerConnection = function(config) {\n    var pc = this;\n\n    var _eventTarget = document.createDocumentFragment();\n    ['addEventListener', 'removeEventListener', 'dispatchEvent']\n        .forEach(function(method) {\n          pc[method] = _eventTarget[method].bind(_eventTarget);\n        });\n\n    this.canTrickleIceCandidates = null;\n\n    this.needNegotiation = false;\n\n    this.localStreams = [];\n    this.remoteStreams = [];\n\n    this._localDescription = null;\n    this._remoteDescription = null;\n\n    this.signalingState = 'stable';\n    this.iceConnectionState = 'new';\n    this.connectionState = 'new';\n    this.iceGatheringState = 'new';\n\n    config = JSON.parse(JSON.stringify(config || {}));\n\n    this.usingBundle = config.bundlePolicy === 'max-bundle';\n    if (config.rtcpMuxPolicy === 'negotiate') {\n      throw(makeError('NotSupportedError',\n          'rtcpMuxPolicy \\'negotiate\\' is not supported'));\n    } else if (!config.rtcpMuxPolicy) {\n      config.rtcpMuxPolicy = 'require';\n    }\n\n    switch (config.iceTransportPolicy) {\n      case 'all':\n      case 'relay':\n        break;\n      default:\n        config.iceTransportPolicy = 'all';\n        break;\n    }\n\n    switch (config.bundlePolicy) {\n      case 'balanced':\n      case 'max-compat':\n      case 'max-bundle':\n        break;\n      default:\n        config.bundlePolicy = 'balanced';\n        break;\n    }\n\n    config.iceServers = filterIceServers(config.iceServers || [], edgeVersion);\n\n    this._iceGatherers = [];\n    if (config.iceCandidatePoolSize) {\n      for (var i = config.iceCandidatePoolSize; i > 0; i--) {\n        this._iceGatherers.push(new window.RTCIceGatherer({\n          iceServers: config.iceServers,\n          gatherPolicy: config.iceTransportPolicy\n        }));\n      }\n    } else {\n      config.iceCandidatePoolSize = 0;\n    }\n\n    this._config = config;\n\n    // per-track iceGathers, iceTransports, dtlsTransports, rtpSenders, ...\n    // everything that is needed to describe a SDP m-line.\n    this.transceivers = [];\n\n    this._sdpSessionId = SDPUtils.generateSessionId();\n    this._sdpSessionVersion = 0;\n\n    this._dtlsRole = undefined; // role for a=setup to use in answers.\n\n    this._isClosed = false;\n  };\n\n  Object.defineProperty(RTCPeerConnection.prototype, 'localDescription', {\n    configurable: true,\n    get: function() {\n      return this._localDescription;\n    }\n  });\n  Object.defineProperty(RTCPeerConnection.prototype, 'remoteDescription', {\n    configurable: true,\n    get: function() {\n      return this._remoteDescription;\n    }\n  });\n\n  // set up event handlers on prototype\n  RTCPeerConnection.prototype.onicecandidate = null;\n  RTCPeerConnection.prototype.onaddstream = null;\n  RTCPeerConnection.prototype.ontrack = null;\n  RTCPeerConnection.prototype.onremovestream = null;\n  RTCPeerConnection.prototype.onsignalingstatechange = null;\n  RTCPeerConnection.prototype.oniceconnectionstatechange = null;\n  RTCPeerConnection.prototype.onconnectionstatechange = null;\n  RTCPeerConnection.prototype.onicegatheringstatechange = null;\n  RTCPeerConnection.prototype.onnegotiationneeded = null;\n  RTCPeerConnection.prototype.ondatachannel = null;\n\n  RTCPeerConnection.prototype._dispatchEvent = function(name, event) {\n    if (this._isClosed) {\n      return;\n    }\n    this.dispatchEvent(event);\n    if (typeof this['on' + name] === 'function') {\n      this['on' + name](event);\n    }\n  };\n\n  RTCPeerConnection.prototype._emitGatheringStateChange = function() {\n    var event = new Event('icegatheringstatechange');\n    this._dispatchEvent('icegatheringstatechange', event);\n  };\n\n  RTCPeerConnection.prototype.getConfiguration = function() {\n    return this._config;\n  };\n\n  RTCPeerConnection.prototype.getLocalStreams = function() {\n    return this.localStreams;\n  };\n\n  RTCPeerConnection.prototype.getRemoteStreams = function() {\n    return this.remoteStreams;\n  };\n\n  // internal helper to create a transceiver object.\n  // (which is not yet the same as the WebRTC 1.0 transceiver)\n  RTCPeerConnection.prototype._createTransceiver = function(kind, doNotAdd) {\n    var hasBundleTransport = this.transceivers.length > 0;\n    var transceiver = {\n      track: null,\n      iceGatherer: null,\n      iceTransport: null,\n      dtlsTransport: null,\n      localCapabilities: null,\n      remoteCapabilities: null,\n      rtpSender: null,\n      rtpReceiver: null,\n      kind: kind,\n      mid: null,\n      sendEncodingParameters: null,\n      recvEncodingParameters: null,\n      stream: null,\n      associatedRemoteMediaStreams: [],\n      wantReceive: true\n    };\n    if (this.usingBundle && hasBundleTransport) {\n      transceiver.iceTransport = this.transceivers[0].iceTransport;\n      transceiver.dtlsTransport = this.transceivers[0].dtlsTransport;\n    } else {\n      var transports = this._createIceAndDtlsTransports();\n      transceiver.iceTransport = transports.iceTransport;\n      transceiver.dtlsTransport = transports.dtlsTransport;\n    }\n    if (!doNotAdd) {\n      this.transceivers.push(transceiver);\n    }\n    return transceiver;\n  };\n\n  RTCPeerConnection.prototype.addTrack = function(track, stream) {\n    if (this._isClosed) {\n      throw makeError('InvalidStateError',\n          'Attempted to call addTrack on a closed peerconnection.');\n    }\n\n    var alreadyExists = this.transceivers.find(function(s) {\n      return s.track === track;\n    });\n\n    if (alreadyExists) {\n      throw makeError('InvalidAccessError', 'Track already exists.');\n    }\n\n    var transceiver;\n    for (var i = 0; i < this.transceivers.length; i++) {\n      if (!this.transceivers[i].track &&\n          this.transceivers[i].kind === track.kind) {\n        transceiver = this.transceivers[i];\n      }\n    }\n    if (!transceiver) {\n      transceiver = this._createTransceiver(track.kind);\n    }\n\n    this._maybeFireNegotiationNeeded();\n\n    if (this.localStreams.indexOf(stream) === -1) {\n      this.localStreams.push(stream);\n    }\n\n    transceiver.track = track;\n    transceiver.stream = stream;\n    transceiver.rtpSender = new window.RTCRtpSender(track,\n        transceiver.dtlsTransport);\n    return transceiver.rtpSender;\n  };\n\n  RTCPeerConnection.prototype.addStream = function(stream) {\n    var pc = this;\n    if (edgeVersion >= 15025) {\n      stream.getTracks().forEach(function(track) {\n        pc.addTrack(track, stream);\n      });\n    } else {\n      // Clone is necessary for local demos mostly, attaching directly\n      // to two different senders does not work (build 10547).\n      // Fixed in 15025 (or earlier)\n      var clonedStream = stream.clone();\n      stream.getTracks().forEach(function(track, idx) {\n        var clonedTrack = clonedStream.getTracks()[idx];\n        track.addEventListener('enabled', function(event) {\n          clonedTrack.enabled = event.enabled;\n        });\n      });\n      clonedStream.getTracks().forEach(function(track) {\n        pc.addTrack(track, clonedStream);\n      });\n    }\n  };\n\n  RTCPeerConnection.prototype.removeTrack = function(sender) {\n    if (this._isClosed) {\n      throw makeError('InvalidStateError',\n          'Attempted to call removeTrack on a closed peerconnection.');\n    }\n\n    if (!(sender instanceof window.RTCRtpSender)) {\n      throw new TypeError('Argument 1 of RTCPeerConnection.removeTrack ' +\n          'does not implement interface RTCRtpSender.');\n    }\n\n    var transceiver = this.transceivers.find(function(t) {\n      return t.rtpSender === sender;\n    });\n\n    if (!transceiver) {\n      throw makeError('InvalidAccessError',\n          'Sender was not created by this connection.');\n    }\n    var stream = transceiver.stream;\n\n    transceiver.rtpSender.stop();\n    transceiver.rtpSender = null;\n    transceiver.track = null;\n    transceiver.stream = null;\n\n    // remove the stream from the set of local streams\n    var localStreams = this.transceivers.map(function(t) {\n      return t.stream;\n    });\n    if (localStreams.indexOf(stream) === -1 &&\n        this.localStreams.indexOf(stream) > -1) {\n      this.localStreams.splice(this.localStreams.indexOf(stream), 1);\n    }\n\n    this._maybeFireNegotiationNeeded();\n  };\n\n  RTCPeerConnection.prototype.removeStream = function(stream) {\n    var pc = this;\n    stream.getTracks().forEach(function(track) {\n      var sender = pc.getSenders().find(function(s) {\n        return s.track === track;\n      });\n      if (sender) {\n        pc.removeTrack(sender);\n      }\n    });\n  };\n\n  RTCPeerConnection.prototype.getSenders = function() {\n    return this.transceivers.filter(function(transceiver) {\n      return !!transceiver.rtpSender;\n    })\n    .map(function(transceiver) {\n      return transceiver.rtpSender;\n    });\n  };\n\n  RTCPeerConnection.prototype.getReceivers = function() {\n    return this.transceivers.filter(function(transceiver) {\n      return !!transceiver.rtpReceiver;\n    })\n    .map(function(transceiver) {\n      return transceiver.rtpReceiver;\n    });\n  };\n\n\n  RTCPeerConnection.prototype._createIceGatherer = function(sdpMLineIndex,\n      usingBundle) {\n    var pc = this;\n    if (usingBundle && sdpMLineIndex > 0) {\n      return this.transceivers[0].iceGatherer;\n    } else if (this._iceGatherers.length) {\n      return this._iceGatherers.shift();\n    }\n    var iceGatherer = new window.RTCIceGatherer({\n      iceServers: this._config.iceServers,\n      gatherPolicy: this._config.iceTransportPolicy\n    });\n    Object.defineProperty(iceGatherer, 'state',\n        {value: 'new', writable: true}\n    );\n\n    this.transceivers[sdpMLineIndex].bufferedCandidateEvents = [];\n    this.transceivers[sdpMLineIndex].bufferCandidates = function(event) {\n      var end = !event.candidate || Object.keys(event.candidate).length === 0;\n      // polyfill since RTCIceGatherer.state is not implemented in\n      // Edge 10547 yet.\n      iceGatherer.state = end ? 'completed' : 'gathering';\n      if (pc.transceivers[sdpMLineIndex].bufferedCandidateEvents !== null) {\n        pc.transceivers[sdpMLineIndex].bufferedCandidateEvents.push(event);\n      }\n    };\n    iceGatherer.addEventListener('localcandidate',\n      this.transceivers[sdpMLineIndex].bufferCandidates);\n    return iceGatherer;\n  };\n\n  // start gathering from an RTCIceGatherer.\n  RTCPeerConnection.prototype._gather = function(mid, sdpMLineIndex) {\n    var pc = this;\n    var iceGatherer = this.transceivers[sdpMLineIndex].iceGatherer;\n    if (iceGatherer.onlocalcandidate) {\n      return;\n    }\n    var bufferedCandidateEvents =\n      this.transceivers[sdpMLineIndex].bufferedCandidateEvents;\n    this.transceivers[sdpMLineIndex].bufferedCandidateEvents = null;\n    iceGatherer.removeEventListener('localcandidate',\n      this.transceivers[sdpMLineIndex].bufferCandidates);\n    iceGatherer.onlocalcandidate = function(evt) {\n      if (pc.usingBundle && sdpMLineIndex > 0) {\n        // if we know that we use bundle we can drop candidates with\n        // ѕdpMLineIndex > 0. If we don't do this then our state gets\n        // confused since we dispose the extra ice gatherer.\n        return;\n      }\n      var event = new Event('icecandidate');\n      event.candidate = {sdpMid: mid, sdpMLineIndex: sdpMLineIndex};\n\n      var cand = evt.candidate;\n      // Edge emits an empty object for RTCIceCandidateComplete‥\n      var end = !cand || Object.keys(cand).length === 0;\n      if (end) {\n        // polyfill since RTCIceGatherer.state is not implemented in\n        // Edge 10547 yet.\n        if (iceGatherer.state === 'new' || iceGatherer.state === 'gathering') {\n          iceGatherer.state = 'completed';\n        }\n      } else {\n        if (iceGatherer.state === 'new') {\n          iceGatherer.state = 'gathering';\n        }\n        // RTCIceCandidate doesn't have a component, needs to be added\n        cand.component = 1;\n        // also the usernameFragment. TODO: update SDP to take both variants.\n        cand.ufrag = iceGatherer.getLocalParameters().usernameFragment;\n\n        var serializedCandidate = SDPUtils.writeCandidate(cand);\n        event.candidate = Object.assign(event.candidate,\n            SDPUtils.parseCandidate(serializedCandidate));\n\n        event.candidate.candidate = serializedCandidate;\n        event.candidate.toJSON = function() {\n          return {\n            candidate: event.candidate.candidate,\n            sdpMid: event.candidate.sdpMid,\n            sdpMLineIndex: event.candidate.sdpMLineIndex,\n            usernameFragment: event.candidate.usernameFragment\n          };\n        };\n      }\n\n      // update local description.\n      var sections = SDPUtils.getMediaSections(pc._localDescription.sdp);\n      if (!end) {\n        sections[event.candidate.sdpMLineIndex] +=\n            'a=' + event.candidate.candidate + '\\r\\n';\n      } else {\n        sections[event.candidate.sdpMLineIndex] +=\n            'a=end-of-candidates\\r\\n';\n      }\n      pc._localDescription.sdp =\n          SDPUtils.getDescription(pc._localDescription.sdp) +\n          sections.join('');\n      var complete = pc.transceivers.every(function(transceiver) {\n        return transceiver.iceGatherer &&\n            transceiver.iceGatherer.state === 'completed';\n      });\n\n      if (pc.iceGatheringState !== 'gathering') {\n        pc.iceGatheringState = 'gathering';\n        pc._emitGatheringStateChange();\n      }\n\n      // Emit candidate. Also emit null candidate when all gatherers are\n      // complete.\n      if (!end) {\n        pc._dispatchEvent('icecandidate', event);\n      }\n      if (complete) {\n        pc._dispatchEvent('icecandidate', new Event('icecandidate'));\n        pc.iceGatheringState = 'complete';\n        pc._emitGatheringStateChange();\n      }\n    };\n\n    // emit already gathered candidates.\n    window.setTimeout(function() {\n      bufferedCandidateEvents.forEach(function(e) {\n        iceGatherer.onlocalcandidate(e);\n      });\n    }, 0);\n  };\n\n  // Create ICE transport and DTLS transport.\n  RTCPeerConnection.prototype._createIceAndDtlsTransports = function() {\n    var pc = this;\n    var iceTransport = new window.RTCIceTransport(null);\n    iceTransport.onicestatechange = function() {\n      pc._updateIceConnectionState();\n      pc._updateConnectionState();\n    };\n\n    var dtlsTransport = new window.RTCDtlsTransport(iceTransport);\n    dtlsTransport.ondtlsstatechange = function() {\n      pc._updateConnectionState();\n    };\n    dtlsTransport.onerror = function() {\n      // onerror does not set state to failed by itself.\n      Object.defineProperty(dtlsTransport, 'state',\n          {value: 'failed', writable: true});\n      pc._updateConnectionState();\n    };\n\n    return {\n      iceTransport: iceTransport,\n      dtlsTransport: dtlsTransport\n    };\n  };\n\n  // Destroy ICE gatherer, ICE transport and DTLS transport.\n  // Without triggering the callbacks.\n  RTCPeerConnection.prototype._disposeIceAndDtlsTransports = function(\n      sdpMLineIndex) {\n    var iceGatherer = this.transceivers[sdpMLineIndex].iceGatherer;\n    if (iceGatherer) {\n      delete iceGatherer.onlocalcandidate;\n      delete this.transceivers[sdpMLineIndex].iceGatherer;\n    }\n    var iceTransport = this.transceivers[sdpMLineIndex].iceTransport;\n    if (iceTransport) {\n      delete iceTransport.onicestatechange;\n      delete this.transceivers[sdpMLineIndex].iceTransport;\n    }\n    var dtlsTransport = this.transceivers[sdpMLineIndex].dtlsTransport;\n    if (dtlsTransport) {\n      delete dtlsTransport.ondtlsstatechange;\n      delete dtlsTransport.onerror;\n      delete this.transceivers[sdpMLineIndex].dtlsTransport;\n    }\n  };\n\n  // Start the RTP Sender and Receiver for a transceiver.\n  RTCPeerConnection.prototype._transceive = function(transceiver,\n      send, recv) {\n    var params = getCommonCapabilities(transceiver.localCapabilities,\n        transceiver.remoteCapabilities);\n    if (send && transceiver.rtpSender) {\n      params.encodings = transceiver.sendEncodingParameters;\n      params.rtcp = {\n        cname: SDPUtils.localCName,\n        compound: transceiver.rtcpParameters.compound\n      };\n      if (transceiver.recvEncodingParameters.length) {\n        params.rtcp.ssrc = transceiver.recvEncodingParameters[0].ssrc;\n      }\n      transceiver.rtpSender.send(params);\n    }\n    if (recv && transceiver.rtpReceiver && params.codecs.length > 0) {\n      // remove RTX field in Edge 14942\n      if (transceiver.kind === 'video'\n          && transceiver.recvEncodingParameters\n          && edgeVersion < 15019) {\n        transceiver.recvEncodingParameters.forEach(function(p) {\n          delete p.rtx;\n        });\n      }\n      if (transceiver.recvEncodingParameters.length) {\n        params.encodings = transceiver.recvEncodingParameters;\n      } else {\n        params.encodings = [{}];\n      }\n      params.rtcp = {\n        compound: transceiver.rtcpParameters.compound\n      };\n      if (transceiver.rtcpParameters.cname) {\n        params.rtcp.cname = transceiver.rtcpParameters.cname;\n      }\n      if (transceiver.sendEncodingParameters.length) {\n        params.rtcp.ssrc = transceiver.sendEncodingParameters[0].ssrc;\n      }\n      transceiver.rtpReceiver.receive(params);\n    }\n  };\n\n  RTCPeerConnection.prototype.setLocalDescription = function(description) {\n    var pc = this;\n\n    // Note: pranswer is not supported.\n    if (['offer', 'answer'].indexOf(description.type) === -1) {\n      return Promise.reject(makeError('TypeError',\n          'Unsupported type \"' + description.type + '\"'));\n    }\n\n    if (!isActionAllowedInSignalingState('setLocalDescription',\n        description.type, pc.signalingState) || pc._isClosed) {\n      return Promise.reject(makeError('InvalidStateError',\n          'Can not set local ' + description.type +\n          ' in state ' + pc.signalingState));\n    }\n\n    var sections;\n    var sessionpart;\n    if (description.type === 'offer') {\n      // VERY limited support for SDP munging. Limited to:\n      // * changing the order of codecs\n      sections = SDPUtils.splitSections(description.sdp);\n      sessionpart = sections.shift();\n      sections.forEach(function(mediaSection, sdpMLineIndex) {\n        var caps = SDPUtils.parseRtpParameters(mediaSection);\n        pc.transceivers[sdpMLineIndex].localCapabilities = caps;\n      });\n\n      pc.transceivers.forEach(function(transceiver, sdpMLineIndex) {\n        pc._gather(transceiver.mid, sdpMLineIndex);\n      });\n    } else if (description.type === 'answer') {\n      sections = SDPUtils.splitSections(pc._remoteDescription.sdp);\n      sessionpart = sections.shift();\n      var isIceLite = SDPUtils.matchPrefix(sessionpart,\n          'a=ice-lite').length > 0;\n      sections.forEach(function(mediaSection, sdpMLineIndex) {\n        var transceiver = pc.transceivers[sdpMLineIndex];\n        var iceGatherer = transceiver.iceGatherer;\n        var iceTransport = transceiver.iceTransport;\n        var dtlsTransport = transceiver.dtlsTransport;\n        var localCapabilities = transceiver.localCapabilities;\n        var remoteCapabilities = transceiver.remoteCapabilities;\n\n        // treat bundle-only as not-rejected.\n        var rejected = SDPUtils.isRejected(mediaSection) &&\n            SDPUtils.matchPrefix(mediaSection, 'a=bundle-only').length === 0;\n\n        if (!rejected && !transceiver.rejected) {\n          var remoteIceParameters = SDPUtils.getIceParameters(\n              mediaSection, sessionpart);\n          var remoteDtlsParameters = SDPUtils.getDtlsParameters(\n              mediaSection, sessionpart);\n          if (isIceLite) {\n            remoteDtlsParameters.role = 'server';\n          }\n\n          if (!pc.usingBundle || sdpMLineIndex === 0) {\n            pc._gather(transceiver.mid, sdpMLineIndex);\n            if (iceTransport.state === 'new') {\n              iceTransport.start(iceGatherer, remoteIceParameters,\n                  isIceLite ? 'controlling' : 'controlled');\n            }\n            if (dtlsTransport.state === 'new') {\n              dtlsTransport.start(remoteDtlsParameters);\n            }\n          }\n\n          // Calculate intersection of capabilities.\n          var params = getCommonCapabilities(localCapabilities,\n              remoteCapabilities);\n\n          // Start the RTCRtpSender. The RTCRtpReceiver for this\n          // transceiver has already been started in setRemoteDescription.\n          pc._transceive(transceiver,\n              params.codecs.length > 0,\n              false);\n        }\n      });\n    }\n\n    pc._localDescription = {\n      type: description.type,\n      sdp: description.sdp\n    };\n    if (description.type === 'offer') {\n      pc._updateSignalingState('have-local-offer');\n    } else {\n      pc._updateSignalingState('stable');\n    }\n\n    return Promise.resolve();\n  };\n\n  RTCPeerConnection.prototype.setRemoteDescription = function(description) {\n    var pc = this;\n\n    // Note: pranswer is not supported.\n    if (['offer', 'answer'].indexOf(description.type) === -1) {\n      return Promise.reject(makeError('TypeError',\n          'Unsupported type \"' + description.type + '\"'));\n    }\n\n    if (!isActionAllowedInSignalingState('setRemoteDescription',\n        description.type, pc.signalingState) || pc._isClosed) {\n      return Promise.reject(makeError('InvalidStateError',\n          'Can not set remote ' + description.type +\n          ' in state ' + pc.signalingState));\n    }\n\n    var streams = {};\n    pc.remoteStreams.forEach(function(stream) {\n      streams[stream.id] = stream;\n    });\n    var receiverList = [];\n    var sections = SDPUtils.splitSections(description.sdp);\n    var sessionpart = sections.shift();\n    var isIceLite = SDPUtils.matchPrefix(sessionpart,\n        'a=ice-lite').length > 0;\n    var usingBundle = SDPUtils.matchPrefix(sessionpart,\n        'a=group:BUNDLE ').length > 0;\n    pc.usingBundle = usingBundle;\n    var iceOptions = SDPUtils.matchPrefix(sessionpart,\n        'a=ice-options:')[0];\n    if (iceOptions) {\n      pc.canTrickleIceCandidates = iceOptions.substr(14).split(' ')\n          .indexOf('trickle') >= 0;\n    } else {\n      pc.canTrickleIceCandidates = false;\n    }\n\n    sections.forEach(function(mediaSection, sdpMLineIndex) {\n      var lines = SDPUtils.splitLines(mediaSection);\n      var kind = SDPUtils.getKind(mediaSection);\n      // treat bundle-only as not-rejected.\n      var rejected = SDPUtils.isRejected(mediaSection) &&\n          SDPUtils.matchPrefix(mediaSection, 'a=bundle-only').length === 0;\n      var protocol = lines[0].substr(2).split(' ')[2];\n\n      var direction = SDPUtils.getDirection(mediaSection, sessionpart);\n      var remoteMsid = SDPUtils.parseMsid(mediaSection);\n\n      var mid = SDPUtils.getMid(mediaSection) || SDPUtils.generateIdentifier();\n\n      // Reject datachannels which are not implemented yet.\n      if (rejected || (kind === 'application' && (protocol === 'DTLS/SCTP' ||\n          protocol === 'UDP/DTLS/SCTP'))) {\n        // TODO: this is dangerous in the case where a non-rejected m-line\n        //     becomes rejected.\n        pc.transceivers[sdpMLineIndex] = {\n          mid: mid,\n          kind: kind,\n          protocol: protocol,\n          rejected: true\n        };\n        return;\n      }\n\n      if (!rejected && pc.transceivers[sdpMLineIndex] &&\n          pc.transceivers[sdpMLineIndex].rejected) {\n        // recycle a rejected transceiver.\n        pc.transceivers[sdpMLineIndex] = pc._createTransceiver(kind, true);\n      }\n\n      var transceiver;\n      var iceGatherer;\n      var iceTransport;\n      var dtlsTransport;\n      var rtpReceiver;\n      var sendEncodingParameters;\n      var recvEncodingParameters;\n      var localCapabilities;\n\n      var track;\n      // FIXME: ensure the mediaSection has rtcp-mux set.\n      var remoteCapabilities = SDPUtils.parseRtpParameters(mediaSection);\n      var remoteIceParameters;\n      var remoteDtlsParameters;\n      if (!rejected) {\n        remoteIceParameters = SDPUtils.getIceParameters(mediaSection,\n            sessionpart);\n        remoteDtlsParameters = SDPUtils.getDtlsParameters(mediaSection,\n            sessionpart);\n        remoteDtlsParameters.role = 'client';\n      }\n      recvEncodingParameters =\n          SDPUtils.parseRtpEncodingParameters(mediaSection);\n\n      var rtcpParameters = SDPUtils.parseRtcpParameters(mediaSection);\n\n      var isComplete = SDPUtils.matchPrefix(mediaSection,\n          'a=end-of-candidates', sessionpart).length > 0;\n      var cands = SDPUtils.matchPrefix(mediaSection, 'a=candidate:')\n          .map(function(cand) {\n            return SDPUtils.parseCandidate(cand);\n          })\n          .filter(function(cand) {\n            return cand.component === 1;\n          });\n\n      // Check if we can use BUNDLE and dispose transports.\n      if ((description.type === 'offer' || description.type === 'answer') &&\n          !rejected && usingBundle && sdpMLineIndex > 0 &&\n          pc.transceivers[sdpMLineIndex]) {\n        pc._disposeIceAndDtlsTransports(sdpMLineIndex);\n        pc.transceivers[sdpMLineIndex].iceGatherer =\n            pc.transceivers[0].iceGatherer;\n        pc.transceivers[sdpMLineIndex].iceTransport =\n            pc.transceivers[0].iceTransport;\n        pc.transceivers[sdpMLineIndex].dtlsTransport =\n            pc.transceivers[0].dtlsTransport;\n        if (pc.transceivers[sdpMLineIndex].rtpSender) {\n          pc.transceivers[sdpMLineIndex].rtpSender.setTransport(\n              pc.transceivers[0].dtlsTransport);\n        }\n        if (pc.transceivers[sdpMLineIndex].rtpReceiver) {\n          pc.transceivers[sdpMLineIndex].rtpReceiver.setTransport(\n              pc.transceivers[0].dtlsTransport);\n        }\n      }\n      if (description.type === 'offer' && !rejected) {\n        transceiver = pc.transceivers[sdpMLineIndex] ||\n            pc._createTransceiver(kind);\n        transceiver.mid = mid;\n\n        if (!transceiver.iceGatherer) {\n          transceiver.iceGatherer = pc._createIceGatherer(sdpMLineIndex,\n              usingBundle);\n        }\n\n        if (cands.length && transceiver.iceTransport.state === 'new') {\n          if (isComplete && (!usingBundle || sdpMLineIndex === 0)) {\n            transceiver.iceTransport.setRemoteCandidates(cands);\n          } else {\n            cands.forEach(function(candidate) {\n              maybeAddCandidate(transceiver.iceTransport, candidate);\n            });\n          }\n        }\n\n        localCapabilities = window.RTCRtpReceiver.getCapabilities(kind);\n\n        // filter RTX until additional stuff needed for RTX is implemented\n        // in adapter.js\n        if (edgeVersion < 15019) {\n          localCapabilities.codecs = localCapabilities.codecs.filter(\n              function(codec) {\n                return codec.name !== 'rtx';\n              });\n        }\n\n        sendEncodingParameters = transceiver.sendEncodingParameters || [{\n          ssrc: (2 * sdpMLineIndex + 2) * 1001\n        }];\n\n        // TODO: rewrite to use http://w3c.github.io/webrtc-pc/#set-associated-remote-streams\n        var isNewTrack = false;\n        if (direction === 'sendrecv' || direction === 'sendonly') {\n          isNewTrack = !transceiver.rtpReceiver;\n          rtpReceiver = transceiver.rtpReceiver ||\n              new window.RTCRtpReceiver(transceiver.dtlsTransport, kind);\n\n          if (isNewTrack) {\n            var stream;\n            track = rtpReceiver.track;\n            // FIXME: does not work with Plan B.\n            if (remoteMsid && remoteMsid.stream === '-') {\n              // no-op. a stream id of '-' means: no associated stream.\n            } else if (remoteMsid) {\n              if (!streams[remoteMsid.stream]) {\n                streams[remoteMsid.stream] = new window.MediaStream();\n                Object.defineProperty(streams[remoteMsid.stream], 'id', {\n                  get: function() {\n                    return remoteMsid.stream;\n                  }\n                });\n              }\n              Object.defineProperty(track, 'id', {\n                get: function() {\n                  return remoteMsid.track;\n                }\n              });\n              stream = streams[remoteMsid.stream];\n            } else {\n              if (!streams.default) {\n                streams.default = new window.MediaStream();\n              }\n              stream = streams.default;\n            }\n            if (stream) {\n              addTrackToStreamAndFireEvent(track, stream);\n              transceiver.associatedRemoteMediaStreams.push(stream);\n            }\n            receiverList.push([track, rtpReceiver, stream]);\n          }\n        } else if (transceiver.rtpReceiver && transceiver.rtpReceiver.track) {\n          transceiver.associatedRemoteMediaStreams.forEach(function(s) {\n            var nativeTrack = s.getTracks().find(function(t) {\n              return t.id === transceiver.rtpReceiver.track.id;\n            });\n            if (nativeTrack) {\n              removeTrackFromStreamAndFireEvent(nativeTrack, s);\n            }\n          });\n          transceiver.associatedRemoteMediaStreams = [];\n        }\n\n        transceiver.localCapabilities = localCapabilities;\n        transceiver.remoteCapabilities = remoteCapabilities;\n        transceiver.rtpReceiver = rtpReceiver;\n        transceiver.rtcpParameters = rtcpParameters;\n        transceiver.sendEncodingParameters = sendEncodingParameters;\n        transceiver.recvEncodingParameters = recvEncodingParameters;\n\n        // Start the RTCRtpReceiver now. The RTPSender is started in\n        // setLocalDescription.\n        pc._transceive(pc.transceivers[sdpMLineIndex],\n            false,\n            isNewTrack);\n      } else if (description.type === 'answer' && !rejected) {\n        transceiver = pc.transceivers[sdpMLineIndex];\n        iceGatherer = transceiver.iceGatherer;\n        iceTransport = transceiver.iceTransport;\n        dtlsTransport = transceiver.dtlsTransport;\n        rtpReceiver = transceiver.rtpReceiver;\n        sendEncodingParameters = transceiver.sendEncodingParameters;\n        localCapabilities = transceiver.localCapabilities;\n\n        pc.transceivers[sdpMLineIndex].recvEncodingParameters =\n            recvEncodingParameters;\n        pc.transceivers[sdpMLineIndex].remoteCapabilities =\n            remoteCapabilities;\n        pc.transceivers[sdpMLineIndex].rtcpParameters = rtcpParameters;\n\n        if (cands.length && iceTransport.state === 'new') {\n          if ((isIceLite || isComplete) &&\n              (!usingBundle || sdpMLineIndex === 0)) {\n            iceTransport.setRemoteCandidates(cands);\n          } else {\n            cands.forEach(function(candidate) {\n              maybeAddCandidate(transceiver.iceTransport, candidate);\n            });\n          }\n        }\n\n        if (!usingBundle || sdpMLineIndex === 0) {\n          if (iceTransport.state === 'new') {\n            iceTransport.start(iceGatherer, remoteIceParameters,\n                'controlling');\n          }\n          if (dtlsTransport.state === 'new') {\n            dtlsTransport.start(remoteDtlsParameters);\n          }\n        }\n\n        // If the offer contained RTX but the answer did not,\n        // remove RTX from sendEncodingParameters.\n        var commonCapabilities = getCommonCapabilities(\n          transceiver.localCapabilities,\n          transceiver.remoteCapabilities);\n\n        var hasRtx = commonCapabilities.codecs.filter(function(c) {\n          return c.name.toLowerCase() === 'rtx';\n        }).length;\n        if (!hasRtx && transceiver.sendEncodingParameters[0].rtx) {\n          delete transceiver.sendEncodingParameters[0].rtx;\n        }\n\n        pc._transceive(transceiver,\n            direction === 'sendrecv' || direction === 'recvonly',\n            direction === 'sendrecv' || direction === 'sendonly');\n\n        // TODO: rewrite to use http://w3c.github.io/webrtc-pc/#set-associated-remote-streams\n        if (rtpReceiver &&\n            (direction === 'sendrecv' || direction === 'sendonly')) {\n          track = rtpReceiver.track;\n          if (remoteMsid) {\n            if (!streams[remoteMsid.stream]) {\n              streams[remoteMsid.stream] = new window.MediaStream();\n            }\n            addTrackToStreamAndFireEvent(track, streams[remoteMsid.stream]);\n            receiverList.push([track, rtpReceiver, streams[remoteMsid.stream]]);\n          } else {\n            if (!streams.default) {\n              streams.default = new window.MediaStream();\n            }\n            addTrackToStreamAndFireEvent(track, streams.default);\n            receiverList.push([track, rtpReceiver, streams.default]);\n          }\n        } else {\n          // FIXME: actually the receiver should be created later.\n          delete transceiver.rtpReceiver;\n        }\n      }\n    });\n\n    if (pc._dtlsRole === undefined) {\n      pc._dtlsRole = description.type === 'offer' ? 'active' : 'passive';\n    }\n\n    pc._remoteDescription = {\n      type: description.type,\n      sdp: description.sdp\n    };\n    if (description.type === 'offer') {\n      pc._updateSignalingState('have-remote-offer');\n    } else {\n      pc._updateSignalingState('stable');\n    }\n    Object.keys(streams).forEach(function(sid) {\n      var stream = streams[sid];\n      if (stream.getTracks().length) {\n        if (pc.remoteStreams.indexOf(stream) === -1) {\n          pc.remoteStreams.push(stream);\n          var event = new Event('addstream');\n          event.stream = stream;\n          window.setTimeout(function() {\n            pc._dispatchEvent('addstream', event);\n          });\n        }\n\n        receiverList.forEach(function(item) {\n          var track = item[0];\n          var receiver = item[1];\n          if (stream.id !== item[2].id) {\n            return;\n          }\n          fireAddTrack(pc, track, receiver, [stream]);\n        });\n      }\n    });\n    receiverList.forEach(function(item) {\n      if (item[2]) {\n        return;\n      }\n      fireAddTrack(pc, item[0], item[1], []);\n    });\n\n    // check whether addIceCandidate({}) was called within four seconds after\n    // setRemoteDescription.\n    window.setTimeout(function() {\n      if (!(pc && pc.transceivers)) {\n        return;\n      }\n      pc.transceivers.forEach(function(transceiver) {\n        if (transceiver.iceTransport &&\n            transceiver.iceTransport.state === 'new' &&\n            transceiver.iceTransport.getRemoteCandidates().length > 0) {\n          console.warn('Timeout for addRemoteCandidate. Consider sending ' +\n              'an end-of-candidates notification');\n          transceiver.iceTransport.addRemoteCandidate({});\n        }\n      });\n    }, 4000);\n\n    return Promise.resolve();\n  };\n\n  RTCPeerConnection.prototype.close = function() {\n    this.transceivers.forEach(function(transceiver) {\n      /* not yet\n      if (transceiver.iceGatherer) {\n        transceiver.iceGatherer.close();\n      }\n      */\n      if (transceiver.iceTransport) {\n        transceiver.iceTransport.stop();\n      }\n      if (transceiver.dtlsTransport) {\n        transceiver.dtlsTransport.stop();\n      }\n      if (transceiver.rtpSender) {\n        transceiver.rtpSender.stop();\n      }\n      if (transceiver.rtpReceiver) {\n        transceiver.rtpReceiver.stop();\n      }\n    });\n    // FIXME: clean up tracks, local streams, remote streams, etc\n    this._isClosed = true;\n    this._updateSignalingState('closed');\n  };\n\n  // Update the signaling state.\n  RTCPeerConnection.prototype._updateSignalingState = function(newState) {\n    this.signalingState = newState;\n    var event = new Event('signalingstatechange');\n    this._dispatchEvent('signalingstatechange', event);\n  };\n\n  // Determine whether to fire the negotiationneeded event.\n  RTCPeerConnection.prototype._maybeFireNegotiationNeeded = function() {\n    var pc = this;\n    if (this.signalingState !== 'stable' || this.needNegotiation === true) {\n      return;\n    }\n    this.needNegotiation = true;\n    window.setTimeout(function() {\n      if (pc.needNegotiation) {\n        pc.needNegotiation = false;\n        var event = new Event('negotiationneeded');\n        pc._dispatchEvent('negotiationneeded', event);\n      }\n    }, 0);\n  };\n\n  // Update the ice connection state.\n  RTCPeerConnection.prototype._updateIceConnectionState = function() {\n    var newState;\n    var states = {\n      'new': 0,\n      closed: 0,\n      checking: 0,\n      connected: 0,\n      completed: 0,\n      disconnected: 0,\n      failed: 0\n    };\n    this.transceivers.forEach(function(transceiver) {\n      if (transceiver.iceTransport && !transceiver.rejected) {\n        states[transceiver.iceTransport.state]++;\n      }\n    });\n\n    newState = 'new';\n    if (states.failed > 0) {\n      newState = 'failed';\n    } else if (states.checking > 0) {\n      newState = 'checking';\n    } else if (states.disconnected > 0) {\n      newState = 'disconnected';\n    } else if (states.new > 0) {\n      newState = 'new';\n    } else if (states.connected > 0) {\n      newState = 'connected';\n    } else if (states.completed > 0) {\n      newState = 'completed';\n    }\n\n    if (newState !== this.iceConnectionState) {\n      this.iceConnectionState = newState;\n      var event = new Event('iceconnectionstatechange');\n      this._dispatchEvent('iceconnectionstatechange', event);\n    }\n  };\n\n  // Update the connection state.\n  RTCPeerConnection.prototype._updateConnectionState = function() {\n    var newState;\n    var states = {\n      'new': 0,\n      closed: 0,\n      connecting: 0,\n      connected: 0,\n      completed: 0,\n      disconnected: 0,\n      failed: 0\n    };\n    this.transceivers.forEach(function(transceiver) {\n      if (transceiver.iceTransport && transceiver.dtlsTransport &&\n          !transceiver.rejected) {\n        states[transceiver.iceTransport.state]++;\n        states[transceiver.dtlsTransport.state]++;\n      }\n    });\n    // ICETransport.completed and connected are the same for this purpose.\n    states.connected += states.completed;\n\n    newState = 'new';\n    if (states.failed > 0) {\n      newState = 'failed';\n    } else if (states.connecting > 0) {\n      newState = 'connecting';\n    } else if (states.disconnected > 0) {\n      newState = 'disconnected';\n    } else if (states.new > 0) {\n      newState = 'new';\n    } else if (states.connected > 0) {\n      newState = 'connected';\n    }\n\n    if (newState !== this.connectionState) {\n      this.connectionState = newState;\n      var event = new Event('connectionstatechange');\n      this._dispatchEvent('connectionstatechange', event);\n    }\n  };\n\n  RTCPeerConnection.prototype.createOffer = function() {\n    var pc = this;\n\n    if (pc._isClosed) {\n      return Promise.reject(makeError('InvalidStateError',\n          'Can not call createOffer after close'));\n    }\n\n    var numAudioTracks = pc.transceivers.filter(function(t) {\n      return t.kind === 'audio';\n    }).length;\n    var numVideoTracks = pc.transceivers.filter(function(t) {\n      return t.kind === 'video';\n    }).length;\n\n    // Determine number of audio and video tracks we need to send/recv.\n    var offerOptions = arguments[0];\n    if (offerOptions) {\n      // Reject Chrome legacy constraints.\n      if (offerOptions.mandatory || offerOptions.optional) {\n        throw new TypeError(\n            'Legacy mandatory/optional constraints not supported.');\n      }\n      if (offerOptions.offerToReceiveAudio !== undefined) {\n        if (offerOptions.offerToReceiveAudio === true) {\n          numAudioTracks = 1;\n        } else if (offerOptions.offerToReceiveAudio === false) {\n          numAudioTracks = 0;\n        } else {\n          numAudioTracks = offerOptions.offerToReceiveAudio;\n        }\n      }\n      if (offerOptions.offerToReceiveVideo !== undefined) {\n        if (offerOptions.offerToReceiveVideo === true) {\n          numVideoTracks = 1;\n        } else if (offerOptions.offerToReceiveVideo === false) {\n          numVideoTracks = 0;\n        } else {\n          numVideoTracks = offerOptions.offerToReceiveVideo;\n        }\n      }\n    }\n\n    pc.transceivers.forEach(function(transceiver) {\n      if (transceiver.kind === 'audio') {\n        numAudioTracks--;\n        if (numAudioTracks < 0) {\n          transceiver.wantReceive = false;\n        }\n      } else if (transceiver.kind === 'video') {\n        numVideoTracks--;\n        if (numVideoTracks < 0) {\n          transceiver.wantReceive = false;\n        }\n      }\n    });\n\n    // Create M-lines for recvonly streams.\n    while (numAudioTracks > 0 || numVideoTracks > 0) {\n      if (numAudioTracks > 0) {\n        pc._createTransceiver('audio');\n        numAudioTracks--;\n      }\n      if (numVideoTracks > 0) {\n        pc._createTransceiver('video');\n        numVideoTracks--;\n      }\n    }\n\n    var sdp = SDPUtils.writeSessionBoilerplate(pc._sdpSessionId,\n        pc._sdpSessionVersion++);\n    pc.transceivers.forEach(function(transceiver, sdpMLineIndex) {\n      // For each track, create an ice gatherer, ice transport,\n      // dtls transport, potentially rtpsender and rtpreceiver.\n      var track = transceiver.track;\n      var kind = transceiver.kind;\n      var mid = transceiver.mid || SDPUtils.generateIdentifier();\n      transceiver.mid = mid;\n\n      if (!transceiver.iceGatherer) {\n        transceiver.iceGatherer = pc._createIceGatherer(sdpMLineIndex,\n            pc.usingBundle);\n      }\n\n      var localCapabilities = window.RTCRtpSender.getCapabilities(kind);\n      // filter RTX until additional stuff needed for RTX is implemented\n      // in adapter.js\n      if (edgeVersion < 15019) {\n        localCapabilities.codecs = localCapabilities.codecs.filter(\n            function(codec) {\n              return codec.name !== 'rtx';\n            });\n      }\n      localCapabilities.codecs.forEach(function(codec) {\n        // work around https://bugs.chromium.org/p/webrtc/issues/detail?id=6552\n        // by adding level-asymmetry-allowed=1\n        if (codec.name === 'H264' &&\n            codec.parameters['level-asymmetry-allowed'] === undefined) {\n          codec.parameters['level-asymmetry-allowed'] = '1';\n        }\n\n        // for subsequent offers, we might have to re-use the payload\n        // type of the last offer.\n        if (transceiver.remoteCapabilities &&\n            transceiver.remoteCapabilities.codecs) {\n          transceiver.remoteCapabilities.codecs.forEach(function(remoteCodec) {\n            if (codec.name.toLowerCase() === remoteCodec.name.toLowerCase() &&\n                codec.clockRate === remoteCodec.clockRate) {\n              codec.preferredPayloadType = remoteCodec.payloadType;\n            }\n          });\n        }\n      });\n      localCapabilities.headerExtensions.forEach(function(hdrExt) {\n        var remoteExtensions = transceiver.remoteCapabilities &&\n            transceiver.remoteCapabilities.headerExtensions || [];\n        remoteExtensions.forEach(function(rHdrExt) {\n          if (hdrExt.uri === rHdrExt.uri) {\n            hdrExt.id = rHdrExt.id;\n          }\n        });\n      });\n\n      // generate an ssrc now, to be used later in rtpSender.send\n      var sendEncodingParameters = transceiver.sendEncodingParameters || [{\n        ssrc: (2 * sdpMLineIndex + 1) * 1001\n      }];\n      if (track) {\n        // add RTX\n        if (edgeVersion >= 15019 && kind === 'video' &&\n            !sendEncodingParameters[0].rtx) {\n          sendEncodingParameters[0].rtx = {\n            ssrc: sendEncodingParameters[0].ssrc + 1\n          };\n        }\n      }\n\n      if (transceiver.wantReceive) {\n        transceiver.rtpReceiver = new window.RTCRtpReceiver(\n            transceiver.dtlsTransport, kind);\n      }\n\n      transceiver.localCapabilities = localCapabilities;\n      transceiver.sendEncodingParameters = sendEncodingParameters;\n    });\n\n    // always offer BUNDLE and dispose on return if not supported.\n    if (pc._config.bundlePolicy !== 'max-compat') {\n      sdp += 'a=group:BUNDLE ' + pc.transceivers.map(function(t) {\n        return t.mid;\n      }).join(' ') + '\\r\\n';\n    }\n    sdp += 'a=ice-options:trickle\\r\\n';\n\n    pc.transceivers.forEach(function(transceiver, sdpMLineIndex) {\n      sdp += writeMediaSection(transceiver, transceiver.localCapabilities,\n          'offer', transceiver.stream, pc._dtlsRole);\n      sdp += 'a=rtcp-rsize\\r\\n';\n\n      if (transceiver.iceGatherer && pc.iceGatheringState !== 'new' &&\n          (sdpMLineIndex === 0 || !pc.usingBundle)) {\n        transceiver.iceGatherer.getLocalCandidates().forEach(function(cand) {\n          cand.component = 1;\n          sdp += 'a=' + SDPUtils.writeCandidate(cand) + '\\r\\n';\n        });\n\n        if (transceiver.iceGatherer.state === 'completed') {\n          sdp += 'a=end-of-candidates\\r\\n';\n        }\n      }\n    });\n\n    var desc = new window.RTCSessionDescription({\n      type: 'offer',\n      sdp: sdp\n    });\n    return Promise.resolve(desc);\n  };\n\n  RTCPeerConnection.prototype.createAnswer = function() {\n    var pc = this;\n\n    if (pc._isClosed) {\n      return Promise.reject(makeError('InvalidStateError',\n          'Can not call createAnswer after close'));\n    }\n\n    if (!(pc.signalingState === 'have-remote-offer' ||\n        pc.signalingState === 'have-local-pranswer')) {\n      return Promise.reject(makeError('InvalidStateError',\n          'Can not call createAnswer in signalingState ' + pc.signalingState));\n    }\n\n    var sdp = SDPUtils.writeSessionBoilerplate(pc._sdpSessionId,\n        pc._sdpSessionVersion++);\n    if (pc.usingBundle) {\n      sdp += 'a=group:BUNDLE ' + pc.transceivers.map(function(t) {\n        return t.mid;\n      }).join(' ') + '\\r\\n';\n    }\n    sdp += 'a=ice-options:trickle\\r\\n';\n\n    var mediaSectionsInOffer = SDPUtils.getMediaSections(\n        pc._remoteDescription.sdp).length;\n    pc.transceivers.forEach(function(transceiver, sdpMLineIndex) {\n      if (sdpMLineIndex + 1 > mediaSectionsInOffer) {\n        return;\n      }\n      if (transceiver.rejected) {\n        if (transceiver.kind === 'application') {\n          if (transceiver.protocol === 'DTLS/SCTP') { // legacy fmt\n            sdp += 'm=application 0 DTLS/SCTP 5000\\r\\n';\n          } else {\n            sdp += 'm=application 0 ' + transceiver.protocol +\n                ' webrtc-datachannel\\r\\n';\n          }\n        } else if (transceiver.kind === 'audio') {\n          sdp += 'm=audio 0 UDP/TLS/RTP/SAVPF 0\\r\\n' +\n              'a=rtpmap:0 PCMU/8000\\r\\n';\n        } else if (transceiver.kind === 'video') {\n          sdp += 'm=video 0 UDP/TLS/RTP/SAVPF 120\\r\\n' +\n              'a=rtpmap:120 VP8/90000\\r\\n';\n        }\n        sdp += 'c=IN IP4 0.0.0.0\\r\\n' +\n            'a=inactive\\r\\n' +\n            'a=mid:' + transceiver.mid + '\\r\\n';\n        return;\n      }\n\n      // FIXME: look at direction.\n      if (transceiver.stream) {\n        var localTrack;\n        if (transceiver.kind === 'audio') {\n          localTrack = transceiver.stream.getAudioTracks()[0];\n        } else if (transceiver.kind === 'video') {\n          localTrack = transceiver.stream.getVideoTracks()[0];\n        }\n        if (localTrack) {\n          // add RTX\n          if (edgeVersion >= 15019 && transceiver.kind === 'video' &&\n              !transceiver.sendEncodingParameters[0].rtx) {\n            transceiver.sendEncodingParameters[0].rtx = {\n              ssrc: transceiver.sendEncodingParameters[0].ssrc + 1\n            };\n          }\n        }\n      }\n\n      // Calculate intersection of capabilities.\n      var commonCapabilities = getCommonCapabilities(\n          transceiver.localCapabilities,\n          transceiver.remoteCapabilities);\n\n      var hasRtx = commonCapabilities.codecs.filter(function(c) {\n        return c.name.toLowerCase() === 'rtx';\n      }).length;\n      if (!hasRtx && transceiver.sendEncodingParameters[0].rtx) {\n        delete transceiver.sendEncodingParameters[0].rtx;\n      }\n\n      sdp += writeMediaSection(transceiver, commonCapabilities,\n          'answer', transceiver.stream, pc._dtlsRole);\n      if (transceiver.rtcpParameters &&\n          transceiver.rtcpParameters.reducedSize) {\n        sdp += 'a=rtcp-rsize\\r\\n';\n      }\n    });\n\n    var desc = new window.RTCSessionDescription({\n      type: 'answer',\n      sdp: sdp\n    });\n    return Promise.resolve(desc);\n  };\n\n  RTCPeerConnection.prototype.addIceCandidate = function(candidate) {\n    var pc = this;\n    var sections;\n    if (candidate && !(candidate.sdpMLineIndex !== undefined ||\n        candidate.sdpMid)) {\n      return Promise.reject(new TypeError('sdpMLineIndex or sdpMid required'));\n    }\n\n    // TODO: needs to go into ops queue.\n    return new Promise(function(resolve, reject) {\n      if (!pc._remoteDescription) {\n        return reject(makeError('InvalidStateError',\n            'Can not add ICE candidate without a remote description'));\n      } else if (!candidate || candidate.candidate === '') {\n        for (var j = 0; j < pc.transceivers.length; j++) {\n          if (pc.transceivers[j].rejected) {\n            continue;\n          }\n          pc.transceivers[j].iceTransport.addRemoteCandidate({});\n          sections = SDPUtils.getMediaSections(pc._remoteDescription.sdp);\n          sections[j] += 'a=end-of-candidates\\r\\n';\n          pc._remoteDescription.sdp =\n              SDPUtils.getDescription(pc._remoteDescription.sdp) +\n              sections.join('');\n          if (pc.usingBundle) {\n            break;\n          }\n        }\n      } else {\n        var sdpMLineIndex = candidate.sdpMLineIndex;\n        if (candidate.sdpMid) {\n          for (var i = 0; i < pc.transceivers.length; i++) {\n            if (pc.transceivers[i].mid === candidate.sdpMid) {\n              sdpMLineIndex = i;\n              break;\n            }\n          }\n        }\n        var transceiver = pc.transceivers[sdpMLineIndex];\n        if (transceiver) {\n          if (transceiver.rejected) {\n            return resolve();\n          }\n          var cand = Object.keys(candidate.candidate).length > 0 ?\n              SDPUtils.parseCandidate(candidate.candidate) : {};\n          // Ignore Chrome's invalid candidates since Edge does not like them.\n          if (cand.protocol === 'tcp' && (cand.port === 0 || cand.port === 9)) {\n            return resolve();\n          }\n          // Ignore RTCP candidates, we assume RTCP-MUX.\n          if (cand.component && cand.component !== 1) {\n            return resolve();\n          }\n          // when using bundle, avoid adding candidates to the wrong\n          // ice transport. And avoid adding candidates added in the SDP.\n          if (sdpMLineIndex === 0 || (sdpMLineIndex > 0 &&\n              transceiver.iceTransport !== pc.transceivers[0].iceTransport)) {\n            if (!maybeAddCandidate(transceiver.iceTransport, cand)) {\n              return reject(makeError('OperationError',\n                  'Can not add ICE candidate'));\n            }\n          }\n\n          // update the remoteDescription.\n          var candidateString = candidate.candidate.trim();\n          if (candidateString.indexOf('a=') === 0) {\n            candidateString = candidateString.substr(2);\n          }\n          sections = SDPUtils.getMediaSections(pc._remoteDescription.sdp);\n          sections[sdpMLineIndex] += 'a=' +\n              (cand.type ? candidateString : 'end-of-candidates')\n              + '\\r\\n';\n          pc._remoteDescription.sdp =\n              SDPUtils.getDescription(pc._remoteDescription.sdp) +\n              sections.join('');\n        } else {\n          return reject(makeError('OperationError',\n              'Can not add ICE candidate'));\n        }\n      }\n      resolve();\n    });\n  };\n\n  RTCPeerConnection.prototype.getStats = function(selector) {\n    if (selector && selector instanceof window.MediaStreamTrack) {\n      var senderOrReceiver = null;\n      this.transceivers.forEach(function(transceiver) {\n        if (transceiver.rtpSender &&\n            transceiver.rtpSender.track === selector) {\n          senderOrReceiver = transceiver.rtpSender;\n        } else if (transceiver.rtpReceiver &&\n            transceiver.rtpReceiver.track === selector) {\n          senderOrReceiver = transceiver.rtpReceiver;\n        }\n      });\n      if (!senderOrReceiver) {\n        throw makeError('InvalidAccessError', 'Invalid selector.');\n      }\n      return senderOrReceiver.getStats();\n    }\n\n    var promises = [];\n    this.transceivers.forEach(function(transceiver) {\n      ['rtpSender', 'rtpReceiver', 'iceGatherer', 'iceTransport',\n          'dtlsTransport'].forEach(function(method) {\n            if (transceiver[method]) {\n              promises.push(transceiver[method].getStats());\n            }\n          });\n    });\n    return Promise.all(promises).then(function(allStats) {\n      var results = new Map();\n      allStats.forEach(function(stats) {\n        stats.forEach(function(stat) {\n          results.set(stat.id, stat);\n        });\n      });\n      return results;\n    });\n  };\n\n  // fix low-level stat names and return Map instead of object.\n  var ortcObjects = ['RTCRtpSender', 'RTCRtpReceiver', 'RTCIceGatherer',\n    'RTCIceTransport', 'RTCDtlsTransport'];\n  ortcObjects.forEach(function(ortcObjectName) {\n    var obj = window[ortcObjectName];\n    if (obj && obj.prototype && obj.prototype.getStats) {\n      var nativeGetstats = obj.prototype.getStats;\n      obj.prototype.getStats = function() {\n        return nativeGetstats.apply(this)\n        .then(function(nativeStats) {\n          var mapStats = new Map();\n          Object.keys(nativeStats).forEach(function(id) {\n            nativeStats[id].type = fixStatsType(nativeStats[id]);\n            mapStats.set(id, nativeStats[id]);\n          });\n          return mapStats;\n        });\n      };\n    }\n  });\n\n  // legacy callback shims. Should be moved to adapter.js some days.\n  var methods = ['createOffer', 'createAnswer'];\n  methods.forEach(function(method) {\n    var nativeMethod = RTCPeerConnection.prototype[method];\n    RTCPeerConnection.prototype[method] = function() {\n      var args = arguments;\n      if (typeof args[0] === 'function' ||\n          typeof args[1] === 'function') { // legacy\n        return nativeMethod.apply(this, [arguments[2]])\n        .then(function(description) {\n          if (typeof args[0] === 'function') {\n            args[0].apply(null, [description]);\n          }\n        }, function(error) {\n          if (typeof args[1] === 'function') {\n            args[1].apply(null, [error]);\n          }\n        });\n      }\n      return nativeMethod.apply(this, arguments);\n    };\n  });\n\n  methods = ['setLocalDescription', 'setRemoteDescription', 'addIceCandidate'];\n  methods.forEach(function(method) {\n    var nativeMethod = RTCPeerConnection.prototype[method];\n    RTCPeerConnection.prototype[method] = function() {\n      var args = arguments;\n      if (typeof args[1] === 'function' ||\n          typeof args[2] === 'function') { // legacy\n        return nativeMethod.apply(this, arguments)\n        .then(function() {\n          if (typeof args[1] === 'function') {\n            args[1].apply(null);\n          }\n        }, function(error) {\n          if (typeof args[2] === 'function') {\n            args[2].apply(null, [error]);\n          }\n        });\n      }\n      return nativeMethod.apply(this, arguments);\n    };\n  });\n\n  // getStats is special. It doesn't have a spec legacy method yet we support\n  // getStats(something, cb) without error callbacks.\n  ['getStats'].forEach(function(method) {\n    var nativeMethod = RTCPeerConnection.prototype[method];\n    RTCPeerConnection.prototype[method] = function() {\n      var args = arguments;\n      if (typeof args[1] === 'function') {\n        return nativeMethod.apply(this, arguments)\n        .then(function() {\n          if (typeof args[1] === 'function') {\n            args[1].apply(null);\n          }\n        });\n      }\n      return nativeMethod.apply(this, arguments);\n    };\n  });\n\n  return RTCPeerConnection;\n};\n","/* eslint-env node */\n'use strict';\n\n// SDP helpers.\nvar SDPUtils = {};\n\n// Generate an alphanumeric identifier for cname or mids.\n// TODO: use UUIDs instead? https://gist.github.com/jed/982883\nSDPUtils.generateIdentifier = function() {\n  return Math.random().toString(36).substr(2, 10);\n};\n\n// The RTCP CNAME used by all peerconnections from the same JS.\nSDPUtils.localCName = SDPUtils.generateIdentifier();\n\n// Splits SDP into lines, dealing with both CRLF and LF.\nSDPUtils.splitLines = function(blob) {\n  return blob.trim().split('\\n').map(function(line) {\n    return line.trim();\n  });\n};\n// Splits SDP into sessionpart and mediasections. Ensures CRLF.\nSDPUtils.splitSections = function(blob) {\n  var parts = blob.split('\\nm=');\n  return parts.map(function(part, index) {\n    return (index > 0 ? 'm=' + part : part).trim() + '\\r\\n';\n  });\n};\n\n// returns the session description.\nSDPUtils.getDescription = function(blob) {\n  var sections = SDPUtils.splitSections(blob);\n  return sections && sections[0];\n};\n\n// returns the individual media sections.\nSDPUtils.getMediaSections = function(blob) {\n  var sections = SDPUtils.splitSections(blob);\n  sections.shift();\n  return sections;\n};\n\n// Returns lines that start with a certain prefix.\nSDPUtils.matchPrefix = function(blob, prefix) {\n  return SDPUtils.splitLines(blob).filter(function(line) {\n    return line.indexOf(prefix) === 0;\n  });\n};\n\n// Parses an ICE candidate line. Sample input:\n// candidate:702786350 2 udp 41819902 8.8.8.8 60769 typ relay raddr 8.8.8.8\n// rport 55996\"\nSDPUtils.parseCandidate = function(line) {\n  var parts;\n  // Parse both variants.\n  if (line.indexOf('a=candidate:') === 0) {\n    parts = line.substring(12).split(' ');\n  } else {\n    parts = line.substring(10).split(' ');\n  }\n\n  var candidate = {\n    foundation: parts[0],\n    component: parseInt(parts[1], 10),\n    protocol: parts[2].toLowerCase(),\n    priority: parseInt(parts[3], 10),\n    ip: parts[4],\n    address: parts[4], // address is an alias for ip.\n    port: parseInt(parts[5], 10),\n    // skip parts[6] == 'typ'\n    type: parts[7]\n  };\n\n  for (var i = 8; i < parts.length; i += 2) {\n    switch (parts[i]) {\n      case 'raddr':\n        candidate.relatedAddress = parts[i + 1];\n        break;\n      case 'rport':\n        candidate.relatedPort = parseInt(parts[i + 1], 10);\n        break;\n      case 'tcptype':\n        candidate.tcpType = parts[i + 1];\n        break;\n      case 'ufrag':\n        candidate.ufrag = parts[i + 1]; // for backward compability.\n        candidate.usernameFragment = parts[i + 1];\n        break;\n      default: // extension handling, in particular ufrag\n        candidate[parts[i]] = parts[i + 1];\n        break;\n    }\n  }\n  return candidate;\n};\n\n// Translates a candidate object into SDP candidate attribute.\nSDPUtils.writeCandidate = function(candidate) {\n  var sdp = [];\n  sdp.push(candidate.foundation);\n  sdp.push(candidate.component);\n  sdp.push(candidate.protocol.toUpperCase());\n  sdp.push(candidate.priority);\n  sdp.push(candidate.address || candidate.ip);\n  sdp.push(candidate.port);\n\n  var type = candidate.type;\n  sdp.push('typ');\n  sdp.push(type);\n  if (type !== 'host' && candidate.relatedAddress &&\n      candidate.relatedPort) {\n    sdp.push('raddr');\n    sdp.push(candidate.relatedAddress);\n    sdp.push('rport');\n    sdp.push(candidate.relatedPort);\n  }\n  if (candidate.tcpType && candidate.protocol.toLowerCase() === 'tcp') {\n    sdp.push('tcptype');\n    sdp.push(candidate.tcpType);\n  }\n  if (candidate.usernameFragment || candidate.ufrag) {\n    sdp.push('ufrag');\n    sdp.push(candidate.usernameFragment || candidate.ufrag);\n  }\n  return 'candidate:' + sdp.join(' ');\n};\n\n// Parses an ice-options line, returns an array of option tags.\n// a=ice-options:foo bar\nSDPUtils.parseIceOptions = function(line) {\n  return line.substr(14).split(' ');\n};\n\n// Parses an rtpmap line, returns RTCRtpCoddecParameters. Sample input:\n// a=rtpmap:111 opus/48000/2\nSDPUtils.parseRtpMap = function(line) {\n  var parts = line.substr(9).split(' ');\n  var parsed = {\n    payloadType: parseInt(parts.shift(), 10) // was: id\n  };\n\n  parts = parts[0].split('/');\n\n  parsed.name = parts[0];\n  parsed.clockRate = parseInt(parts[1], 10); // was: clockrate\n  parsed.channels = parts.length === 3 ? parseInt(parts[2], 10) : 1;\n  // legacy alias, got renamed back to channels in ORTC.\n  parsed.numChannels = parsed.channels;\n  return parsed;\n};\n\n// Generate an a=rtpmap line from RTCRtpCodecCapability or\n// RTCRtpCodecParameters.\nSDPUtils.writeRtpMap = function(codec) {\n  var pt = codec.payloadType;\n  if (codec.preferredPayloadType !== undefined) {\n    pt = codec.preferredPayloadType;\n  }\n  var channels = codec.channels || codec.numChannels || 1;\n  return 'a=rtpmap:' + pt + ' ' + codec.name + '/' + codec.clockRate +\n      (channels !== 1 ? '/' + channels : '') + '\\r\\n';\n};\n\n// Parses an a=extmap line (headerextension from RFC 5285). Sample input:\n// a=extmap:2 urn:ietf:params:rtp-hdrext:toffset\n// a=extmap:2/sendonly urn:ietf:params:rtp-hdrext:toffset\nSDPUtils.parseExtmap = function(line) {\n  var parts = line.substr(9).split(' ');\n  return {\n    id: parseInt(parts[0], 10),\n    direction: parts[0].indexOf('/') > 0 ? parts[0].split('/')[1] : 'sendrecv',\n    uri: parts[1]\n  };\n};\n\n// Generates a=extmap line from RTCRtpHeaderExtensionParameters or\n// RTCRtpHeaderExtension.\nSDPUtils.writeExtmap = function(headerExtension) {\n  return 'a=extmap:' + (headerExtension.id || headerExtension.preferredId) +\n      (headerExtension.direction && headerExtension.direction !== 'sendrecv'\n        ? '/' + headerExtension.direction\n        : '') +\n      ' ' + headerExtension.uri + '\\r\\n';\n};\n\n// Parses an ftmp line, returns dictionary. Sample input:\n// a=fmtp:96 vbr=on;cng=on\n// Also deals with vbr=on; cng=on\nSDPUtils.parseFmtp = function(line) {\n  var parsed = {};\n  var kv;\n  var parts = line.substr(line.indexOf(' ') + 1).split(';');\n  for (var j = 0; j < parts.length; j++) {\n    kv = parts[j].trim().split('=');\n    parsed[kv[0].trim()] = kv[1];\n  }\n  return parsed;\n};\n\n// Generates an a=ftmp line from RTCRtpCodecCapability or RTCRtpCodecParameters.\nSDPUtils.writeFmtp = function(codec) {\n  var line = '';\n  var pt = codec.payloadType;\n  if (codec.preferredPayloadType !== undefined) {\n    pt = codec.preferredPayloadType;\n  }\n  if (codec.parameters && Object.keys(codec.parameters).length) {\n    var params = [];\n    Object.keys(codec.parameters).forEach(function(param) {\n      if (codec.parameters[param]) {\n        params.push(param + '=' + codec.parameters[param]);\n      } else {\n        params.push(param);\n      }\n    });\n    line += 'a=fmtp:' + pt + ' ' + params.join(';') + '\\r\\n';\n  }\n  return line;\n};\n\n// Parses an rtcp-fb line, returns RTCPRtcpFeedback object. Sample input:\n// a=rtcp-fb:98 nack rpsi\nSDPUtils.parseRtcpFb = function(line) {\n  var parts = line.substr(line.indexOf(' ') + 1).split(' ');\n  return {\n    type: parts.shift(),\n    parameter: parts.join(' ')\n  };\n};\n// Generate a=rtcp-fb lines from RTCRtpCodecCapability or RTCRtpCodecParameters.\nSDPUtils.writeRtcpFb = function(codec) {\n  var lines = '';\n  var pt = codec.payloadType;\n  if (codec.preferredPayloadType !== undefined) {\n    pt = codec.preferredPayloadType;\n  }\n  if (codec.rtcpFeedback && codec.rtcpFeedback.length) {\n    // FIXME: special handling for trr-int?\n    codec.rtcpFeedback.forEach(function(fb) {\n      lines += 'a=rtcp-fb:' + pt + ' ' + fb.type +\n      (fb.parameter && fb.parameter.length ? ' ' + fb.parameter : '') +\n          '\\r\\n';\n    });\n  }\n  return lines;\n};\n\n// Parses an RFC 5576 ssrc media attribute. Sample input:\n// a=ssrc:3735928559 cname:something\nSDPUtils.parseSsrcMedia = function(line) {\n  var sp = line.indexOf(' ');\n  var parts = {\n    ssrc: parseInt(line.substr(7, sp - 7), 10)\n  };\n  var colon = line.indexOf(':', sp);\n  if (colon > -1) {\n    parts.attribute = line.substr(sp + 1, colon - sp - 1);\n    parts.value = line.substr(colon + 1);\n  } else {\n    parts.attribute = line.substr(sp + 1);\n  }\n  return parts;\n};\n\nSDPUtils.parseSsrcGroup = function(line) {\n  var parts = line.substr(13).split(' ');\n  return {\n    semantics: parts.shift(),\n    ssrcs: parts.map(function(ssrc) {\n      return parseInt(ssrc, 10);\n    })\n  };\n};\n\n// Extracts the MID (RFC 5888) from a media section.\n// returns the MID or undefined if no mid line was found.\nSDPUtils.getMid = function(mediaSection) {\n  var mid = SDPUtils.matchPrefix(mediaSection, 'a=mid:')[0];\n  if (mid) {\n    return mid.substr(6);\n  }\n};\n\nSDPUtils.parseFingerprint = function(line) {\n  var parts = line.substr(14).split(' ');\n  return {\n    algorithm: parts[0].toLowerCase(), // algorithm is case-sensitive in Edge.\n    value: parts[1]\n  };\n};\n\n// Extracts DTLS parameters from SDP media section or sessionpart.\n// FIXME: for consistency with other functions this should only\n//   get the fingerprint line as input. See also getIceParameters.\nSDPUtils.getDtlsParameters = function(mediaSection, sessionpart) {\n  var lines = SDPUtils.matchPrefix(mediaSection + sessionpart,\n    'a=fingerprint:');\n  // Note: a=setup line is ignored since we use the 'auto' role.\n  // Note2: 'algorithm' is not case sensitive except in Edge.\n  return {\n    role: 'auto',\n    fingerprints: lines.map(SDPUtils.parseFingerprint)\n  };\n};\n\n// Serializes DTLS parameters to SDP.\nSDPUtils.writeDtlsParameters = function(params, setupType) {\n  var sdp = 'a=setup:' + setupType + '\\r\\n';\n  params.fingerprints.forEach(function(fp) {\n    sdp += 'a=fingerprint:' + fp.algorithm + ' ' + fp.value + '\\r\\n';\n  });\n  return sdp;\n};\n\n// Parses a=crypto lines into\n//   https://rawgit.com/aboba/edgertc/master/msortc-rs4.html#dictionary-rtcsrtpsdesparameters-members\nSDPUtils.parseCryptoLine = function(line) {\n  var parts = line.substr(9).split(' ');\n  return {\n    tag: parseInt(parts[0], 10),\n    cryptoSuite: parts[1],\n    keyParams: parts[2],\n    sessionParams: parts.slice(3),\n  };\n};\n\nSDPUtils.writeCryptoLine = function(parameters) {\n  return 'a=crypto:' + parameters.tag + ' ' +\n    parameters.cryptoSuite + ' ' +\n    (typeof parameters.keyParams === 'object'\n      ? SDPUtils.writeCryptoKeyParams(parameters.keyParams)\n      : parameters.keyParams) +\n    (parameters.sessionParams ? ' ' + parameters.sessionParams.join(' ') : '') +\n    '\\r\\n';\n};\n\n// Parses the crypto key parameters into\n//   https://rawgit.com/aboba/edgertc/master/msortc-rs4.html#rtcsrtpkeyparam*\nSDPUtils.parseCryptoKeyParams = function(keyParams) {\n  if (keyParams.indexOf('inline:') !== 0) {\n    return null;\n  }\n  var parts = keyParams.substr(7).split('|');\n  return {\n    keyMethod: 'inline',\n    keySalt: parts[0],\n    lifeTime: parts[1],\n    mkiValue: parts[2] ? parts[2].split(':')[0] : undefined,\n    mkiLength: parts[2] ? parts[2].split(':')[1] : undefined,\n  };\n};\n\nSDPUtils.writeCryptoKeyParams = function(keyParams) {\n  return keyParams.keyMethod + ':'\n    + keyParams.keySalt +\n    (keyParams.lifeTime ? '|' + keyParams.lifeTime : '') +\n    (keyParams.mkiValue && keyParams.mkiLength\n      ? '|' + keyParams.mkiValue + ':' + keyParams.mkiLength\n      : '');\n};\n\n// Extracts all SDES paramters.\nSDPUtils.getCryptoParameters = function(mediaSection, sessionpart) {\n  var lines = SDPUtils.matchPrefix(mediaSection + sessionpart,\n    'a=crypto:');\n  return lines.map(SDPUtils.parseCryptoLine);\n};\n\n// Parses ICE information from SDP media section or sessionpart.\n// FIXME: for consistency with other functions this should only\n//   get the ice-ufrag and ice-pwd lines as input.\nSDPUtils.getIceParameters = function(mediaSection, sessionpart) {\n  var ufrag = SDPUtils.matchPrefix(mediaSection + sessionpart,\n    'a=ice-ufrag:')[0];\n  var pwd = SDPUtils.matchPrefix(mediaSection + sessionpart,\n    'a=ice-pwd:')[0];\n  if (!(ufrag && pwd)) {\n    return null;\n  }\n  return {\n    usernameFragment: ufrag.substr(12),\n    password: pwd.substr(10),\n  };\n};\n\n// Serializes ICE parameters to SDP.\nSDPUtils.writeIceParameters = function(params) {\n  return 'a=ice-ufrag:' + params.usernameFragment + '\\r\\n' +\n      'a=ice-pwd:' + params.password + '\\r\\n';\n};\n\n// Parses the SDP media section and returns RTCRtpParameters.\nSDPUtils.parseRtpParameters = function(mediaSection) {\n  var description = {\n    codecs: [],\n    headerExtensions: [],\n    fecMechanisms: [],\n    rtcp: []\n  };\n  var lines = SDPUtils.splitLines(mediaSection);\n  var mline = lines[0].split(' ');\n  for (var i = 3; i < mline.length; i++) { // find all codecs from mline[3..]\n    var pt = mline[i];\n    var rtpmapline = SDPUtils.matchPrefix(\n      mediaSection, 'a=rtpmap:' + pt + ' ')[0];\n    if (rtpmapline) {\n      var codec = SDPUtils.parseRtpMap(rtpmapline);\n      var fmtps = SDPUtils.matchPrefix(\n        mediaSection, 'a=fmtp:' + pt + ' ');\n      // Only the first a=fmtp:<pt> is considered.\n      codec.parameters = fmtps.length ? SDPUtils.parseFmtp(fmtps[0]) : {};\n      codec.rtcpFeedback = SDPUtils.matchPrefix(\n        mediaSection, 'a=rtcp-fb:' + pt + ' ')\n        .map(SDPUtils.parseRtcpFb);\n      description.codecs.push(codec);\n      // parse FEC mechanisms from rtpmap lines.\n      switch (codec.name.toUpperCase()) {\n        case 'RED':\n        case 'ULPFEC':\n          description.fecMechanisms.push(codec.name.toUpperCase());\n          break;\n        default: // only RED and ULPFEC are recognized as FEC mechanisms.\n          break;\n      }\n    }\n  }\n  SDPUtils.matchPrefix(mediaSection, 'a=extmap:').forEach(function(line) {\n    description.headerExtensions.push(SDPUtils.parseExtmap(line));\n  });\n  // FIXME: parse rtcp.\n  return description;\n};\n\n// Generates parts of the SDP media section describing the capabilities /\n// parameters.\nSDPUtils.writeRtpDescription = function(kind, caps) {\n  var sdp = '';\n\n  // Build the mline.\n  sdp += 'm=' + kind + ' ';\n  sdp += caps.codecs.length > 0 ? '9' : '0'; // reject if no codecs.\n  sdp += ' UDP/TLS/RTP/SAVPF ';\n  sdp += caps.codecs.map(function(codec) {\n    if (codec.preferredPayloadType !== undefined) {\n      return codec.preferredPayloadType;\n    }\n    return codec.payloadType;\n  }).join(' ') + '\\r\\n';\n\n  sdp += 'c=IN IP4 0.0.0.0\\r\\n';\n  sdp += 'a=rtcp:9 IN IP4 0.0.0.0\\r\\n';\n\n  // Add a=rtpmap lines for each codec. Also fmtp and rtcp-fb.\n  caps.codecs.forEach(function(codec) {\n    sdp += SDPUtils.writeRtpMap(codec);\n    sdp += SDPUtils.writeFmtp(codec);\n    sdp += SDPUtils.writeRtcpFb(codec);\n  });\n  var maxptime = 0;\n  caps.codecs.forEach(function(codec) {\n    if (codec.maxptime > maxptime) {\n      maxptime = codec.maxptime;\n    }\n  });\n  if (maxptime > 0) {\n    sdp += 'a=maxptime:' + maxptime + '\\r\\n';\n  }\n  sdp += 'a=rtcp-mux\\r\\n';\n\n  if (caps.headerExtensions) {\n    caps.headerExtensions.forEach(function(extension) {\n      sdp += SDPUtils.writeExtmap(extension);\n    });\n  }\n  // FIXME: write fecMechanisms.\n  return sdp;\n};\n\n// Parses the SDP media section and returns an array of\n// RTCRtpEncodingParameters.\nSDPUtils.parseRtpEncodingParameters = function(mediaSection) {\n  var encodingParameters = [];\n  var description = SDPUtils.parseRtpParameters(mediaSection);\n  var hasRed = description.fecMechanisms.indexOf('RED') !== -1;\n  var hasUlpfec = description.fecMechanisms.indexOf('ULPFEC') !== -1;\n\n  // filter a=ssrc:... cname:, ignore PlanB-msid\n  var ssrcs = SDPUtils.matchPrefix(mediaSection, 'a=ssrc:')\n    .map(function(line) {\n      return SDPUtils.parseSsrcMedia(line);\n    })\n    .filter(function(parts) {\n      return parts.attribute === 'cname';\n    });\n  var primarySsrc = ssrcs.length > 0 && ssrcs[0].ssrc;\n  var secondarySsrc;\n\n  var flows = SDPUtils.matchPrefix(mediaSection, 'a=ssrc-group:FID')\n    .map(function(line) {\n      var parts = line.substr(17).split(' ');\n      return parts.map(function(part) {\n        return parseInt(part, 10);\n      });\n    });\n  if (flows.length > 0 && flows[0].length > 1 && flows[0][0] === primarySsrc) {\n    secondarySsrc = flows[0][1];\n  }\n\n  description.codecs.forEach(function(codec) {\n    if (codec.name.toUpperCase() === 'RTX' && codec.parameters.apt) {\n      var encParam = {\n        ssrc: primarySsrc,\n        codecPayloadType: parseInt(codec.parameters.apt, 10)\n      };\n      if (primarySsrc && secondarySsrc) {\n        encParam.rtx = {ssrc: secondarySsrc};\n      }\n      encodingParameters.push(encParam);\n      if (hasRed) {\n        encParam = JSON.parse(JSON.stringify(encParam));\n        encParam.fec = {\n          ssrc: primarySsrc,\n          mechanism: hasUlpfec ? 'red+ulpfec' : 'red'\n        };\n        encodingParameters.push(encParam);\n      }\n    }\n  });\n  if (encodingParameters.length === 0 && primarySsrc) {\n    encodingParameters.push({\n      ssrc: primarySsrc\n    });\n  }\n\n  // we support both b=AS and b=TIAS but interpret AS as TIAS.\n  var bandwidth = SDPUtils.matchPrefix(mediaSection, 'b=');\n  if (bandwidth.length) {\n    if (bandwidth[0].indexOf('b=TIAS:') === 0) {\n      bandwidth = parseInt(bandwidth[0].substr(7), 10);\n    } else if (bandwidth[0].indexOf('b=AS:') === 0) {\n      // use formula from JSEP to convert b=AS to TIAS value.\n      bandwidth = parseInt(bandwidth[0].substr(5), 10) * 1000 * 0.95\n          - (50 * 40 * 8);\n    } else {\n      bandwidth = undefined;\n    }\n    encodingParameters.forEach(function(params) {\n      params.maxBitrate = bandwidth;\n    });\n  }\n  return encodingParameters;\n};\n\n// parses http://draft.ortc.org/#rtcrtcpparameters*\nSDPUtils.parseRtcpParameters = function(mediaSection) {\n  var rtcpParameters = {};\n\n  // Gets the first SSRC. Note tha with RTX there might be multiple\n  // SSRCs.\n  var remoteSsrc = SDPUtils.matchPrefix(mediaSection, 'a=ssrc:')\n    .map(function(line) {\n      return SDPUtils.parseSsrcMedia(line);\n    })\n    .filter(function(obj) {\n      return obj.attribute === 'cname';\n    })[0];\n  if (remoteSsrc) {\n    rtcpParameters.cname = remoteSsrc.value;\n    rtcpParameters.ssrc = remoteSsrc.ssrc;\n  }\n\n  // Edge uses the compound attribute instead of reducedSize\n  // compound is !reducedSize\n  var rsize = SDPUtils.matchPrefix(mediaSection, 'a=rtcp-rsize');\n  rtcpParameters.reducedSize = rsize.length > 0;\n  rtcpParameters.compound = rsize.length === 0;\n\n  // parses the rtcp-mux attrіbute.\n  // Note that Edge does not support unmuxed RTCP.\n  var mux = SDPUtils.matchPrefix(mediaSection, 'a=rtcp-mux');\n  rtcpParameters.mux = mux.length > 0;\n\n  return rtcpParameters;\n};\n\n// parses either a=msid: or a=ssrc:... msid lines and returns\n// the id of the MediaStream and MediaStreamTrack.\nSDPUtils.parseMsid = function(mediaSection) {\n  var parts;\n  var spec = SDPUtils.matchPrefix(mediaSection, 'a=msid:');\n  if (spec.length === 1) {\n    parts = spec[0].substr(7).split(' ');\n    return {stream: parts[0], track: parts[1]};\n  }\n  var planB = SDPUtils.matchPrefix(mediaSection, 'a=ssrc:')\n    .map(function(line) {\n      return SDPUtils.parseSsrcMedia(line);\n    })\n    .filter(function(msidParts) {\n      return msidParts.attribute === 'msid';\n    });\n  if (planB.length > 0) {\n    parts = planB[0].value.split(' ');\n    return {stream: parts[0], track: parts[1]};\n  }\n};\n\n// SCTP\n// parses draft-ietf-mmusic-sctp-sdp-26 first and falls back\n// to draft-ietf-mmusic-sctp-sdp-05\nSDPUtils.parseSctpDescription = function(mediaSection) {\n  var mline = SDPUtils.parseMLine(mediaSection);\n  var maxSizeLine = SDPUtils.matchPrefix(mediaSection, 'a=max-message-size:');\n  var maxMessageSize;\n  if (maxSizeLine.length > 0) {\n    maxMessageSize = parseInt(maxSizeLine[0].substr(19), 10);\n  }\n  if (isNaN(maxMessageSize)) {\n    maxMessageSize = 65536;\n  }\n  var sctpPort = SDPUtils.matchPrefix(mediaSection, 'a=sctp-port:');\n  if (sctpPort.length > 0) {\n    return {\n      port: parseInt(sctpPort[0].substr(12), 10),\n      protocol: mline.fmt,\n      maxMessageSize: maxMessageSize\n    };\n  }\n  var sctpMapLines = SDPUtils.matchPrefix(mediaSection, 'a=sctpmap:');\n  if (sctpMapLines.length > 0) {\n    var parts = SDPUtils.matchPrefix(mediaSection, 'a=sctpmap:')[0]\n      .substr(10)\n      .split(' ');\n    return {\n      port: parseInt(parts[0], 10),\n      protocol: parts[1],\n      maxMessageSize: maxMessageSize\n    };\n  }\n};\n\n// SCTP\n// outputs the draft-ietf-mmusic-sctp-sdp-26 version that all browsers\n// support by now receiving in this format, unless we originally parsed\n// as the draft-ietf-mmusic-sctp-sdp-05 format (indicated by the m-line\n// protocol of DTLS/SCTP -- without UDP/ or TCP/)\nSDPUtils.writeSctpDescription = function(media, sctp) {\n  var output = [];\n  if (media.protocol !== 'DTLS/SCTP') {\n    output = [\n      'm=' + media.kind + ' 9 ' + media.protocol + ' ' + sctp.protocol + '\\r\\n',\n      'c=IN IP4 0.0.0.0\\r\\n',\n      'a=sctp-port:' + sctp.port + '\\r\\n'\n    ];\n  } else {\n    output = [\n      'm=' + media.kind + ' 9 ' + media.protocol + ' ' + sctp.port + '\\r\\n',\n      'c=IN IP4 0.0.0.0\\r\\n',\n      'a=sctpmap:' + sctp.port + ' ' + sctp.protocol + ' 65535\\r\\n'\n    ];\n  }\n  if (sctp.maxMessageSize !== undefined) {\n    output.push('a=max-message-size:' + sctp.maxMessageSize + '\\r\\n');\n  }\n  return output.join('');\n};\n\n// Generate a session ID for SDP.\n// https://tools.ietf.org/html/draft-ietf-rtcweb-jsep-20#section-5.2.1\n// recommends using a cryptographically random +ve 64-bit value\n// but right now this should be acceptable and within the right range\nSDPUtils.generateSessionId = function() {\n  return Math.random().toString().substr(2, 21);\n};\n\n// Write boilder plate for start of SDP\n// sessId argument is optional - if not supplied it will\n// be generated randomly\n// sessVersion is optional and defaults to 2\n// sessUser is optional and defaults to 'thisisadapterortc'\nSDPUtils.writeSessionBoilerplate = function(sessId, sessVer, sessUser) {\n  var sessionId;\n  var version = sessVer !== undefined ? sessVer : 2;\n  if (sessId) {\n    sessionId = sessId;\n  } else {\n    sessionId = SDPUtils.generateSessionId();\n  }\n  var user = sessUser || 'thisisadapterortc';\n  // FIXME: sess-id should be an NTP timestamp.\n  return 'v=0\\r\\n' +\n      'o=' + user + ' ' + sessionId + ' ' + version +\n        ' IN IP4 127.0.0.1\\r\\n' +\n      's=-\\r\\n' +\n      't=0 0\\r\\n';\n};\n\nSDPUtils.writeMediaSection = function(transceiver, caps, type, stream) {\n  var sdp = SDPUtils.writeRtpDescription(transceiver.kind, caps);\n\n  // Map ICE parameters (ufrag, pwd) to SDP.\n  sdp += SDPUtils.writeIceParameters(\n    transceiver.iceGatherer.getLocalParameters());\n\n  // Map DTLS parameters to SDP.\n  sdp += SDPUtils.writeDtlsParameters(\n    transceiver.dtlsTransport.getLocalParameters(),\n    type === 'offer' ? 'actpass' : 'active');\n\n  sdp += 'a=mid:' + transceiver.mid + '\\r\\n';\n\n  if (transceiver.direction) {\n    sdp += 'a=' + transceiver.direction + '\\r\\n';\n  } else if (transceiver.rtpSender && transceiver.rtpReceiver) {\n    sdp += 'a=sendrecv\\r\\n';\n  } else if (transceiver.rtpSender) {\n    sdp += 'a=sendonly\\r\\n';\n  } else if (transceiver.rtpReceiver) {\n    sdp += 'a=recvonly\\r\\n';\n  } else {\n    sdp += 'a=inactive\\r\\n';\n  }\n\n  if (transceiver.rtpSender) {\n    // spec.\n    var msid = 'msid:' + stream.id + ' ' +\n        transceiver.rtpSender.track.id + '\\r\\n';\n    sdp += 'a=' + msid;\n\n    // for Chrome.\n    sdp += 'a=ssrc:' + transceiver.sendEncodingParameters[0].ssrc +\n        ' ' + msid;\n    if (transceiver.sendEncodingParameters[0].rtx) {\n      sdp += 'a=ssrc:' + transceiver.sendEncodingParameters[0].rtx.ssrc +\n          ' ' + msid;\n      sdp += 'a=ssrc-group:FID ' +\n          transceiver.sendEncodingParameters[0].ssrc + ' ' +\n          transceiver.sendEncodingParameters[0].rtx.ssrc +\n          '\\r\\n';\n    }\n  }\n  // FIXME: this should be written by writeRtpDescription.\n  sdp += 'a=ssrc:' + transceiver.sendEncodingParameters[0].ssrc +\n      ' cname:' + SDPUtils.localCName + '\\r\\n';\n  if (transceiver.rtpSender && transceiver.sendEncodingParameters[0].rtx) {\n    sdp += 'a=ssrc:' + transceiver.sendEncodingParameters[0].rtx.ssrc +\n        ' cname:' + SDPUtils.localCName + '\\r\\n';\n  }\n  return sdp;\n};\n\n// Gets the direction from the mediaSection or the sessionpart.\nSDPUtils.getDirection = function(mediaSection, sessionpart) {\n  // Look for sendrecv, sendonly, recvonly, inactive, default to sendrecv.\n  var lines = SDPUtils.splitLines(mediaSection);\n  for (var i = 0; i < lines.length; i++) {\n    switch (lines[i]) {\n      case 'a=sendrecv':\n      case 'a=sendonly':\n      case 'a=recvonly':\n      case 'a=inactive':\n        return lines[i].substr(2);\n      default:\n        // FIXME: What should happen here?\n    }\n  }\n  if (sessionpart) {\n    return SDPUtils.getDirection(sessionpart);\n  }\n  return 'sendrecv';\n};\n\nSDPUtils.getKind = function(mediaSection) {\n  var lines = SDPUtils.splitLines(mediaSection);\n  var mline = lines[0].split(' ');\n  return mline[0].substr(2);\n};\n\nSDPUtils.isRejected = function(mediaSection) {\n  return mediaSection.split(' ', 2)[1] === '0';\n};\n\nSDPUtils.parseMLine = function(mediaSection) {\n  var lines = SDPUtils.splitLines(mediaSection);\n  var parts = lines[0].substr(2).split(' ');\n  return {\n    kind: parts[0],\n    port: parseInt(parts[1], 10),\n    protocol: parts[2],\n    fmt: parts.slice(3).join(' ')\n  };\n};\n\nSDPUtils.parseOLine = function(mediaSection) {\n  var line = SDPUtils.matchPrefix(mediaSection, 'o=')[0];\n  var parts = line.substr(2).split(' ');\n  return {\n    username: parts[0],\n    sessionId: parts[1],\n    sessionVersion: parseInt(parts[2], 10),\n    netType: parts[3],\n    addressType: parts[4],\n    address: parts[5]\n  };\n};\n\n// a very naive interpretation of a valid SDP.\nSDPUtils.isValidSDP = function(blob) {\n  if (typeof blob !== 'string' || blob.length === 0) {\n    return false;\n  }\n  var lines = SDPUtils.splitLines(blob);\n  for (var i = 0; i < lines.length; i++) {\n    if (lines[i].length < 2 || lines[i].charAt(1) !== '=') {\n      return false;\n    }\n    // TODO: check the modifier a bit more.\n  }\n  return true;\n};\n\n// Expose public methods.\nif (typeof module === 'object') {\n  module.exports = SDPUtils;\n}\n","/**\n * Copyright (c) 2014-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n'use strict';\n\n/**\n * Similar to invariant but only logs a warning if the condition is not met.\n * This can be used to log issues in development environments in critical\n * paths. Removing the logging code for production environments will keep the\n * same logic and follow the same code paths.\n */\n\nvar __DEV__ = process.env.NODE_ENV !== 'production';\n\nvar warning = function() {};\n\nif (__DEV__) {\n  var printWarning = function printWarning(format, args) {\n    var len = arguments.length;\n    args = new Array(len > 1 ? len - 1 : 0);\n    for (var key = 1; key < len; key++) {\n      args[key - 1] = arguments[key];\n    }\n    var argIndex = 0;\n    var message = 'Warning: ' +\n      format.replace(/%s/g, function() {\n        return args[argIndex++];\n      });\n    if (typeof console !== 'undefined') {\n      console.error(message);\n    }\n    try {\n      // --- Welcome to debugging React ---\n      // This error was thrown as a convenience so that you can use this stack\n      // to find the callsite that caused this warning to fire.\n      throw new Error(message);\n    } catch (x) {}\n  }\n\n  warning = function(condition, format, args) {\n    var len = arguments.length;\n    args = new Array(len > 2 ? len - 2 : 0);\n    for (var key = 2; key < len; key++) {\n      args[key - 2] = arguments[key];\n    }\n    if (format === undefined) {\n      throw new Error(\n          '`warning(condition, format, ...args)` requires a warning ' +\n          'message argument'\n      );\n    }\n    if (!condition) {\n      printWarning.apply(null, [format].concat(args));\n    }\n  };\n}\n\nmodule.exports = warning;\n","/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n /* eslint-env node */\n'use strict';\n\nlet logDisabled_ = true;\nlet deprecationWarnings_ = true;\n\n/**\n * Extract browser version out of the provided user agent string.\n *\n * @param {!string} uastring userAgent string.\n * @param {!string} expr Regular expression used as match criteria.\n * @param {!number} pos position in the version string to be returned.\n * @return {!number} browser version.\n */\nexport function extractVersion(uastring, expr, pos) {\n  const match = uastring.match(expr);\n  return match && match.length >= pos && parseInt(match[pos], 10);\n}\n\n// Wraps the peerconnection event eventNameToWrap in a function\n// which returns the modified event object (or false to prevent\n// the event).\nexport function wrapPeerConnectionEvent(window, eventNameToWrap, wrapper) {\n  if (!window.RTCPeerConnection) {\n    return;\n  }\n  const proto = window.RTCPeerConnection.prototype;\n  const nativeAddEventListener = proto.addEventListener;\n  proto.addEventListener = function(nativeEventName, cb) {\n    if (nativeEventName !== eventNameToWrap) {\n      return nativeAddEventListener.apply(this, arguments);\n    }\n    const wrappedCallback = (e) => {\n      const modifiedEvent = wrapper(e);\n      if (modifiedEvent) {\n        if (cb.handleEvent) {\n          cb.handleEvent(modifiedEvent);\n        } else {\n          cb(modifiedEvent);\n        }\n      }\n    };\n    this._eventMap = this._eventMap || {};\n    if (!this._eventMap[eventNameToWrap]) {\n      this._eventMap[eventNameToWrap] = new Map();\n    }\n    this._eventMap[eventNameToWrap].set(cb, wrappedCallback);\n    return nativeAddEventListener.apply(this, [nativeEventName,\n      wrappedCallback]);\n  };\n\n  const nativeRemoveEventListener = proto.removeEventListener;\n  proto.removeEventListener = function(nativeEventName, cb) {\n    if (nativeEventName !== eventNameToWrap || !this._eventMap\n        || !this._eventMap[eventNameToWrap]) {\n      return nativeRemoveEventListener.apply(this, arguments);\n    }\n    if (!this._eventMap[eventNameToWrap].has(cb)) {\n      return nativeRemoveEventListener.apply(this, arguments);\n    }\n    const unwrappedCb = this._eventMap[eventNameToWrap].get(cb);\n    this._eventMap[eventNameToWrap].delete(cb);\n    if (this._eventMap[eventNameToWrap].size === 0) {\n      delete this._eventMap[eventNameToWrap];\n    }\n    if (Object.keys(this._eventMap).length === 0) {\n      delete this._eventMap;\n    }\n    return nativeRemoveEventListener.apply(this, [nativeEventName,\n      unwrappedCb]);\n  };\n\n  Object.defineProperty(proto, 'on' + eventNameToWrap, {\n    get() {\n      return this['_on' + eventNameToWrap];\n    },\n    set(cb) {\n      if (this['_on' + eventNameToWrap]) {\n        this.removeEventListener(eventNameToWrap,\n            this['_on' + eventNameToWrap]);\n        delete this['_on' + eventNameToWrap];\n      }\n      if (cb) {\n        this.addEventListener(eventNameToWrap,\n            this['_on' + eventNameToWrap] = cb);\n      }\n    },\n    enumerable: true,\n    configurable: true\n  });\n}\n\nexport function disableLog(bool) {\n  if (typeof bool !== 'boolean') {\n    return new Error('Argument type: ' + typeof bool +\n        '. Please use a boolean.');\n  }\n  logDisabled_ = bool;\n  return (bool) ? 'adapter.js logging disabled' :\n      'adapter.js logging enabled';\n}\n\n/**\n * Disable or enable deprecation warnings\n * @param {!boolean} bool set to true to disable warnings.\n */\nexport function disableWarnings(bool) {\n  if (typeof bool !== 'boolean') {\n    return new Error('Argument type: ' + typeof bool +\n        '. Please use a boolean.');\n  }\n  deprecationWarnings_ = !bool;\n  return 'adapter.js deprecation warnings ' + (bool ? 'disabled' : 'enabled');\n}\n\nexport function log() {\n  if (typeof window === 'object') {\n    if (logDisabled_) {\n      return;\n    }\n    if (typeof console !== 'undefined' && typeof console.log === 'function') {\n      console.log.apply(console, arguments);\n    }\n  }\n}\n\n/**\n * Shows a deprecation warning suggesting the modern and spec-compatible API.\n */\nexport function deprecated(oldMethod, newMethod) {\n  if (!deprecationWarnings_) {\n    return;\n  }\n  console.warn(oldMethod + ' is deprecated, please use ' + newMethod +\n      ' instead.');\n}\n\n/**\n * Browser detector.\n *\n * @return {object} result containing browser and version\n *     properties.\n */\nexport function detectBrowser(window) {\n  // Returned result object.\n  const result = {browser: null, version: null};\n\n  // Fail early if it's not a browser\n  if (typeof window === 'undefined' || !window.navigator) {\n    result.browser = 'Not a browser.';\n    return result;\n  }\n\n  const {navigator} = window;\n\n  if (navigator.mozGetUserMedia) { // Firefox.\n    result.browser = 'firefox';\n    result.version = extractVersion(navigator.userAgent,\n        /Firefox\\/(\\d+)\\./, 1);\n  } else if (navigator.webkitGetUserMedia ||\n      (window.isSecureContext === false && window.webkitRTCPeerConnection &&\n       !window.RTCIceGatherer)) {\n    // Chrome, Chromium, Webview, Opera.\n    // Version matches Chrome/WebRTC version.\n    // Chrome 74 removed webkitGetUserMedia on http as well so we need the\n    // more complicated fallback to webkitRTCPeerConnection.\n    result.browser = 'chrome';\n    result.version = extractVersion(navigator.userAgent,\n        /Chrom(e|ium)\\/(\\d+)\\./, 2);\n  } else if (navigator.mediaDevices &&\n      navigator.userAgent.match(/Edge\\/(\\d+).(\\d+)$/)) { // Edge.\n    result.browser = 'edge';\n    result.version = extractVersion(navigator.userAgent,\n        /Edge\\/(\\d+).(\\d+)$/, 2);\n  } else if (window.RTCPeerConnection &&\n      navigator.userAgent.match(/AppleWebKit\\/(\\d+)\\./)) { // Safari.\n    result.browser = 'safari';\n    result.version = extractVersion(navigator.userAgent,\n        /AppleWebKit\\/(\\d+)\\./, 1);\n    result.supportsUnifiedPlan = window.RTCRtpTransceiver &&\n        'currentDirection' in window.RTCRtpTransceiver.prototype;\n  } else { // Default fallthrough: not supported.\n    result.browser = 'Not a supported browser.';\n    return result;\n  }\n\n  return result;\n}\n\n/**\n * Checks if something is an object.\n *\n * @param {*} val The something you want to check.\n * @return true if val is an object, false otherwise.\n */\nfunction isObject(val) {\n  return Object.prototype.toString.call(val) === '[object Object]';\n}\n\n/**\n * Remove all empty objects and undefined values\n * from a nested object -- an enhanced and vanilla version\n * of Lodash's `compact`.\n */\nexport function compactObject(data) {\n  if (!isObject(data)) {\n    return data;\n  }\n\n  return Object.keys(data).reduce(function(accumulator, key) {\n    const isObj = isObject(data[key]);\n    const value = isObj ? compactObject(data[key]) : data[key];\n    const isEmptyObject = isObj && !Object.keys(value).length;\n    if (value === undefined || isEmptyObject) {\n      return accumulator;\n    }\n    return Object.assign(accumulator, {[key]: value});\n  }, {});\n}\n\n/* iterates the stats graph recursively. */\nexport function walkStats(stats, base, resultSet) {\n  if (!base || resultSet.has(base.id)) {\n    return;\n  }\n  resultSet.set(base.id, base);\n  Object.keys(base).forEach(name => {\n    if (name.endsWith('Id')) {\n      walkStats(stats, stats.get(base[name]), resultSet);\n    } else if (name.endsWith('Ids')) {\n      base[name].forEach(id => {\n        walkStats(stats, stats.get(id), resultSet);\n      });\n    }\n  });\n}\n\n/* filter getStats for a sender/receiver track. */\nexport function filterStats(result, track, outbound) {\n  const streamStatsType = outbound ? 'outbound-rtp' : 'inbound-rtp';\n  const filteredResult = new Map();\n  if (track === null) {\n    return filteredResult;\n  }\n  const trackStats = [];\n  result.forEach(value => {\n    if (value.type === 'track' &&\n        value.trackIdentifier === track.id) {\n      trackStats.push(value);\n    }\n  });\n  trackStats.forEach(trackStat => {\n    result.forEach(stats => {\n      if (stats.type === streamStatsType && stats.trackId === trackStat.id) {\n        walkStats(result, stats, filteredResult);\n      }\n    });\n  });\n  return filteredResult;\n}\n\n","/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n/* eslint-env node */\n'use strict';\nimport * as utils from '../utils.js';\nconst logging = utils.log;\n\nexport function shimGetUserMedia(window, browserDetails) {\n  const navigator = window && window.navigator;\n\n  if (!navigator.mediaDevices) {\n    return;\n  }\n\n  const constraintsToChrome_ = function(c) {\n    if (typeof c !== 'object' || c.mandatory || c.optional) {\n      return c;\n    }\n    const cc = {};\n    Object.keys(c).forEach(key => {\n      if (key === 'require' || key === 'advanced' || key === 'mediaSource') {\n        return;\n      }\n      const r = (typeof c[key] === 'object') ? c[key] : {ideal: c[key]};\n      if (r.exact !== undefined && typeof r.exact === 'number') {\n        r.min = r.max = r.exact;\n      }\n      const oldname_ = function(prefix, name) {\n        if (prefix) {\n          return prefix + name.charAt(0).toUpperCase() + name.slice(1);\n        }\n        return (name === 'deviceId') ? 'sourceId' : name;\n      };\n      if (r.ideal !== undefined) {\n        cc.optional = cc.optional || [];\n        let oc = {};\n        if (typeof r.ideal === 'number') {\n          oc[oldname_('min', key)] = r.ideal;\n          cc.optional.push(oc);\n          oc = {};\n          oc[oldname_('max', key)] = r.ideal;\n          cc.optional.push(oc);\n        } else {\n          oc[oldname_('', key)] = r.ideal;\n          cc.optional.push(oc);\n        }\n      }\n      if (r.exact !== undefined && typeof r.exact !== 'number') {\n        cc.mandatory = cc.mandatory || {};\n        cc.mandatory[oldname_('', key)] = r.exact;\n      } else {\n        ['min', 'max'].forEach(mix => {\n          if (r[mix] !== undefined) {\n            cc.mandatory = cc.mandatory || {};\n            cc.mandatory[oldname_(mix, key)] = r[mix];\n          }\n        });\n      }\n    });\n    if (c.advanced) {\n      cc.optional = (cc.optional || []).concat(c.advanced);\n    }\n    return cc;\n  };\n\n  const shimConstraints_ = function(constraints, func) {\n    if (browserDetails.version >= 61) {\n      return func(constraints);\n    }\n    constraints = JSON.parse(JSON.stringify(constraints));\n    if (constraints && typeof constraints.audio === 'object') {\n      const remap = function(obj, a, b) {\n        if (a in obj && !(b in obj)) {\n          obj[b] = obj[a];\n          delete obj[a];\n        }\n      };\n      constraints = JSON.parse(JSON.stringify(constraints));\n      remap(constraints.audio, 'autoGainControl', 'googAutoGainControl');\n      remap(constraints.audio, 'noiseSuppression', 'googNoiseSuppression');\n      constraints.audio = constraintsToChrome_(constraints.audio);\n    }\n    if (constraints && typeof constraints.video === 'object') {\n      // Shim facingMode for mobile & surface pro.\n      let face = constraints.video.facingMode;\n      face = face && ((typeof face === 'object') ? face : {ideal: face});\n      const getSupportedFacingModeLies = browserDetails.version < 66;\n\n      if ((face && (face.exact === 'user' || face.exact === 'environment' ||\n                    face.ideal === 'user' || face.ideal === 'environment')) &&\n          !(navigator.mediaDevices.getSupportedConstraints &&\n            navigator.mediaDevices.getSupportedConstraints().facingMode &&\n            !getSupportedFacingModeLies)) {\n        delete constraints.video.facingMode;\n        let matches;\n        if (face.exact === 'environment' || face.ideal === 'environment') {\n          matches = ['back', 'rear'];\n        } else if (face.exact === 'user' || face.ideal === 'user') {\n          matches = ['front'];\n        }\n        if (matches) {\n          // Look for matches in label, or use last cam for back (typical).\n          return navigator.mediaDevices.enumerateDevices()\n          .then(devices => {\n            devices = devices.filter(d => d.kind === 'videoinput');\n            let dev = devices.find(d => matches.some(match =>\n              d.label.toLowerCase().includes(match)));\n            if (!dev && devices.length && matches.includes('back')) {\n              dev = devices[devices.length - 1]; // more likely the back cam\n            }\n            if (dev) {\n              constraints.video.deviceId = face.exact ? {exact: dev.deviceId} :\n                                                        {ideal: dev.deviceId};\n            }\n            constraints.video = constraintsToChrome_(constraints.video);\n            logging('chrome: ' + JSON.stringify(constraints));\n            return func(constraints);\n          });\n        }\n      }\n      constraints.video = constraintsToChrome_(constraints.video);\n    }\n    logging('chrome: ' + JSON.stringify(constraints));\n    return func(constraints);\n  };\n\n  const shimError_ = function(e) {\n    if (browserDetails.version >= 64) {\n      return e;\n    }\n    return {\n      name: {\n        PermissionDeniedError: 'NotAllowedError',\n        PermissionDismissedError: 'NotAllowedError',\n        InvalidStateError: 'NotAllowedError',\n        DevicesNotFoundError: 'NotFoundError',\n        ConstraintNotSatisfiedError: 'OverconstrainedError',\n        TrackStartError: 'NotReadableError',\n        MediaDeviceFailedDueToShutdown: 'NotAllowedError',\n        MediaDeviceKillSwitchOn: 'NotAllowedError',\n        TabCaptureError: 'AbortError',\n        ScreenCaptureError: 'AbortError',\n        DeviceCaptureError: 'AbortError'\n      }[e.name] || e.name,\n      message: e.message,\n      constraint: e.constraint || e.constraintName,\n      toString() {\n        return this.name + (this.message && ': ') + this.message;\n      }\n    };\n  };\n\n  const getUserMedia_ = function(constraints, onSuccess, onError) {\n    shimConstraints_(constraints, c => {\n      navigator.webkitGetUserMedia(c, onSuccess, e => {\n        if (onError) {\n          onError(shimError_(e));\n        }\n      });\n    });\n  };\n  navigator.getUserMedia = getUserMedia_.bind(navigator);\n\n  // Even though Chrome 45 has navigator.mediaDevices and a getUserMedia\n  // function which returns a Promise, it does not accept spec-style\n  // constraints.\n  if (navigator.mediaDevices.getUserMedia) {\n    const origGetUserMedia = navigator.mediaDevices.getUserMedia.\n        bind(navigator.mediaDevices);\n    navigator.mediaDevices.getUserMedia = function(cs) {\n      return shimConstraints_(cs, c => origGetUserMedia(c).then(stream => {\n        if (c.audio && !stream.getAudioTracks().length ||\n            c.video && !stream.getVideoTracks().length) {\n          stream.getTracks().forEach(track => {\n            track.stop();\n          });\n          throw new DOMException('', 'NotFoundError');\n        }\n        return stream;\n      }, e => Promise.reject(shimError_(e))));\n    };\n  }\n}\n","/*\n *  Copyright (c) 2018 The adapter.js project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n/* eslint-env node */\n'use strict';\nexport function shimGetDisplayMedia(window, getSourceId) {\n  if (window.navigator.mediaDevices &&\n    'getDisplayMedia' in window.navigator.mediaDevices) {\n    return;\n  }\n  if (!(window.navigator.mediaDevices)) {\n    return;\n  }\n  // getSourceId is a function that returns a promise resolving with\n  // the sourceId of the screen/window/tab to be shared.\n  if (typeof getSourceId !== 'function') {\n    console.error('shimGetDisplayMedia: getSourceId argument is not ' +\n        'a function');\n    return;\n  }\n  window.navigator.mediaDevices.getDisplayMedia =\n    function getDisplayMedia(constraints) {\n      return getSourceId(constraints)\n        .then(sourceId => {\n          const widthSpecified = constraints.video && constraints.video.width;\n          const heightSpecified = constraints.video &&\n            constraints.video.height;\n          const frameRateSpecified = constraints.video &&\n            constraints.video.frameRate;\n          constraints.video = {\n            mandatory: {\n              chromeMediaSource: 'desktop',\n              chromeMediaSourceId: sourceId,\n              maxFrameRate: frameRateSpecified || 3\n            }\n          };\n          if (widthSpecified) {\n            constraints.video.mandatory.maxWidth = widthSpecified;\n          }\n          if (heightSpecified) {\n            constraints.video.mandatory.maxHeight = heightSpecified;\n          }\n          return window.navigator.mediaDevices.getUserMedia(constraints);\n        });\n    };\n}\n","/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n /* eslint-env node */\n'use strict';\nimport * as utils from '../utils.js';\n\nexport {shimGetUserMedia} from './getusermedia';\nexport {shimGetDisplayMedia} from './getdisplaymedia';\n\nexport function shimMediaStream(window) {\n  window.MediaStream = window.MediaStream || window.webkitMediaStream;\n}\n\nexport function shimOnTrack(window) {\n  if (typeof window === 'object' && window.RTCPeerConnection && !('ontrack' in\n      window.RTCPeerConnection.prototype)) {\n    Object.defineProperty(window.RTCPeerConnection.prototype, 'ontrack', {\n      get() {\n        return this._ontrack;\n      },\n      set(f) {\n        if (this._ontrack) {\n          this.removeEventListener('track', this._ontrack);\n        }\n        this.addEventListener('track', this._ontrack = f);\n      },\n      enumerable: true,\n      configurable: true\n    });\n    const origSetRemoteDescription =\n        window.RTCPeerConnection.prototype.setRemoteDescription;\n    window.RTCPeerConnection.prototype.setRemoteDescription =\n      function setRemoteDescription() {\n        if (!this._ontrackpoly) {\n          this._ontrackpoly = (e) => {\n            // onaddstream does not fire when a track is added to an existing\n            // stream. But stream.onaddtrack is implemented so we use that.\n            e.stream.addEventListener('addtrack', te => {\n              let receiver;\n              if (window.RTCPeerConnection.prototype.getReceivers) {\n                receiver = this.getReceivers()\n                  .find(r => r.track && r.track.id === te.track.id);\n              } else {\n                receiver = {track: te.track};\n              }\n\n              const event = new Event('track');\n              event.track = te.track;\n              event.receiver = receiver;\n              event.transceiver = {receiver};\n              event.streams = [e.stream];\n              this.dispatchEvent(event);\n            });\n            e.stream.getTracks().forEach(track => {\n              let receiver;\n              if (window.RTCPeerConnection.prototype.getReceivers) {\n                receiver = this.getReceivers()\n                  .find(r => r.track && r.track.id === track.id);\n              } else {\n                receiver = {track};\n              }\n              const event = new Event('track');\n              event.track = track;\n              event.receiver = receiver;\n              event.transceiver = {receiver};\n              event.streams = [e.stream];\n              this.dispatchEvent(event);\n            });\n          };\n          this.addEventListener('addstream', this._ontrackpoly);\n        }\n        return origSetRemoteDescription.apply(this, arguments);\n      };\n  } else {\n    // even if RTCRtpTransceiver is in window, it is only used and\n    // emitted in unified-plan. Unfortunately this means we need\n    // to unconditionally wrap the event.\n    utils.wrapPeerConnectionEvent(window, 'track', e => {\n      if (!e.transceiver) {\n        Object.defineProperty(e, 'transceiver',\n          {value: {receiver: e.receiver}});\n      }\n      return e;\n    });\n  }\n}\n\nexport function shimGetSendersWithDtmf(window) {\n  // Overrides addTrack/removeTrack, depends on shimAddTrackRemoveTrack.\n  if (typeof window === 'object' && window.RTCPeerConnection &&\n      !('getSenders' in window.RTCPeerConnection.prototype) &&\n      'createDTMFSender' in window.RTCPeerConnection.prototype) {\n    const shimSenderWithDtmf = function(pc, track) {\n      return {\n        track,\n        get dtmf() {\n          if (this._dtmf === undefined) {\n            if (track.kind === 'audio') {\n              this._dtmf = pc.createDTMFSender(track);\n            } else {\n              this._dtmf = null;\n            }\n          }\n          return this._dtmf;\n        },\n        _pc: pc\n      };\n    };\n\n    // augment addTrack when getSenders is not available.\n    if (!window.RTCPeerConnection.prototype.getSenders) {\n      window.RTCPeerConnection.prototype.getSenders = function getSenders() {\n        this._senders = this._senders || [];\n        return this._senders.slice(); // return a copy of the internal state.\n      };\n      const origAddTrack = window.RTCPeerConnection.prototype.addTrack;\n      window.RTCPeerConnection.prototype.addTrack =\n        function addTrack(track, stream) {\n          let sender = origAddTrack.apply(this, arguments);\n          if (!sender) {\n            sender = shimSenderWithDtmf(this, track);\n            this._senders.push(sender);\n          }\n          return sender;\n        };\n\n      const origRemoveTrack = window.RTCPeerConnection.prototype.removeTrack;\n      window.RTCPeerConnection.prototype.removeTrack =\n        function removeTrack(sender) {\n          origRemoveTrack.apply(this, arguments);\n          const idx = this._senders.indexOf(sender);\n          if (idx !== -1) {\n            this._senders.splice(idx, 1);\n          }\n        };\n    }\n    const origAddStream = window.RTCPeerConnection.prototype.addStream;\n    window.RTCPeerConnection.prototype.addStream = function addStream(stream) {\n      this._senders = this._senders || [];\n      origAddStream.apply(this, [stream]);\n      stream.getTracks().forEach(track => {\n        this._senders.push(shimSenderWithDtmf(this, track));\n      });\n    };\n\n    const origRemoveStream = window.RTCPeerConnection.prototype.removeStream;\n    window.RTCPeerConnection.prototype.removeStream =\n      function removeStream(stream) {\n        this._senders = this._senders || [];\n        origRemoveStream.apply(this, [stream]);\n\n        stream.getTracks().forEach(track => {\n          const sender = this._senders.find(s => s.track === track);\n          if (sender) { // remove sender\n            this._senders.splice(this._senders.indexOf(sender), 1);\n          }\n        });\n      };\n  } else if (typeof window === 'object' && window.RTCPeerConnection &&\n             'getSenders' in window.RTCPeerConnection.prototype &&\n             'createDTMFSender' in window.RTCPeerConnection.prototype &&\n             window.RTCRtpSender &&\n             !('dtmf' in window.RTCRtpSender.prototype)) {\n    const origGetSenders = window.RTCPeerConnection.prototype.getSenders;\n    window.RTCPeerConnection.prototype.getSenders = function getSenders() {\n      const senders = origGetSenders.apply(this, []);\n      senders.forEach(sender => sender._pc = this);\n      return senders;\n    };\n\n    Object.defineProperty(window.RTCRtpSender.prototype, 'dtmf', {\n      get() {\n        if (this._dtmf === undefined) {\n          if (this.track.kind === 'audio') {\n            this._dtmf = this._pc.createDTMFSender(this.track);\n          } else {\n            this._dtmf = null;\n          }\n        }\n        return this._dtmf;\n      }\n    });\n  }\n}\n\nexport function shimGetStats(window) {\n  if (!window.RTCPeerConnection) {\n    return;\n  }\n\n  const origGetStats = window.RTCPeerConnection.prototype.getStats;\n  window.RTCPeerConnection.prototype.getStats = function getStats() {\n    const [selector, onSucc, onErr] = arguments;\n\n    // If selector is a function then we are in the old style stats so just\n    // pass back the original getStats format to avoid breaking old users.\n    if (arguments.length > 0 && typeof selector === 'function') {\n      return origGetStats.apply(this, arguments);\n    }\n\n    // When spec-style getStats is supported, return those when called with\n    // either no arguments or the selector argument is null.\n    if (origGetStats.length === 0 && (arguments.length === 0 ||\n        typeof selector !== 'function')) {\n      return origGetStats.apply(this, []);\n    }\n\n    const fixChromeStats_ = function(response) {\n      const standardReport = {};\n      const reports = response.result();\n      reports.forEach(report => {\n        const standardStats = {\n          id: report.id,\n          timestamp: report.timestamp,\n          type: {\n            localcandidate: 'local-candidate',\n            remotecandidate: 'remote-candidate'\n          }[report.type] || report.type\n        };\n        report.names().forEach(name => {\n          standardStats[name] = report.stat(name);\n        });\n        standardReport[standardStats.id] = standardStats;\n      });\n\n      return standardReport;\n    };\n\n    // shim getStats with maplike support\n    const makeMapStats = function(stats) {\n      return new Map(Object.keys(stats).map(key => [key, stats[key]]));\n    };\n\n    if (arguments.length >= 2) {\n      const successCallbackWrapper_ = function(response) {\n        onSucc(makeMapStats(fixChromeStats_(response)));\n      };\n\n      return origGetStats.apply(this, [successCallbackWrapper_,\n        selector]);\n    }\n\n    // promise-support\n    return new Promise((resolve, reject) => {\n      origGetStats.apply(this, [\n        function(response) {\n          resolve(makeMapStats(fixChromeStats_(response)));\n        }, reject]);\n    }).then(onSucc, onErr);\n  };\n}\n\nexport function shimSenderReceiverGetStats(window) {\n  if (!(typeof window === 'object' && window.RTCPeerConnection &&\n      window.RTCRtpSender && window.RTCRtpReceiver)) {\n    return;\n  }\n\n  // shim sender stats.\n  if (!('getStats' in window.RTCRtpSender.prototype)) {\n    const origGetSenders = window.RTCPeerConnection.prototype.getSenders;\n    if (origGetSenders) {\n      window.RTCPeerConnection.prototype.getSenders = function getSenders() {\n        const senders = origGetSenders.apply(this, []);\n        senders.forEach(sender => sender._pc = this);\n        return senders;\n      };\n    }\n\n    const origAddTrack = window.RTCPeerConnection.prototype.addTrack;\n    if (origAddTrack) {\n      window.RTCPeerConnection.prototype.addTrack = function addTrack() {\n        const sender = origAddTrack.apply(this, arguments);\n        sender._pc = this;\n        return sender;\n      };\n    }\n    window.RTCRtpSender.prototype.getStats = function getStats() {\n      const sender = this;\n      return this._pc.getStats().then(result =>\n        /* Note: this will include stats of all senders that\n         *   send a track with the same id as sender.track as\n         *   it is not possible to identify the RTCRtpSender.\n         */\n        utils.filterStats(result, sender.track, true));\n    };\n  }\n\n  // shim receiver stats.\n  if (!('getStats' in window.RTCRtpReceiver.prototype)) {\n    const origGetReceivers = window.RTCPeerConnection.prototype.getReceivers;\n    if (origGetReceivers) {\n      window.RTCPeerConnection.prototype.getReceivers =\n        function getReceivers() {\n          const receivers = origGetReceivers.apply(this, []);\n          receivers.forEach(receiver => receiver._pc = this);\n          return receivers;\n        };\n    }\n    utils.wrapPeerConnectionEvent(window, 'track', e => {\n      e.receiver._pc = e.srcElement;\n      return e;\n    });\n    window.RTCRtpReceiver.prototype.getStats = function getStats() {\n      const receiver = this;\n      return this._pc.getStats().then(result =>\n        utils.filterStats(result, receiver.track, false));\n    };\n  }\n\n  if (!('getStats' in window.RTCRtpSender.prototype &&\n      'getStats' in window.RTCRtpReceiver.prototype)) {\n    return;\n  }\n\n  // shim RTCPeerConnection.getStats(track).\n  const origGetStats = window.RTCPeerConnection.prototype.getStats;\n  window.RTCPeerConnection.prototype.getStats = function getStats() {\n    if (arguments.length > 0 &&\n        arguments[0] instanceof window.MediaStreamTrack) {\n      const track = arguments[0];\n      let sender;\n      let receiver;\n      let err;\n      this.getSenders().forEach(s => {\n        if (s.track === track) {\n          if (sender) {\n            err = true;\n          } else {\n            sender = s;\n          }\n        }\n      });\n      this.getReceivers().forEach(r => {\n        if (r.track === track) {\n          if (receiver) {\n            err = true;\n          } else {\n            receiver = r;\n          }\n        }\n        return r.track === track;\n      });\n      if (err || (sender && receiver)) {\n        return Promise.reject(new DOMException(\n          'There are more than one sender or receiver for the track.',\n          'InvalidAccessError'));\n      } else if (sender) {\n        return sender.getStats();\n      } else if (receiver) {\n        return receiver.getStats();\n      }\n      return Promise.reject(new DOMException(\n        'There is no sender or receiver for the track.',\n        'InvalidAccessError'));\n    }\n    return origGetStats.apply(this, arguments);\n  };\n}\n\nexport function shimAddTrackRemoveTrackWithNative(window) {\n  // shim addTrack/removeTrack with native variants in order to make\n  // the interactions with legacy getLocalStreams behave as in other browsers.\n  // Keeps a mapping stream.id => [stream, rtpsenders...]\n  window.RTCPeerConnection.prototype.getLocalStreams =\n    function getLocalStreams() {\n      this._shimmedLocalStreams = this._shimmedLocalStreams || {};\n      return Object.keys(this._shimmedLocalStreams)\n        .map(streamId => this._shimmedLocalStreams[streamId][0]);\n    };\n\n  const origAddTrack = window.RTCPeerConnection.prototype.addTrack;\n  window.RTCPeerConnection.prototype.addTrack =\n    function addTrack(track, stream) {\n      if (!stream) {\n        return origAddTrack.apply(this, arguments);\n      }\n      this._shimmedLocalStreams = this._shimmedLocalStreams || {};\n\n      const sender = origAddTrack.apply(this, arguments);\n      if (!this._shimmedLocalStreams[stream.id]) {\n        this._shimmedLocalStreams[stream.id] = [stream, sender];\n      } else if (this._shimmedLocalStreams[stream.id].indexOf(sender) === -1) {\n        this._shimmedLocalStreams[stream.id].push(sender);\n      }\n      return sender;\n    };\n\n  const origAddStream = window.RTCPeerConnection.prototype.addStream;\n  window.RTCPeerConnection.prototype.addStream = function addStream(stream) {\n    this._shimmedLocalStreams = this._shimmedLocalStreams || {};\n\n    stream.getTracks().forEach(track => {\n      const alreadyExists = this.getSenders().find(s => s.track === track);\n      if (alreadyExists) {\n        throw new DOMException('Track already exists.',\n            'InvalidAccessError');\n      }\n    });\n    const existingSenders = this.getSenders();\n    origAddStream.apply(this, arguments);\n    const newSenders = this.getSenders()\n      .filter(newSender => existingSenders.indexOf(newSender) === -1);\n    this._shimmedLocalStreams[stream.id] = [stream].concat(newSenders);\n  };\n\n  const origRemoveStream = window.RTCPeerConnection.prototype.removeStream;\n  window.RTCPeerConnection.prototype.removeStream =\n    function removeStream(stream) {\n      this._shimmedLocalStreams = this._shimmedLocalStreams || {};\n      delete this._shimmedLocalStreams[stream.id];\n      return origRemoveStream.apply(this, arguments);\n    };\n\n  const origRemoveTrack = window.RTCPeerConnection.prototype.removeTrack;\n  window.RTCPeerConnection.prototype.removeTrack =\n    function removeTrack(sender) {\n      this._shimmedLocalStreams = this._shimmedLocalStreams || {};\n      if (sender) {\n        Object.keys(this._shimmedLocalStreams).forEach(streamId => {\n          const idx = this._shimmedLocalStreams[streamId].indexOf(sender);\n          if (idx !== -1) {\n            this._shimmedLocalStreams[streamId].splice(idx, 1);\n          }\n          if (this._shimmedLocalStreams[streamId].length === 1) {\n            delete this._shimmedLocalStreams[streamId];\n          }\n        });\n      }\n      return origRemoveTrack.apply(this, arguments);\n    };\n}\n\nexport function shimAddTrackRemoveTrack(window, browserDetails) {\n  if (!window.RTCPeerConnection) {\n    return;\n  }\n  // shim addTrack and removeTrack.\n  if (window.RTCPeerConnection.prototype.addTrack &&\n      browserDetails.version >= 65) {\n    return shimAddTrackRemoveTrackWithNative(window);\n  }\n\n  // also shim pc.getLocalStreams when addTrack is shimmed\n  // to return the original streams.\n  const origGetLocalStreams = window.RTCPeerConnection.prototype\n      .getLocalStreams;\n  window.RTCPeerConnection.prototype.getLocalStreams =\n    function getLocalStreams() {\n      const nativeStreams = origGetLocalStreams.apply(this);\n      this._reverseStreams = this._reverseStreams || {};\n      return nativeStreams.map(stream => this._reverseStreams[stream.id]);\n    };\n\n  const origAddStream = window.RTCPeerConnection.prototype.addStream;\n  window.RTCPeerConnection.prototype.addStream = function addStream(stream) {\n    this._streams = this._streams || {};\n    this._reverseStreams = this._reverseStreams || {};\n\n    stream.getTracks().forEach(track => {\n      const alreadyExists = this.getSenders().find(s => s.track === track);\n      if (alreadyExists) {\n        throw new DOMException('Track already exists.',\n            'InvalidAccessError');\n      }\n    });\n    // Add identity mapping for consistency with addTrack.\n    // Unless this is being used with a stream from addTrack.\n    if (!this._reverseStreams[stream.id]) {\n      const newStream = new window.MediaStream(stream.getTracks());\n      this._streams[stream.id] = newStream;\n      this._reverseStreams[newStream.id] = stream;\n      stream = newStream;\n    }\n    origAddStream.apply(this, [stream]);\n  };\n\n  const origRemoveStream = window.RTCPeerConnection.prototype.removeStream;\n  window.RTCPeerConnection.prototype.removeStream =\n    function removeStream(stream) {\n      this._streams = this._streams || {};\n      this._reverseStreams = this._reverseStreams || {};\n\n      origRemoveStream.apply(this, [(this._streams[stream.id] || stream)]);\n      delete this._reverseStreams[(this._streams[stream.id] ?\n          this._streams[stream.id].id : stream.id)];\n      delete this._streams[stream.id];\n    };\n\n  window.RTCPeerConnection.prototype.addTrack =\n    function addTrack(track, stream) {\n      if (this.signalingState === 'closed') {\n        throw new DOMException(\n          'The RTCPeerConnection\\'s signalingState is \\'closed\\'.',\n          'InvalidStateError');\n      }\n      const streams = [].slice.call(arguments, 1);\n      if (streams.length !== 1 ||\n          !streams[0].getTracks().find(t => t === track)) {\n        // this is not fully correct but all we can manage without\n        // [[associated MediaStreams]] internal slot.\n        throw new DOMException(\n          'The adapter.js addTrack polyfill only supports a single ' +\n          ' stream which is associated with the specified track.',\n          'NotSupportedError');\n      }\n\n      const alreadyExists = this.getSenders().find(s => s.track === track);\n      if (alreadyExists) {\n        throw new DOMException('Track already exists.',\n            'InvalidAccessError');\n      }\n\n      this._streams = this._streams || {};\n      this._reverseStreams = this._reverseStreams || {};\n      const oldStream = this._streams[stream.id];\n      if (oldStream) {\n        // this is using odd Chrome behaviour, use with caution:\n        // https://bugs.chromium.org/p/webrtc/issues/detail?id=7815\n        // Note: we rely on the high-level addTrack/dtmf shim to\n        // create the sender with a dtmf sender.\n        oldStream.addTrack(track);\n\n        // Trigger ONN async.\n        Promise.resolve().then(() => {\n          this.dispatchEvent(new Event('negotiationneeded'));\n        });\n      } else {\n        const newStream = new window.MediaStream([track]);\n        this._streams[stream.id] = newStream;\n        this._reverseStreams[newStream.id] = stream;\n        this.addStream(newStream);\n      }\n      return this.getSenders().find(s => s.track === track);\n    };\n\n  // replace the internal stream id with the external one and\n  // vice versa.\n  function replaceInternalStreamId(pc, description) {\n    let sdp = description.sdp;\n    Object.keys(pc._reverseStreams || []).forEach(internalId => {\n      const externalStream = pc._reverseStreams[internalId];\n      const internalStream = pc._streams[externalStream.id];\n      sdp = sdp.replace(new RegExp(internalStream.id, 'g'),\n          externalStream.id);\n    });\n    return new RTCSessionDescription({\n      type: description.type,\n      sdp\n    });\n  }\n  function replaceExternalStreamId(pc, description) {\n    let sdp = description.sdp;\n    Object.keys(pc._reverseStreams || []).forEach(internalId => {\n      const externalStream = pc._reverseStreams[internalId];\n      const internalStream = pc._streams[externalStream.id];\n      sdp = sdp.replace(new RegExp(externalStream.id, 'g'),\n          internalStream.id);\n    });\n    return new RTCSessionDescription({\n      type: description.type,\n      sdp\n    });\n  }\n  ['createOffer', 'createAnswer'].forEach(function(method) {\n    const nativeMethod = window.RTCPeerConnection.prototype[method];\n    const methodObj = {[method]() {\n      const args = arguments;\n      const isLegacyCall = arguments.length &&\n          typeof arguments[0] === 'function';\n      if (isLegacyCall) {\n        return nativeMethod.apply(this, [\n          (description) => {\n            const desc = replaceInternalStreamId(this, description);\n            args[0].apply(null, [desc]);\n          },\n          (err) => {\n            if (args[1]) {\n              args[1].apply(null, err);\n            }\n          }, arguments[2]\n        ]);\n      }\n      return nativeMethod.apply(this, arguments)\n      .then(description => replaceInternalStreamId(this, description));\n    }};\n    window.RTCPeerConnection.prototype[method] = methodObj[method];\n  });\n\n  const origSetLocalDescription =\n      window.RTCPeerConnection.prototype.setLocalDescription;\n  window.RTCPeerConnection.prototype.setLocalDescription =\n    function setLocalDescription() {\n      if (!arguments.length || !arguments[0].type) {\n        return origSetLocalDescription.apply(this, arguments);\n      }\n      arguments[0] = replaceExternalStreamId(this, arguments[0]);\n      return origSetLocalDescription.apply(this, arguments);\n    };\n\n  // TODO: mangle getStats: https://w3c.github.io/webrtc-stats/#dom-rtcmediastreamstats-streamidentifier\n\n  const origLocalDescription = Object.getOwnPropertyDescriptor(\n      window.RTCPeerConnection.prototype, 'localDescription');\n  Object.defineProperty(window.RTCPeerConnection.prototype,\n      'localDescription', {\n        get() {\n          const description = origLocalDescription.get.apply(this);\n          if (description.type === '') {\n            return description;\n          }\n          return replaceInternalStreamId(this, description);\n        }\n      });\n\n  window.RTCPeerConnection.prototype.removeTrack =\n    function removeTrack(sender) {\n      if (this.signalingState === 'closed') {\n        throw new DOMException(\n          'The RTCPeerConnection\\'s signalingState is \\'closed\\'.',\n          'InvalidStateError');\n      }\n      // We can not yet check for sender instanceof RTCRtpSender\n      // since we shim RTPSender. So we check if sender._pc is set.\n      if (!sender._pc) {\n        throw new DOMException('Argument 1 of RTCPeerConnection.removeTrack ' +\n            'does not implement interface RTCRtpSender.', 'TypeError');\n      }\n      const isLocal = sender._pc === this;\n      if (!isLocal) {\n        throw new DOMException('Sender was not created by this connection.',\n            'InvalidAccessError');\n      }\n\n      // Search for the native stream the senders track belongs to.\n      this._streams = this._streams || {};\n      let stream;\n      Object.keys(this._streams).forEach(streamid => {\n        const hasTrack = this._streams[streamid].getTracks()\n          .find(track => sender.track === track);\n        if (hasTrack) {\n          stream = this._streams[streamid];\n        }\n      });\n\n      if (stream) {\n        if (stream.getTracks().length === 1) {\n          // if this is the last track of the stream, remove the stream. This\n          // takes care of any shimmed _senders.\n          this.removeStream(this._reverseStreams[stream.id]);\n        } else {\n          // relying on the same odd chrome behaviour as above.\n          stream.removeTrack(sender.track);\n        }\n        this.dispatchEvent(new Event('negotiationneeded'));\n      }\n    };\n}\n\nexport function shimPeerConnection(window, browserDetails) {\n  if (!window.RTCPeerConnection && window.webkitRTCPeerConnection) {\n    // very basic support for old versions.\n    window.RTCPeerConnection = window.webkitRTCPeerConnection;\n  }\n  if (!window.RTCPeerConnection) {\n    return;\n  }\n\n  // shim implicit creation of RTCSessionDescription/RTCIceCandidate\n  if (browserDetails.version < 53) {\n    ['setLocalDescription', 'setRemoteDescription', 'addIceCandidate']\n        .forEach(function(method) {\n          const nativeMethod = window.RTCPeerConnection.prototype[method];\n          const methodObj = {[method]() {\n            arguments[0] = new ((method === 'addIceCandidate') ?\n                window.RTCIceCandidate :\n                window.RTCSessionDescription)(arguments[0]);\n            return nativeMethod.apply(this, arguments);\n          }};\n          window.RTCPeerConnection.prototype[method] = methodObj[method];\n        });\n  }\n}\n\n// Attempt to fix ONN in plan-b mode.\nexport function fixNegotiationNeeded(window, browserDetails) {\n  utils.wrapPeerConnectionEvent(window, 'negotiationneeded', e => {\n    const pc = e.target;\n    if (browserDetails.version < 72 || (pc.getConfiguration &&\n        pc.getConfiguration().sdpSemantics === 'plan-b')) {\n      if (pc.signalingState !== 'stable') {\n        return;\n      }\n    }\n    return e;\n  });\n}\n","/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n /* eslint-env node */\n'use strict';\n\nexport function shimGetUserMedia(window) {\n  const navigator = window && window.navigator;\n\n  const shimError_ = function(e) {\n    return {\n      name: {PermissionDeniedError: 'NotAllowedError'}[e.name] || e.name,\n      message: e.message,\n      constraint: e.constraint,\n      toString() {\n        return this.name;\n      }\n    };\n  };\n\n  // getUserMedia error shim.\n  const origGetUserMedia = navigator.mediaDevices.getUserMedia.\n      bind(navigator.mediaDevices);\n  navigator.mediaDevices.getUserMedia = function(c) {\n    return origGetUserMedia(c).catch(e => Promise.reject(shimError_(e)));\n  };\n}\n","/*\n *  Copyright (c) 2018 The adapter.js project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n /* eslint-env node */\n'use strict';\n\nexport function shimGetDisplayMedia(window) {\n  if (!('getDisplayMedia' in window.navigator)) {\n    return;\n  }\n  if (!(window.navigator.mediaDevices)) {\n    return;\n  }\n  if (window.navigator.mediaDevices &&\n    'getDisplayMedia' in window.navigator.mediaDevices) {\n    return;\n  }\n  window.navigator.mediaDevices.getDisplayMedia =\n    window.navigator.getDisplayMedia.bind(window.navigator);\n}\n","/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n/* eslint-env node */\n'use strict';\n\nimport * as utils from '../utils';\nimport {filterIceServers} from './filtericeservers';\nimport shimRTCPeerConnection from 'rtcpeerconnection-shim';\n\nexport {shimGetUserMedia} from './getusermedia';\nexport {shimGetDisplayMedia} from './getdisplaymedia';\n\nexport function shimPeerConnection(window, browserDetails) {\n  if (window.RTCIceGatherer) {\n    if (!window.RTCIceCandidate) {\n      window.RTCIceCandidate = function RTCIceCandidate(args) {\n        return args;\n      };\n    }\n    if (!window.RTCSessionDescription) {\n      window.RTCSessionDescription = function RTCSessionDescription(args) {\n        return args;\n      };\n    }\n    // this adds an additional event listener to MediaStrackTrack that signals\n    // when a tracks enabled property was changed. Workaround for a bug in\n    // addStream, see below. No longer required in 15025+\n    if (browserDetails.version < 15025) {\n      const origMSTEnabled = Object.getOwnPropertyDescriptor(\n          window.MediaStreamTrack.prototype, 'enabled');\n      Object.defineProperty(window.MediaStreamTrack.prototype, 'enabled', {\n        set(value) {\n          origMSTEnabled.set.call(this, value);\n          const ev = new Event('enabled');\n          ev.enabled = value;\n          this.dispatchEvent(ev);\n        }\n      });\n    }\n  }\n\n  // ORTC defines the DTMF sender a bit different.\n  // https://github.com/w3c/ortc/issues/714\n  if (window.RTCRtpSender && !('dtmf' in window.RTCRtpSender.prototype)) {\n    Object.defineProperty(window.RTCRtpSender.prototype, 'dtmf', {\n      get() {\n        if (this._dtmf === undefined) {\n          if (this.track.kind === 'audio') {\n            this._dtmf = new window.RTCDtmfSender(this);\n          } else if (this.track.kind === 'video') {\n            this._dtmf = null;\n          }\n        }\n        return this._dtmf;\n      }\n    });\n  }\n  // Edge currently only implements the RTCDtmfSender, not the\n  // RTCDTMFSender alias. See http://draft.ortc.org/#rtcdtmfsender2*\n  if (window.RTCDtmfSender && !window.RTCDTMFSender) {\n    window.RTCDTMFSender = window.RTCDtmfSender;\n  }\n\n  const RTCPeerConnectionShim = shimRTCPeerConnection(window,\n      browserDetails.version);\n  window.RTCPeerConnection = function RTCPeerConnection(config) {\n    if (config && config.iceServers) {\n      config.iceServers = filterIceServers(config.iceServers,\n        browserDetails.version);\n      utils.log('ICE servers after filtering:', config.iceServers);\n    }\n    return new RTCPeerConnectionShim(config);\n  };\n  window.RTCPeerConnection.prototype = RTCPeerConnectionShim.prototype;\n}\n\nexport function shimReplaceTrack(window) {\n  // ORTC has replaceTrack -- https://github.com/w3c/ortc/issues/614\n  if (window.RTCRtpSender &&\n      !('replaceTrack' in window.RTCRtpSender.prototype)) {\n    window.RTCRtpSender.prototype.replaceTrack =\n        window.RTCRtpSender.prototype.setTrack;\n  }\n}\n","/*\n *  Copyright (c) 2018 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n/* eslint-env node */\n'use strict';\n\nimport * as utils from '../utils';\n// Edge does not like\n// 1) stun: filtered after 14393 unless ?transport=udp is present\n// 2) turn: that does not have all of turn:host:port?transport=udp\n// 3) turn: with ipv6 addresses\n// 4) turn: occurring muliple times\nexport function filterIceServers(iceServers, edgeVersion) {\n  let hasTurn = false;\n  iceServers = JSON.parse(JSON.stringify(iceServers));\n  return iceServers.filter(server => {\n    if (server && (server.urls || server.url)) {\n      let urls = server.urls || server.url;\n      if (server.url && !server.urls) {\n        utils.deprecated('RTCIceServer.url', 'RTCIceServer.urls');\n      }\n      const isString = typeof urls === 'string';\n      if (isString) {\n        urls = [urls];\n      }\n      urls = urls.filter(url => {\n        // filter STUN unconditionally.\n        if (url.indexOf('stun:') === 0) {\n          return false;\n        }\n\n        const validTurn = url.startsWith('turn') &&\n            !url.startsWith('turn:[') &&\n            url.includes('transport=udp');\n        if (validTurn && !hasTurn) {\n          hasTurn = true;\n          return true;\n        }\n        return validTurn && !hasTurn;\n      });\n\n      delete server.url;\n      server.urls = isString ? urls[0] : urls;\n      return !!urls.length;\n    }\n  });\n}\n","/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n/* eslint-env node */\n'use strict';\n\nimport * as utils from '../utils';\n\nexport function shimGetUserMedia(window, browserDetails) {\n  const navigator = window && window.navigator;\n  const MediaStreamTrack = window && window.MediaStreamTrack;\n\n  navigator.getUserMedia = function(constraints, onSuccess, onError) {\n    // Replace Firefox 44+'s deprecation warning with unprefixed version.\n    utils.deprecated('navigator.getUserMedia',\n        'navigator.mediaDevices.getUserMedia');\n    navigator.mediaDevices.getUserMedia(constraints).then(onSuccess, onError);\n  };\n\n  if (!(browserDetails.version > 55 &&\n      'autoGainControl' in navigator.mediaDevices.getSupportedConstraints())) {\n    const remap = function(obj, a, b) {\n      if (a in obj && !(b in obj)) {\n        obj[b] = obj[a];\n        delete obj[a];\n      }\n    };\n\n    const nativeGetUserMedia = navigator.mediaDevices.getUserMedia.\n        bind(navigator.mediaDevices);\n    navigator.mediaDevices.getUserMedia = function(c) {\n      if (typeof c === 'object' && typeof c.audio === 'object') {\n        c = JSON.parse(JSON.stringify(c));\n        remap(c.audio, 'autoGainControl', 'mozAutoGainControl');\n        remap(c.audio, 'noiseSuppression', 'mozNoiseSuppression');\n      }\n      return nativeGetUserMedia(c);\n    };\n\n    if (MediaStreamTrack && MediaStreamTrack.prototype.getSettings) {\n      const nativeGetSettings = MediaStreamTrack.prototype.getSettings;\n      MediaStreamTrack.prototype.getSettings = function() {\n        const obj = nativeGetSettings.apply(this, arguments);\n        remap(obj, 'mozAutoGainControl', 'autoGainControl');\n        remap(obj, 'mozNoiseSuppression', 'noiseSuppression');\n        return obj;\n      };\n    }\n\n    if (MediaStreamTrack && MediaStreamTrack.prototype.applyConstraints) {\n      const nativeApplyConstraints =\n        MediaStreamTrack.prototype.applyConstraints;\n      MediaStreamTrack.prototype.applyConstraints = function(c) {\n        if (this.kind === 'audio' && typeof c === 'object') {\n          c = JSON.parse(JSON.stringify(c));\n          remap(c, 'autoGainControl', 'mozAutoGainControl');\n          remap(c, 'noiseSuppression', 'mozNoiseSuppression');\n        }\n        return nativeApplyConstraints.apply(this, [c]);\n      };\n    }\n  }\n}\n","/*\n *  Copyright (c) 2018 The adapter.js project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n/* eslint-env node */\n'use strict';\n\nexport function shimGetDisplayMedia(window, preferredMediaSource) {\n  if (window.navigator.mediaDevices &&\n    'getDisplayMedia' in window.navigator.mediaDevices) {\n    return;\n  }\n  if (!(window.navigator.mediaDevices)) {\n    return;\n  }\n  window.navigator.mediaDevices.getDisplayMedia =\n    function getDisplayMedia(constraints) {\n      if (!(constraints && constraints.video)) {\n        const err = new DOMException('getDisplayMedia without video ' +\n            'constraints is undefined');\n        err.name = 'NotFoundError';\n        // from https://heycam.github.io/webidl/#idl-DOMException-error-names\n        err.code = 8;\n        return Promise.reject(err);\n      }\n      if (constraints.video === true) {\n        constraints.video = {mediaSource: preferredMediaSource};\n      } else {\n        constraints.video.mediaSource = preferredMediaSource;\n      }\n      return window.navigator.mediaDevices.getUserMedia(constraints);\n    };\n}\n","/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n/* eslint-env node */\n'use strict';\n\nimport * as utils from '../utils';\nexport {shimGetUserMedia} from './getusermedia';\nexport {shimGetDisplayMedia} from './getdisplaymedia';\n\nexport function shimOnTrack(window) {\n  if (typeof window === 'object' && window.RTCTrackEvent &&\n      ('receiver' in window.RTCTrackEvent.prototype) &&\n      !('transceiver' in window.RTCTrackEvent.prototype)) {\n    Object.defineProperty(window.RTCTrackEvent.prototype, 'transceiver', {\n      get() {\n        return {receiver: this.receiver};\n      }\n    });\n  }\n}\n\nexport function shimPeerConnection(window, browserDetails) {\n  if (typeof window !== 'object' ||\n      !(window.RTCPeerConnection || window.mozRTCPeerConnection)) {\n    return; // probably media.peerconnection.enabled=false in about:config\n  }\n  if (!window.RTCPeerConnection && window.mozRTCPeerConnection) {\n    // very basic support for old versions.\n    window.RTCPeerConnection = window.mozRTCPeerConnection;\n  }\n\n  if (browserDetails.version < 53) {\n    // shim away need for obsolete RTCIceCandidate/RTCSessionDescription.\n    ['setLocalDescription', 'setRemoteDescription', 'addIceCandidate']\n        .forEach(function(method) {\n          const nativeMethod = window.RTCPeerConnection.prototype[method];\n          const methodObj = {[method]() {\n            arguments[0] = new ((method === 'addIceCandidate') ?\n                window.RTCIceCandidate :\n                window.RTCSessionDescription)(arguments[0]);\n            return nativeMethod.apply(this, arguments);\n          }};\n          window.RTCPeerConnection.prototype[method] = methodObj[method];\n        });\n  }\n\n  const modernStatsTypes = {\n    inboundrtp: 'inbound-rtp',\n    outboundrtp: 'outbound-rtp',\n    candidatepair: 'candidate-pair',\n    localcandidate: 'local-candidate',\n    remotecandidate: 'remote-candidate'\n  };\n\n  const nativeGetStats = window.RTCPeerConnection.prototype.getStats;\n  window.RTCPeerConnection.prototype.getStats = function getStats() {\n    const [selector, onSucc, onErr] = arguments;\n    return nativeGetStats.apply(this, [selector || null])\n      .then(stats => {\n        if (browserDetails.version < 53 && !onSucc) {\n          // Shim only promise getStats with spec-hyphens in type names\n          // Leave callback version alone; misc old uses of forEach before Map\n          try {\n            stats.forEach(stat => {\n              stat.type = modernStatsTypes[stat.type] || stat.type;\n            });\n          } catch (e) {\n            if (e.name !== 'TypeError') {\n              throw e;\n            }\n            // Avoid TypeError: \"type\" is read-only, in old versions. 34-43ish\n            stats.forEach((stat, i) => {\n              stats.set(i, Object.assign({}, stat, {\n                type: modernStatsTypes[stat.type] || stat.type\n              }));\n            });\n          }\n        }\n        return stats;\n      })\n      .then(onSucc, onErr);\n  };\n}\n\nexport function shimSenderGetStats(window) {\n  if (!(typeof window === 'object' && window.RTCPeerConnection &&\n      window.RTCRtpSender)) {\n    return;\n  }\n  if (window.RTCRtpSender && 'getStats' in window.RTCRtpSender.prototype) {\n    return;\n  }\n  const origGetSenders = window.RTCPeerConnection.prototype.getSenders;\n  if (origGetSenders) {\n    window.RTCPeerConnection.prototype.getSenders = function getSenders() {\n      const senders = origGetSenders.apply(this, []);\n      senders.forEach(sender => sender._pc = this);\n      return senders;\n    };\n  }\n\n  const origAddTrack = window.RTCPeerConnection.prototype.addTrack;\n  if (origAddTrack) {\n    window.RTCPeerConnection.prototype.addTrack = function addTrack() {\n      const sender = origAddTrack.apply(this, arguments);\n      sender._pc = this;\n      return sender;\n    };\n  }\n  window.RTCRtpSender.prototype.getStats = function getStats() {\n    return this.track ? this._pc.getStats(this.track) :\n        Promise.resolve(new Map());\n  };\n}\n\nexport function shimReceiverGetStats(window) {\n  if (!(typeof window === 'object' && window.RTCPeerConnection &&\n      window.RTCRtpSender)) {\n    return;\n  }\n  if (window.RTCRtpSender && 'getStats' in window.RTCRtpReceiver.prototype) {\n    return;\n  }\n  const origGetReceivers = window.RTCPeerConnection.prototype.getReceivers;\n  if (origGetReceivers) {\n    window.RTCPeerConnection.prototype.getReceivers = function getReceivers() {\n      const receivers = origGetReceivers.apply(this, []);\n      receivers.forEach(receiver => receiver._pc = this);\n      return receivers;\n    };\n  }\n  utils.wrapPeerConnectionEvent(window, 'track', e => {\n    e.receiver._pc = e.srcElement;\n    return e;\n  });\n  window.RTCRtpReceiver.prototype.getStats = function getStats() {\n    return this._pc.getStats(this.track);\n  };\n}\n\nexport function shimRemoveStream(window) {\n  if (!window.RTCPeerConnection ||\n      'removeStream' in window.RTCPeerConnection.prototype) {\n    return;\n  }\n  window.RTCPeerConnection.prototype.removeStream =\n    function removeStream(stream) {\n      utils.deprecated('removeStream', 'removeTrack');\n      this.getSenders().forEach(sender => {\n        if (sender.track && stream.getTracks().includes(sender.track)) {\n          this.removeTrack(sender);\n        }\n      });\n    };\n}\n\nexport function shimRTCDataChannel(window) {\n  // rename DataChannel to RTCDataChannel (native fix in FF60):\n  // https://bugzilla.mozilla.org/show_bug.cgi?id=1173851\n  if (window.DataChannel && !window.RTCDataChannel) {\n    window.RTCDataChannel = window.DataChannel;\n  }\n}\n\nexport function shimAddTransceiver(window) {\n  // https://github.com/webrtcHacks/adapter/issues/998#issuecomment-516921647\n  // Firefox ignores the init sendEncodings options passed to addTransceiver\n  // https://bugzilla.mozilla.org/show_bug.cgi?id=1396918\n  if (!(typeof window === 'object' && window.RTCPeerConnection)) {\n    return;\n  }\n  const origAddTransceiver = window.RTCPeerConnection.prototype.addTransceiver;\n  if (origAddTransceiver) {\n    window.RTCPeerConnection.prototype.addTransceiver =\n      function addTransceiver() {\n        this.setParametersPromises = [];\n        const initParameters = arguments[1];\n        const shouldPerformCheck = initParameters &&\n                                  'sendEncodings' in initParameters;\n        if (shouldPerformCheck) {\n          // If sendEncodings params are provided, validate grammar\n          initParameters.sendEncodings.forEach((encodingParam) => {\n            if ('rid' in encodingParam) {\n              const ridRegex = /^[a-z0-9]{0,16}$/i;\n              if (!ridRegex.test(encodingParam.rid)) {\n                throw new TypeError('Invalid RID value provided.');\n              }\n            }\n            if ('scaleResolutionDownBy' in encodingParam) {\n              if (!(parseFloat(encodingParam.scaleResolutionDownBy) >= 1.0)) {\n                throw new RangeError('scale_resolution_down_by must be >= 1.0');\n              }\n            }\n            if ('maxFramerate' in encodingParam) {\n              if (!(parseFloat(encodingParam.maxFramerate) >= 0)) {\n                throw new RangeError('max_framerate must be >= 0.0');\n              }\n            }\n          });\n        }\n        const transceiver = origAddTransceiver.apply(this, arguments);\n        if (shouldPerformCheck) {\n          // Check if the init options were applied. If not we do this in an\n          // asynchronous way and save the promise reference in a global object.\n          // This is an ugly hack, but at the same time is way more robust than\n          // checking the sender parameters before and after the createOffer\n          // Also note that after the createoffer we are not 100% sure that\n          // the params were asynchronously applied so we might miss the\n          // opportunity to recreate offer.\n          const {sender} = transceiver;\n          const params = sender.getParameters();\n          if (!('encodings' in params) ||\n              // Avoid being fooled by patched getParameters() below.\n              (params.encodings.length === 1 &&\n               Object.keys(params.encodings[0]).length === 0)) {\n            params.encodings = initParameters.sendEncodings;\n            sender.sendEncodings = initParameters.sendEncodings;\n            this.setParametersPromises.push(sender.setParameters(params)\n              .then(() => {\n                delete sender.sendEncodings;\n              }).catch(() => {\n                delete sender.sendEncodings;\n              })\n            );\n          }\n        }\n        return transceiver;\n      };\n  }\n}\n\nexport function shimGetParameters(window) {\n  if (!(typeof window === 'object' && window.RTCRtpSender)) {\n    return;\n  }\n  const origGetParameters = window.RTCRtpSender.prototype.getParameters;\n  if (origGetParameters) {\n    window.RTCRtpSender.prototype.getParameters =\n      function getParameters() {\n        const params = origGetParameters.apply(this, arguments);\n        if (!('encodings' in params)) {\n          params.encodings = [].concat(this.sendEncodings || [{}]);\n        }\n        return params;\n      };\n  }\n}\n\nexport function shimCreateOffer(window) {\n  // https://github.com/webrtcHacks/adapter/issues/998#issuecomment-516921647\n  // Firefox ignores the init sendEncodings options passed to addTransceiver\n  // https://bugzilla.mozilla.org/show_bug.cgi?id=1396918\n  if (!(typeof window === 'object' && window.RTCPeerConnection)) {\n    return;\n  }\n  const origCreateOffer = window.RTCPeerConnection.prototype.createOffer;\n  window.RTCPeerConnection.prototype.createOffer = function createOffer() {\n    if (this.setParametersPromises && this.setParametersPromises.length) {\n      return Promise.all(this.setParametersPromises)\n      .then(() => {\n        return origCreateOffer.apply(this, arguments);\n      })\n      .finally(() => {\n        this.setParametersPromises = [];\n      });\n    }\n    return origCreateOffer.apply(this, arguments);\n  };\n}\n\nexport function shimCreateAnswer(window) {\n  // https://github.com/webrtcHacks/adapter/issues/998#issuecomment-516921647\n  // Firefox ignores the init sendEncodings options passed to addTransceiver\n  // https://bugzilla.mozilla.org/show_bug.cgi?id=1396918\n  if (!(typeof window === 'object' && window.RTCPeerConnection)) {\n    return;\n  }\n  const origCreateAnswer = window.RTCPeerConnection.prototype.createAnswer;\n  window.RTCPeerConnection.prototype.createAnswer = function createAnswer() {\n    if (this.setParametersPromises && this.setParametersPromises.length) {\n      return Promise.all(this.setParametersPromises)\n      .then(() => {\n        return origCreateAnswer.apply(this, arguments);\n      })\n      .finally(() => {\n        this.setParametersPromises = [];\n      });\n    }\n    return origCreateAnswer.apply(this, arguments);\n  };\n}\n","/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n'use strict';\nimport * as utils from '../utils';\n\nexport function shimLocalStreamsAPI(window) {\n  if (typeof window !== 'object' || !window.RTCPeerConnection) {\n    return;\n  }\n  if (!('getLocalStreams' in window.RTCPeerConnection.prototype)) {\n    window.RTCPeerConnection.prototype.getLocalStreams =\n      function getLocalStreams() {\n        if (!this._localStreams) {\n          this._localStreams = [];\n        }\n        return this._localStreams;\n      };\n  }\n  if (!('addStream' in window.RTCPeerConnection.prototype)) {\n    const _addTrack = window.RTCPeerConnection.prototype.addTrack;\n    window.RTCPeerConnection.prototype.addStream = function addStream(stream) {\n      if (!this._localStreams) {\n        this._localStreams = [];\n      }\n      if (!this._localStreams.includes(stream)) {\n        this._localStreams.push(stream);\n      }\n      // Try to emulate Chrome's behaviour of adding in audio-video order.\n      // Safari orders by track id.\n      stream.getAudioTracks().forEach(track => _addTrack.call(this, track,\n        stream));\n      stream.getVideoTracks().forEach(track => _addTrack.call(this, track,\n        stream));\n    };\n\n    window.RTCPeerConnection.prototype.addTrack =\n      function addTrack(track, ...streams) {\n        if (streams) {\n          streams.forEach((stream) => {\n            if (!this._localStreams) {\n              this._localStreams = [stream];\n            } else if (!this._localStreams.includes(stream)) {\n              this._localStreams.push(stream);\n            }\n          });\n        }\n        return _addTrack.apply(this, arguments);\n      };\n  }\n  if (!('removeStream' in window.RTCPeerConnection.prototype)) {\n    window.RTCPeerConnection.prototype.removeStream =\n      function removeStream(stream) {\n        if (!this._localStreams) {\n          this._localStreams = [];\n        }\n        const index = this._localStreams.indexOf(stream);\n        if (index === -1) {\n          return;\n        }\n        this._localStreams.splice(index, 1);\n        const tracks = stream.getTracks();\n        this.getSenders().forEach(sender => {\n          if (tracks.includes(sender.track)) {\n            this.removeTrack(sender);\n          }\n        });\n      };\n  }\n}\n\nexport function shimRemoteStreamsAPI(window) {\n  if (typeof window !== 'object' || !window.RTCPeerConnection) {\n    return;\n  }\n  if (!('getRemoteStreams' in window.RTCPeerConnection.prototype)) {\n    window.RTCPeerConnection.prototype.getRemoteStreams =\n      function getRemoteStreams() {\n        return this._remoteStreams ? this._remoteStreams : [];\n      };\n  }\n  if (!('onaddstream' in window.RTCPeerConnection.prototype)) {\n    Object.defineProperty(window.RTCPeerConnection.prototype, 'onaddstream', {\n      get() {\n        return this._onaddstream;\n      },\n      set(f) {\n        if (this._onaddstream) {\n          this.removeEventListener('addstream', this._onaddstream);\n          this.removeEventListener('track', this._onaddstreampoly);\n        }\n        this.addEventListener('addstream', this._onaddstream = f);\n        this.addEventListener('track', this._onaddstreampoly = (e) => {\n          e.streams.forEach(stream => {\n            if (!this._remoteStreams) {\n              this._remoteStreams = [];\n            }\n            if (this._remoteStreams.includes(stream)) {\n              return;\n            }\n            this._remoteStreams.push(stream);\n            const event = new Event('addstream');\n            event.stream = stream;\n            this.dispatchEvent(event);\n          });\n        });\n      }\n    });\n    const origSetRemoteDescription =\n      window.RTCPeerConnection.prototype.setRemoteDescription;\n    window.RTCPeerConnection.prototype.setRemoteDescription =\n      function setRemoteDescription() {\n        const pc = this;\n        if (!this._onaddstreampoly) {\n          this.addEventListener('track', this._onaddstreampoly = function(e) {\n            e.streams.forEach(stream => {\n              if (!pc._remoteStreams) {\n                pc._remoteStreams = [];\n              }\n              if (pc._remoteStreams.indexOf(stream) >= 0) {\n                return;\n              }\n              pc._remoteStreams.push(stream);\n              const event = new Event('addstream');\n              event.stream = stream;\n              pc.dispatchEvent(event);\n            });\n          });\n        }\n        return origSetRemoteDescription.apply(pc, arguments);\n      };\n  }\n}\n\nexport function shimCallbacksAPI(window) {\n  if (typeof window !== 'object' || !window.RTCPeerConnection) {\n    return;\n  }\n  const prototype = window.RTCPeerConnection.prototype;\n  const origCreateOffer = prototype.createOffer;\n  const origCreateAnswer = prototype.createAnswer;\n  const setLocalDescription = prototype.setLocalDescription;\n  const setRemoteDescription = prototype.setRemoteDescription;\n  const addIceCandidate = prototype.addIceCandidate;\n\n  prototype.createOffer =\n    function createOffer(successCallback, failureCallback) {\n      const options = (arguments.length >= 2) ? arguments[2] : arguments[0];\n      const promise = origCreateOffer.apply(this, [options]);\n      if (!failureCallback) {\n        return promise;\n      }\n      promise.then(successCallback, failureCallback);\n      return Promise.resolve();\n    };\n\n  prototype.createAnswer =\n    function createAnswer(successCallback, failureCallback) {\n      const options = (arguments.length >= 2) ? arguments[2] : arguments[0];\n      const promise = origCreateAnswer.apply(this, [options]);\n      if (!failureCallback) {\n        return promise;\n      }\n      promise.then(successCallback, failureCallback);\n      return Promise.resolve();\n    };\n\n  let withCallback = function(description, successCallback, failureCallback) {\n    const promise = setLocalDescription.apply(this, [description]);\n    if (!failureCallback) {\n      return promise;\n    }\n    promise.then(successCallback, failureCallback);\n    return Promise.resolve();\n  };\n  prototype.setLocalDescription = withCallback;\n\n  withCallback = function(description, successCallback, failureCallback) {\n    const promise = setRemoteDescription.apply(this, [description]);\n    if (!failureCallback) {\n      return promise;\n    }\n    promise.then(successCallback, failureCallback);\n    return Promise.resolve();\n  };\n  prototype.setRemoteDescription = withCallback;\n\n  withCallback = function(candidate, successCallback, failureCallback) {\n    const promise = addIceCandidate.apply(this, [candidate]);\n    if (!failureCallback) {\n      return promise;\n    }\n    promise.then(successCallback, failureCallback);\n    return Promise.resolve();\n  };\n  prototype.addIceCandidate = withCallback;\n}\n\nexport function shimGetUserMedia(window) {\n  const navigator = window && window.navigator;\n\n  if (navigator.mediaDevices && navigator.mediaDevices.getUserMedia) {\n    // shim not needed in Safari 12.1\n    const mediaDevices = navigator.mediaDevices;\n    const _getUserMedia = mediaDevices.getUserMedia.bind(mediaDevices);\n    navigator.mediaDevices.getUserMedia = (constraints) => {\n      return _getUserMedia(shimConstraints(constraints));\n    };\n  }\n\n  if (!navigator.getUserMedia && navigator.mediaDevices &&\n    navigator.mediaDevices.getUserMedia) {\n    navigator.getUserMedia = function getUserMedia(constraints, cb, errcb) {\n      navigator.mediaDevices.getUserMedia(constraints)\n      .then(cb, errcb);\n    }.bind(navigator);\n  }\n}\n\nexport function shimConstraints(constraints) {\n  if (constraints && constraints.video !== undefined) {\n    return Object.assign({},\n      constraints,\n      {video: utils.compactObject(constraints.video)}\n    );\n  }\n\n  return constraints;\n}\n\nexport function shimRTCIceServerUrls(window) {\n  if (!window.RTCPeerConnection) {\n    return;\n  }\n  // migrate from non-spec RTCIceServer.url to RTCIceServer.urls\n  const OrigPeerConnection = window.RTCPeerConnection;\n  window.RTCPeerConnection =\n    function RTCPeerConnection(pcConfig, pcConstraints) {\n      if (pcConfig && pcConfig.iceServers) {\n        const newIceServers = [];\n        for (let i = 0; i < pcConfig.iceServers.length; i++) {\n          let server = pcConfig.iceServers[i];\n          if (!server.hasOwnProperty('urls') &&\n              server.hasOwnProperty('url')) {\n            utils.deprecated('RTCIceServer.url', 'RTCIceServer.urls');\n            server = JSON.parse(JSON.stringify(server));\n            server.urls = server.url;\n            delete server.url;\n            newIceServers.push(server);\n          } else {\n            newIceServers.push(pcConfig.iceServers[i]);\n          }\n        }\n        pcConfig.iceServers = newIceServers;\n      }\n      return new OrigPeerConnection(pcConfig, pcConstraints);\n    };\n  window.RTCPeerConnection.prototype = OrigPeerConnection.prototype;\n  // wrap static methods. Currently just generateCertificate.\n  if ('generateCertificate' in OrigPeerConnection) {\n    Object.defineProperty(window.RTCPeerConnection, 'generateCertificate', {\n      get() {\n        return OrigPeerConnection.generateCertificate;\n      }\n    });\n  }\n}\n\nexport function shimTrackEventTransceiver(window) {\n  // Add event.transceiver member over deprecated event.receiver\n  if (typeof window === 'object' && window.RTCTrackEvent &&\n      'receiver' in window.RTCTrackEvent.prototype &&\n      !('transceiver' in window.RTCTrackEvent.prototype)) {\n    Object.defineProperty(window.RTCTrackEvent.prototype, 'transceiver', {\n      get() {\n        return {receiver: this.receiver};\n      }\n    });\n  }\n}\n\nexport function shimCreateOfferLegacy(window) {\n  const origCreateOffer = window.RTCPeerConnection.prototype.createOffer;\n  window.RTCPeerConnection.prototype.createOffer =\n    function createOffer(offerOptions) {\n      if (offerOptions) {\n        if (typeof offerOptions.offerToReceiveAudio !== 'undefined') {\n          // support bit values\n          offerOptions.offerToReceiveAudio =\n            !!offerOptions.offerToReceiveAudio;\n        }\n        const audioTransceiver = this.getTransceivers().find(transceiver =>\n          transceiver.receiver.track.kind === 'audio');\n        if (offerOptions.offerToReceiveAudio === false && audioTransceiver) {\n          if (audioTransceiver.direction === 'sendrecv') {\n            if (audioTransceiver.setDirection) {\n              audioTransceiver.setDirection('sendonly');\n            } else {\n              audioTransceiver.direction = 'sendonly';\n            }\n          } else if (audioTransceiver.direction === 'recvonly') {\n            if (audioTransceiver.setDirection) {\n              audioTransceiver.setDirection('inactive');\n            } else {\n              audioTransceiver.direction = 'inactive';\n            }\n          }\n        } else if (offerOptions.offerToReceiveAudio === true &&\n            !audioTransceiver) {\n          this.addTransceiver('audio');\n        }\n\n        if (typeof offerOptions.offerToReceiveVideo !== 'undefined') {\n          // support bit values\n          offerOptions.offerToReceiveVideo =\n            !!offerOptions.offerToReceiveVideo;\n        }\n        const videoTransceiver = this.getTransceivers().find(transceiver =>\n          transceiver.receiver.track.kind === 'video');\n        if (offerOptions.offerToReceiveVideo === false && videoTransceiver) {\n          if (videoTransceiver.direction === 'sendrecv') {\n            if (videoTransceiver.setDirection) {\n              videoTransceiver.setDirection('sendonly');\n            } else {\n              videoTransceiver.direction = 'sendonly';\n            }\n          } else if (videoTransceiver.direction === 'recvonly') {\n            if (videoTransceiver.setDirection) {\n              videoTransceiver.setDirection('inactive');\n            } else {\n              videoTransceiver.direction = 'inactive';\n            }\n          }\n        } else if (offerOptions.offerToReceiveVideo === true &&\n            !videoTransceiver) {\n          this.addTransceiver('video');\n        }\n      }\n      return origCreateOffer.apply(this, arguments);\n    };\n}\n\nexport function shimAudioContext(window) {\n  if (typeof window !== 'object' || window.AudioContext) {\n    return;\n  }\n  window.AudioContext = window.webkitAudioContext;\n}\n","/*\n *  Copyright (c) 2017 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n/* eslint-env node */\n'use strict';\n\nimport SDPUtils from 'sdp';\nimport * as utils from './utils';\n\nexport function shimRTCIceCandidate(window) {\n  // foundation is arbitrarily chosen as an indicator for full support for\n  // https://w3c.github.io/webrtc-pc/#rtcicecandidate-interface\n  if (!window.RTCIceCandidate || (window.RTCIceCandidate && 'foundation' in\n      window.RTCIceCandidate.prototype)) {\n    return;\n  }\n\n  const NativeRTCIceCandidate = window.RTCIceCandidate;\n  window.RTCIceCandidate = function RTCIceCandidate(args) {\n    // Remove the a= which shouldn't be part of the candidate string.\n    if (typeof args === 'object' && args.candidate &&\n        args.candidate.indexOf('a=') === 0) {\n      args = JSON.parse(JSON.stringify(args));\n      args.candidate = args.candidate.substr(2);\n    }\n\n    if (args.candidate && args.candidate.length) {\n      // Augment the native candidate with the parsed fields.\n      const nativeCandidate = new NativeRTCIceCandidate(args);\n      const parsedCandidate = SDPUtils.parseCandidate(args.candidate);\n      const augmentedCandidate = Object.assign(nativeCandidate,\n          parsedCandidate);\n\n      // Add a serializer that does not serialize the extra attributes.\n      augmentedCandidate.toJSON = function toJSON() {\n        return {\n          candidate: augmentedCandidate.candidate,\n          sdpMid: augmentedCandidate.sdpMid,\n          sdpMLineIndex: augmentedCandidate.sdpMLineIndex,\n          usernameFragment: augmentedCandidate.usernameFragment,\n        };\n      };\n      return augmentedCandidate;\n    }\n    return new NativeRTCIceCandidate(args);\n  };\n  window.RTCIceCandidate.prototype = NativeRTCIceCandidate.prototype;\n\n  // Hook up the augmented candidate in onicecandidate and\n  // addEventListener('icecandidate', ...)\n  utils.wrapPeerConnectionEvent(window, 'icecandidate', e => {\n    if (e.candidate) {\n      Object.defineProperty(e, 'candidate', {\n        value: new window.RTCIceCandidate(e.candidate),\n        writable: 'false'\n      });\n    }\n    return e;\n  });\n}\n\nexport function shimMaxMessageSize(window, browserDetails) {\n  if (!window.RTCPeerConnection) {\n    return;\n  }\n\n  if (!('sctp' in window.RTCPeerConnection.prototype)) {\n    Object.defineProperty(window.RTCPeerConnection.prototype, 'sctp', {\n      get() {\n        return typeof this._sctp === 'undefined' ? null : this._sctp;\n      }\n    });\n  }\n\n  const sctpInDescription = function(description) {\n    if (!description || !description.sdp) {\n      return false;\n    }\n    const sections = SDPUtils.splitSections(description.sdp);\n    sections.shift();\n    return sections.some(mediaSection => {\n      const mLine = SDPUtils.parseMLine(mediaSection);\n      return mLine && mLine.kind === 'application'\n          && mLine.protocol.indexOf('SCTP') !== -1;\n    });\n  };\n\n  const getRemoteFirefoxVersion = function(description) {\n    // TODO: Is there a better solution for detecting Firefox?\n    const match = description.sdp.match(/mozilla...THIS_IS_SDPARTA-(\\d+)/);\n    if (match === null || match.length < 2) {\n      return -1;\n    }\n    const version = parseInt(match[1], 10);\n    // Test for NaN (yes, this is ugly)\n    return version !== version ? -1 : version;\n  };\n\n  const getCanSendMaxMessageSize = function(remoteIsFirefox) {\n    // Every implementation we know can send at least 64 KiB.\n    // Note: Although Chrome is technically able to send up to 256 KiB, the\n    //       data does not reach the other peer reliably.\n    //       See: https://bugs.chromium.org/p/webrtc/issues/detail?id=8419\n    let canSendMaxMessageSize = 65536;\n    if (browserDetails.browser === 'firefox') {\n      if (browserDetails.version < 57) {\n        if (remoteIsFirefox === -1) {\n          // FF < 57 will send in 16 KiB chunks using the deprecated PPID\n          // fragmentation.\n          canSendMaxMessageSize = 16384;\n        } else {\n          // However, other FF (and RAWRTC) can reassemble PPID-fragmented\n          // messages. Thus, supporting ~2 GiB when sending.\n          canSendMaxMessageSize = 2147483637;\n        }\n      } else if (browserDetails.version < 60) {\n        // Currently, all FF >= 57 will reset the remote maximum message size\n        // to the default value when a data channel is created at a later\n        // stage. :(\n        // See: https://bugzilla.mozilla.org/show_bug.cgi?id=1426831\n        canSendMaxMessageSize =\n          browserDetails.version === 57 ? 65535 : 65536;\n      } else {\n        // FF >= 60 supports sending ~2 GiB\n        canSendMaxMessageSize = 2147483637;\n      }\n    }\n    return canSendMaxMessageSize;\n  };\n\n  const getMaxMessageSize = function(description, remoteIsFirefox) {\n    // Note: 65536 bytes is the default value from the SDP spec. Also,\n    //       every implementation we know supports receiving 65536 bytes.\n    let maxMessageSize = 65536;\n\n    // FF 57 has a slightly incorrect default remote max message size, so\n    // we need to adjust it here to avoid a failure when sending.\n    // See: https://bugzilla.mozilla.org/show_bug.cgi?id=1425697\n    if (browserDetails.browser === 'firefox'\n         && browserDetails.version === 57) {\n      maxMessageSize = 65535;\n    }\n\n    const match = SDPUtils.matchPrefix(description.sdp,\n      'a=max-message-size:');\n    if (match.length > 0) {\n      maxMessageSize = parseInt(match[0].substr(19), 10);\n    } else if (browserDetails.browser === 'firefox' &&\n                remoteIsFirefox !== -1) {\n      // If the maximum message size is not present in the remote SDP and\n      // both local and remote are Firefox, the remote peer can receive\n      // ~2 GiB.\n      maxMessageSize = 2147483637;\n    }\n    return maxMessageSize;\n  };\n\n  const origSetRemoteDescription =\n      window.RTCPeerConnection.prototype.setRemoteDescription;\n  window.RTCPeerConnection.prototype.setRemoteDescription =\n    function setRemoteDescription() {\n      this._sctp = null;\n      // Chrome decided to not expose .sctp in plan-b mode.\n      // As usual, adapter.js has to do an 'ugly worakaround'\n      // to cover up the mess.\n      if (browserDetails.browser === 'chrome' && browserDetails.version >= 76) {\n        const {sdpSemantics} = this.getConfiguration();\n        if (sdpSemantics === 'plan-b') {\n          Object.defineProperty(this, 'sctp', {\n            get() {\n              return typeof this._sctp === 'undefined' ? null : this._sctp;\n            },\n            enumerable: true,\n            configurable: true,\n          });\n        }\n      }\n\n      if (sctpInDescription(arguments[0])) {\n        // Check if the remote is FF.\n        const isFirefox = getRemoteFirefoxVersion(arguments[0]);\n\n        // Get the maximum message size the local peer is capable of sending\n        const canSendMMS = getCanSendMaxMessageSize(isFirefox);\n\n        // Get the maximum message size of the remote peer.\n        const remoteMMS = getMaxMessageSize(arguments[0], isFirefox);\n\n        // Determine final maximum message size\n        let maxMessageSize;\n        if (canSendMMS === 0 && remoteMMS === 0) {\n          maxMessageSize = Number.POSITIVE_INFINITY;\n        } else if (canSendMMS === 0 || remoteMMS === 0) {\n          maxMessageSize = Math.max(canSendMMS, remoteMMS);\n        } else {\n          maxMessageSize = Math.min(canSendMMS, remoteMMS);\n        }\n\n        // Create a dummy RTCSctpTransport object and the 'maxMessageSize'\n        // attribute.\n        const sctp = {};\n        Object.defineProperty(sctp, 'maxMessageSize', {\n          get() {\n            return maxMessageSize;\n          }\n        });\n        this._sctp = sctp;\n      }\n\n      return origSetRemoteDescription.apply(this, arguments);\n    };\n}\n\nexport function shimSendThrowTypeError(window) {\n  if (!(window.RTCPeerConnection &&\n      'createDataChannel' in window.RTCPeerConnection.prototype)) {\n    return;\n  }\n\n  // Note: Although Firefox >= 57 has a native implementation, the maximum\n  //       message size can be reset for all data channels at a later stage.\n  //       See: https://bugzilla.mozilla.org/show_bug.cgi?id=1426831\n\n  function wrapDcSend(dc, pc) {\n    const origDataChannelSend = dc.send;\n    dc.send = function send() {\n      const data = arguments[0];\n      const length = data.length || data.size || data.byteLength;\n      if (dc.readyState === 'open' &&\n          pc.sctp && length > pc.sctp.maxMessageSize) {\n        throw new TypeError('Message too large (can send a maximum of ' +\n          pc.sctp.maxMessageSize + ' bytes)');\n      }\n      return origDataChannelSend.apply(dc, arguments);\n    };\n  }\n  const origCreateDataChannel =\n    window.RTCPeerConnection.prototype.createDataChannel;\n  window.RTCPeerConnection.prototype.createDataChannel =\n    function createDataChannel() {\n      const dataChannel = origCreateDataChannel.apply(this, arguments);\n      wrapDcSend(dataChannel, this);\n      return dataChannel;\n    };\n  utils.wrapPeerConnectionEvent(window, 'datachannel', e => {\n    wrapDcSend(e.channel, e.target);\n    return e;\n  });\n}\n\n\n/* shims RTCConnectionState by pretending it is the same as iceConnectionState.\n * See https://bugs.chromium.org/p/webrtc/issues/detail?id=6145#c12\n * for why this is a valid hack in Chrome. In Firefox it is slightly incorrect\n * since DTLS failures would be hidden. See\n * https://bugzilla.mozilla.org/show_bug.cgi?id=1265827\n * for the Firefox tracking bug.\n */\nexport function shimConnectionState(window) {\n  if (!window.RTCPeerConnection ||\n      'connectionState' in window.RTCPeerConnection.prototype) {\n    return;\n  }\n  const proto = window.RTCPeerConnection.prototype;\n  Object.defineProperty(proto, 'connectionState', {\n    get() {\n      return {\n        completed: 'connected',\n        checking: 'connecting'\n      }[this.iceConnectionState] || this.iceConnectionState;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(proto, 'onconnectionstatechange', {\n    get() {\n      return this._onconnectionstatechange || null;\n    },\n    set(cb) {\n      if (this._onconnectionstatechange) {\n        this.removeEventListener('connectionstatechange',\n            this._onconnectionstatechange);\n        delete this._onconnectionstatechange;\n      }\n      if (cb) {\n        this.addEventListener('connectionstatechange',\n            this._onconnectionstatechange = cb);\n      }\n    },\n    enumerable: true,\n    configurable: true\n  });\n\n  ['setLocalDescription', 'setRemoteDescription'].forEach((method) => {\n    const origMethod = proto[method];\n    proto[method] = function() {\n      if (!this._connectionstatechangepoly) {\n        this._connectionstatechangepoly = e => {\n          const pc = e.target;\n          if (pc._lastConnectionState !== pc.connectionState) {\n            pc._lastConnectionState = pc.connectionState;\n            const newEvent = new Event('connectionstatechange', e);\n            pc.dispatchEvent(newEvent);\n          }\n          return e;\n        };\n        this.addEventListener('iceconnectionstatechange',\n          this._connectionstatechangepoly);\n      }\n      return origMethod.apply(this, arguments);\n    };\n  });\n}\n\nexport function removeExtmapAllowMixed(window, browserDetails) {\n  /* remove a=extmap-allow-mixed for webrtc.org < M71 */\n  if (!window.RTCPeerConnection) {\n    return;\n  }\n  if (browserDetails.browser === 'chrome' && browserDetails.version >= 71) {\n    return;\n  }\n  if (browserDetails.browser === 'safari' && browserDetails.version >= 605) {\n    return;\n  }\n  const nativeSRD = window.RTCPeerConnection.prototype.setRemoteDescription;\n  window.RTCPeerConnection.prototype.setRemoteDescription =\n  function setRemoteDescription(desc) {\n    if (desc && desc.sdp && desc.sdp.indexOf('\\na=extmap-allow-mixed') !== -1) {\n      const sdp = desc.sdp.split('\\n').filter((line) => {\n        return line.trim() !== 'a=extmap-allow-mixed';\n      }).join('\\n');\n      // Safari enforces read-only-ness of RTCSessionDescription fields.\n      if (window.RTCSessionDescription &&\n          desc instanceof window.RTCSessionDescription) {\n        arguments[0] = new window.RTCSessionDescription({\n          type: desc.type,\n          sdp,\n        });\n      } else {\n        desc.sdp = sdp;\n      }\n    }\n    return nativeSRD.apply(this, arguments);\n  };\n}\n\nexport function shimAddIceCandidateNullOrEmpty(window, browserDetails) {\n  // Support for addIceCandidate(null or undefined)\n  // as well as addIceCandidate({candidate: \"\", ...})\n  // https://bugs.chromium.org/p/chromium/issues/detail?id=978582\n  // Note: must be called before other polyfills which change the signature.\n  if (!(window.RTCPeerConnection && window.RTCPeerConnection.prototype)) {\n    return;\n  }\n  const nativeAddIceCandidate =\n      window.RTCPeerConnection.prototype.addIceCandidate;\n  if (!nativeAddIceCandidate || nativeAddIceCandidate.length === 0) {\n    return;\n  }\n  window.RTCPeerConnection.prototype.addIceCandidate =\n    function addIceCandidate() {\n      if (!arguments[0]) {\n        if (arguments[1]) {\n          arguments[1].apply(null);\n        }\n        return Promise.resolve();\n      }\n      // Firefox 68+ emits and processes {candidate: \"\", ...}, ignore\n      // in older versions.\n      // Native support for ignoring exists for Chrome M77+.\n      // Safari ignores as well, exact version unknown but works in the same\n      // version that also ignores addIceCandidate(null).\n      if (((browserDetails.browser === 'chrome' && browserDetails.version < 78)\n           || (browserDetails.browser === 'firefox'\n               && browserDetails.version < 68)\n           || (browserDetails.browser === 'safari'))\n          && arguments[0] && arguments[0].candidate === '') {\n        return Promise.resolve();\n      }\n      return nativeAddIceCandidate.apply(this, arguments);\n    };\n}\n","/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n/* eslint-env node */\n\n'use strict';\n\nimport {adapterFactory} from './adapter_factory.js';\n\nconst adapter =\n  adapterFactory({window: typeof window === 'undefined' ? undefined : window});\nexport default adapter;\n","/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\nimport * as utils from './utils';\n\n  // Browser shims.\nimport * as chromeShim from './chrome/chrome_shim';\nimport * as edgeShim from './edge/edge_shim';\nimport * as firefoxShim from './firefox/firefox_shim';\nimport * as safariShim from './safari/safari_shim';\nimport * as commonShim from './common_shim';\n\n// Shimming starts here.\nexport function adapterFactory({window} = {}, options = {\n  shimChrome: true,\n  shimFirefox: true,\n  shimEdge: true,\n  shimSafari: true,\n}) {\n  // Utils.\n  const logging = utils.log;\n  const browserDetails = utils.detectBrowser(window);\n\n  const adapter = {\n    browserDetails,\n    commonShim,\n    extractVersion: utils.extractVersion,\n    disableLog: utils.disableLog,\n    disableWarnings: utils.disableWarnings\n  };\n\n  // Shim browser if found.\n  switch (browserDetails.browser) {\n    case 'chrome':\n      if (!chromeShim || !chromeShim.shimPeerConnection ||\n          !options.shimChrome) {\n        logging('Chrome shim is not included in this adapter release.');\n        return adapter;\n      }\n      if (browserDetails.version === null) {\n        logging('Chrome shim can not determine version, not shimming.');\n        return adapter;\n      }\n      logging('adapter.js shimming chrome.');\n      // Export to the adapter global object visible in the browser.\n      adapter.browserShim = chromeShim;\n\n      // Must be called before shimPeerConnection.\n      commonShim.shimAddIceCandidateNullOrEmpty(window, browserDetails);\n\n      chromeShim.shimGetUserMedia(window, browserDetails);\n      chromeShim.shimMediaStream(window, browserDetails);\n      chromeShim.shimPeerConnection(window, browserDetails);\n      chromeShim.shimOnTrack(window, browserDetails);\n      chromeShim.shimAddTrackRemoveTrack(window, browserDetails);\n      chromeShim.shimGetSendersWithDtmf(window, browserDetails);\n      chromeShim.shimGetStats(window, browserDetails);\n      chromeShim.shimSenderReceiverGetStats(window, browserDetails);\n      chromeShim.fixNegotiationNeeded(window, browserDetails);\n\n      commonShim.shimRTCIceCandidate(window, browserDetails);\n      commonShim.shimConnectionState(window, browserDetails);\n      commonShim.shimMaxMessageSize(window, browserDetails);\n      commonShim.shimSendThrowTypeError(window, browserDetails);\n      commonShim.removeExtmapAllowMixed(window, browserDetails);\n      break;\n    case 'firefox':\n      if (!firefoxShim || !firefoxShim.shimPeerConnection ||\n          !options.shimFirefox) {\n        logging('Firefox shim is not included in this adapter release.');\n        return adapter;\n      }\n      logging('adapter.js shimming firefox.');\n      // Export to the adapter global object visible in the browser.\n      adapter.browserShim = firefoxShim;\n\n      // Must be called before shimPeerConnection.\n      commonShim.shimAddIceCandidateNullOrEmpty(window, browserDetails);\n\n      firefoxShim.shimGetUserMedia(window, browserDetails);\n      firefoxShim.shimPeerConnection(window, browserDetails);\n      firefoxShim.shimOnTrack(window, browserDetails);\n      firefoxShim.shimRemoveStream(window, browserDetails);\n      firefoxShim.shimSenderGetStats(window, browserDetails);\n      firefoxShim.shimReceiverGetStats(window, browserDetails);\n      firefoxShim.shimRTCDataChannel(window, browserDetails);\n      firefoxShim.shimAddTransceiver(window, browserDetails);\n      firefoxShim.shimGetParameters(window, browserDetails);\n      firefoxShim.shimCreateOffer(window, browserDetails);\n      firefoxShim.shimCreateAnswer(window, browserDetails);\n\n      commonShim.shimRTCIceCandidate(window, browserDetails);\n      commonShim.shimConnectionState(window, browserDetails);\n      commonShim.shimMaxMessageSize(window, browserDetails);\n      commonShim.shimSendThrowTypeError(window, browserDetails);\n      break;\n    case 'edge':\n      if (!edgeShim || !edgeShim.shimPeerConnection || !options.shimEdge) {\n        logging('MS edge shim is not included in this adapter release.');\n        return adapter;\n      }\n      logging('adapter.js shimming edge.');\n      // Export to the adapter global object visible in the browser.\n      adapter.browserShim = edgeShim;\n\n      edgeShim.shimGetUserMedia(window, browserDetails);\n      edgeShim.shimGetDisplayMedia(window, browserDetails);\n      edgeShim.shimPeerConnection(window, browserDetails);\n      edgeShim.shimReplaceTrack(window, browserDetails);\n\n      // the edge shim implements the full RTCIceCandidate object.\n\n      commonShim.shimMaxMessageSize(window, browserDetails);\n      commonShim.shimSendThrowTypeError(window, browserDetails);\n      break;\n    case 'safari':\n      if (!safariShim || !options.shimSafari) {\n        logging('Safari shim is not included in this adapter release.');\n        return adapter;\n      }\n      logging('adapter.js shimming safari.');\n      // Export to the adapter global object visible in the browser.\n      adapter.browserShim = safariShim;\n\n      // Must be called before shimCallbackAPI.\n      commonShim.shimAddIceCandidateNullOrEmpty(window, browserDetails);\n\n      safariShim.shimRTCIceServerUrls(window, browserDetails);\n      safariShim.shimCreateOfferLegacy(window, browserDetails);\n      safariShim.shimCallbacksAPI(window, browserDetails);\n      safariShim.shimLocalStreamsAPI(window, browserDetails);\n      safariShim.shimRemoteStreamsAPI(window, browserDetails);\n      safariShim.shimTrackEventTransceiver(window, browserDetails);\n      safariShim.shimGetUserMedia(window, browserDetails);\n      safariShim.shimAudioContext(window, browserDetails);\n\n      commonShim.shimRTCIceCandidate(window, browserDetails);\n      commonShim.shimMaxMessageSize(window, browserDetails);\n      commonShim.shimSendThrowTypeError(window, browserDetails);\n      commonShim.removeExtmapAllowMixed(window, browserDetails);\n      break;\n    default:\n      logging('Unsupported browser!');\n      break;\n  }\n\n  return adapter;\n}\n","function _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}\nmodule.exports = _arrayWithHoles, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","function _iterableToArrayLimit(arr, i) {\n  var _i = null == arr ? null : \"undefined\" != typeof Symbol && arr[Symbol.iterator] || arr[\"@@iterator\"];\n  if (null != _i) {\n    var _s,\n      _e,\n      _x,\n      _r,\n      _arr = [],\n      _n = !0,\n      _d = !1;\n    try {\n      if (_x = (_i = _i.call(arr)).next, 0 === i) {\n        if (Object(_i) !== _i) return;\n        _n = !1;\n      } else for (; !(_n = (_s = _x.call(_i)).done) && (_arr.push(_s.value), _arr.length !== i); _n = !0) {\n        ;\n      }\n    } catch (err) {\n      _d = !0, _e = err;\n    } finally {\n      try {\n        if (!_n && null != _i[\"return\"] && (_r = _i[\"return\"](), Object(_r) !== _r)) return;\n      } finally {\n        if (_d) throw _e;\n      }\n    }\n    return _arr;\n  }\n}\nmodule.exports = _iterableToArrayLimit, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","function _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\nmodule.exports = _nonIterableRest, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","var arrayWithHoles = require(\"./arrayWithHoles.js\");\nvar iterableToArrayLimit = require(\"./iterableToArrayLimit.js\");\nvar unsupportedIterableToArray = require(\"./unsupportedIterableToArray.js\");\nvar nonIterableRest = require(\"./nonIterableRest.js\");\nfunction _slicedToArray(arr, i) {\n  return arrayWithHoles(arr) || iterableToArrayLimit(arr, i) || unsupportedIterableToArray(arr, i) || nonIterableRest();\n}\nmodule.exports = _slicedToArray, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;"],"names":["canUseDOM","window","document","createElement","ExecutionEnvironment","canUseWorkers","Worker","canUseEventListeners","addEventListener","attachEvent","canUseViewport","screen","define","getOwnPropertySymbols","Object","hasOwnProperty","prototype","propIsEnumerable","propertyIsEnumerable","toObject","val","undefined","TypeError","module","exports","assign","test1","String","getOwnPropertyNames","test2","i","fromCharCode","map","n","join","test3","split","forEach","letter","keys","err","shouldUseNative","target","source","from","symbols","to","s","arguments","length","key","call","ReactPropTypesSecret","require","emptyFunction","emptyFunctionWithReset","resetWarningCache","shim","props","propName","componentName","location","propFullName","secret","Error","name","getShim","isRequired","ReactPropTypes","array","bigint","bool","func","number","object","string","symbol","any","arrayOf","element","elementType","instanceOf","node","objectOf","oneOf","oneOfType","shape","exact","checkPropTypes","PropTypes","mode","QR8bitByte","data","this","MODE_8BIT_BYTE","getLength","buffer","write","put","charCodeAt","QRBitBuffer","Array","get","index","bufIndex","Math","floor","num","putBit","getLengthInBits","bit","push","L","M","Q","H","math","QRPolynomial","shift","offset","multiply","e","j","gexp","glog","mod","ratio","BitByte","RSBlock","BitBuffer","util","Polynomial","QRCode","typeNumber","errorCorrectLevel","modules","moduleCount","dataCache","dataList","proto","addData","newData","isDark","row","col","getModuleCount","make","rsBlocks","getRSBlocks","totalDataCount","dataCount","makeImpl","getBestMaskPattern","test","maskPattern","setupPositionProbePattern","setupPositionAdjustPattern","setupTimingPattern","setupTypeInfo","setupTypeNumber","createData","mapData","r","c","minLostPoint","pattern","lostPoint","getLostPoint","createMovieClip","target_mc","instance_name","depth","qr_mc","createEmptyMovieClip","y","x","beginFill","moveTo","lineTo","endFill","pos","getPatternPosition","bits","getBCHTypeNumber","getBCHTypeInfo","inc","bitIndex","byteIndex","dark","getMask","PAD0","PAD1","createBytes","maxDcCount","maxEcCount","dcdata","ecdata","dcCount","ecCount","totalCount","max","rsPoly","getErrorCorrectPolynomial","modPoly","modIndex","totalCodeCount","ECL","QRRSBlock","RS_BLOCK_TABLE","rsBlock","getRsBlockTable","list","count","QRMath","LOG_TABLE","EXP_TABLE","MODE_NUMBER","MODE_ALPHA_NUM","MODE_KANJI","Mode","QRMaskPattern","QRUtil","PATTERN_POSITION_TABLE","G15","G18","G15_MASK","d","getBCHDigit","digit","errorCorrectLength","a","type","qrCode","sameCount","darkCount","abs","componentWillMount","state","constructor","getDerivedStateFromProps","setState","componentWillReceiveProps","nextProps","prevState","bind","componentWillUpdate","nextState","prevProps","__reactInternalSnapshotFlag","__reactInternalSnapshot","getSnapshotBeforeUpdate","polyfill","Component","isReactComponent","foundWillMountName","foundWillReceivePropsName","foundWillUpdateName","UNSAFE_componentWillMount","UNSAFE_componentWillReceiveProps","UNSAFE_componentWillUpdate","displayName","newApiName","componentDidUpdate","maybeSnapshot","snapshot","__suppressDeprecationWarning","defineProperty","value","bodyOpenClassName","portalClassName","_extends","_createClass","defineProperties","descriptor","enumerable","configurable","writable","Constructor","protoProps","staticProps","_react","_react2","_interopRequireDefault","_reactDom2","_propTypes2","_ModalPortal2","ariaAppHider","obj","__esModule","newObj","default","_interopRequireWildcard","_safeHTMLElement","_safeHTMLElement2","_reactLifecyclesCompat","_classCallCheck","instance","_possibleConstructorReturn","self","ReferenceError","isReact16","createPortal","createHTMLElement","getCreatePortal","unstable_renderSubtreeIntoContainer","getParentElement","parentSelector","Modal","_Component","_ref","_temp","_this","_len","args","_key","__proto__","getPrototypeOf","apply","concat","removePortal","unmountComponentAtNode","parent","contains","removeChild","console","warn","portalRef","ref","portal","renderPortal","defaultStyles","subClass","superClass","create","setPrototypeOf","_inherits","className","appendChild","prevParent","nextParent","_","_props","isOpen","now","Date","closesAt","closeTimeoutMS","beforeClose","closeWithTimeout","setTimeout","setElement","propTypes","style","content","overlay","htmlOpenClassName","base","afterOpen","overlayClassName","appElement","SafeHTMLCollection","SafeNodeList","onAfterOpen","onRequestClose","ariaHideApp","shouldFocusAfterRender","shouldCloseOnOverlayClick","shouldReturnFocusAfterClose","preventScroll","aria","role","contentLabel","shouldCloseOnEsc","overlayRef","contentRef","id","overlayElement","contentElement","defaultProps","body","contentEl","children","position","top","left","right","bottom","backgroundColor","border","background","overflow","WebkitOverflowScrolling","borderRadius","outline","padding","_typeof","Symbol","iterator","focusManager","_scopeTab2","classList","_portalOpenInstances2","CLASS_NAMES","ariaHiddenInstances","ModalPortal","setOverlayRef","setContentRef","afterClose","_this$props","parentDocument","ownerDocument","remove","getElementsByTagName","show","returnFocus","teardownScopedFocus","popWithoutFocus","onAfterClose","deregister","open","beforeOpen","clearTimeout","closeTimer","setupScopedFocus","markForFocusLater","openAnimationFrame","requestAnimationFrame","overlayEl","close","closeWithoutTimeout","focusContent","contentHasFocus","focus","handleKeyDown","event","code","keyCode","isTabKey","isEscKey","stopPropagation","requestClose","handleOverlayOnClick","shouldClose","ownerHandlesClose","handleContentOnMouseUp","handleOverlayOnMouseDown","preventDefault","handleContentOnClick","handleContentOnMouseDown","shouldBeClosed","activeElement","buildClassName","which","additional","classNames","attributesFromObject","prefix","items","reduce","acc","moveFromContentToOverlay","cancelAnimationFrame","add","hide","register","_props2","contentStyles","overlayStyles","overlayProps","onClick","onMouseDown","contentProps","tabIndex","onKeyDown","onMouseUp","modal","testId","resetState","globalElement","removeAttribute","querySelectorAll","log","process","assertNodeList","useElement","el","validateElement","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","next","done","setAttribute","return","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","_step2","_iterator2","documentNotReadyOrSSRTesting","_warning","_warning2","nodeList","selector","isArray","HTMLCollection","NodeList","_arr","before","after","_i","item","parentNode","instances","_arr2","_i2","check","nodeName","_portalOpenInstances","subscribe","eventType","openInstances","opacity","cloneNode","firstChild","insertBefore","lastChild","parentElement","htmlElement","cls","htmlClassList","removeClass","_cls","docBodyClassList","at","classString","classListRef","poll","toLowerCase","incrementReference","decrementReference","focusLaterElements","handleBlur","handleFocus","toFocus","pop","modalElement","removeEventListener","detachEvent","_tabbable","_tabbable2","needToFocus","portalOpenInstances","p","PortalOpenInstances","openInstance","indexOf","emit","splice","callback","subscribers","subscriber","slice","_exenv","EE","SafeHTMLElement","HTMLElement","tabbable","shiftKey","head","tail","getActiveElement","checkSafari","exec","navigator","userAgent","shadowRoot","findTabbableDescendants","descendants","finished","filter","tabbableNode","hidesContents","zeroSize","offsetWidth","offsetHeight","innerHTML","getComputedStyle","displayValue","getPropertyValue","scrollWidth","scrollHeight","isNotOverflowing","exception","focusable","isTabIndexNotNaN","disabled","href","rootNode","getRootNode","host","visible","getAttribute","isTabIndexNaN","isNaN","_Modal","_Modal2","SDPUtils","writeMediaSection","transceiver","caps","stream","dtlsRole","sdp","writeRtpDescription","kind","writeIceParameters","iceGatherer","getLocalParameters","writeDtlsParameters","dtlsTransport","mid","rtpSender","rtpReceiver","trackId","_initialTrackId","track","msid","sendEncodingParameters","ssrc","rtx","localCName","getCommonCapabilities","localCapabilities","remoteCapabilities","commonCapabilities","codecs","headerExtensions","fecMechanisms","findCodecByPayloadType","pt","parseInt","payloadType","preferredPayloadType","rtxCapabilityMatches","lRtx","rRtx","lCodecs","rCodecs","lCodec","parameters","apt","rCodec","clockRate","JSON","parse","stringify","numChannels","min","rtcpFeedback","fb","parameter","lHeaderExtension","rHeaderExtension","uri","isActionAllowedInSignalingState","action","signalingState","offer","setLocalDescription","setRemoteDescription","answer","maybeAddCandidate","iceTransport","candidate","alreadyAdded","getRemoteCandidates","find","remoteCandidate","foundation","ip","port","priority","protocol","addRemoteCandidate","makeError","description","NotSupportedError","InvalidStateError","InvalidAccessError","OperationError","edgeVersion","addTrackToStreamAndFireEvent","addTrack","dispatchEvent","MediaStreamTrackEvent","fireAddTrack","pc","receiver","streams","trackEvent","Event","_dispatchEvent","RTCPeerConnection","config","_eventTarget","createDocumentFragment","method","canTrickleIceCandidates","needNegotiation","localStreams","remoteStreams","_localDescription","_remoteDescription","iceConnectionState","connectionState","iceGatheringState","usingBundle","bundlePolicy","rtcpMuxPolicy","iceTransportPolicy","iceServers","hasTurn","server","urls","url","isString","filterIceServers","_iceGatherers","iceCandidatePoolSize","RTCIceGatherer","gatherPolicy","_config","transceivers","_sdpSessionId","generateSessionId","_sdpSessionVersion","_dtlsRole","_isClosed","onicecandidate","onaddstream","ontrack","onremovestream","onsignalingstatechange","oniceconnectionstatechange","onconnectionstatechange","onicegatheringstatechange","onnegotiationneeded","ondatachannel","_emitGatheringStateChange","getConfiguration","getLocalStreams","getRemoteStreams","_createTransceiver","doNotAdd","hasBundleTransport","recvEncodingParameters","associatedRemoteMediaStreams","wantReceive","transports","_createIceAndDtlsTransports","_maybeFireNegotiationNeeded","RTCRtpSender","addStream","getTracks","clonedStream","clone","idx","clonedTrack","enabled","removeTrack","sender","t","stop","removeStream","getSenders","getReceivers","_createIceGatherer","sdpMLineIndex","bufferedCandidateEvents","bufferCandidates","end","_gather","onlocalcandidate","evt","sdpMid","cand","component","ufrag","usernameFragment","serializedCandidate","writeCandidate","parseCandidate","toJSON","sections","getMediaSections","getDescription","complete","every","RTCIceTransport","onicestatechange","_updateIceConnectionState","_updateConnectionState","RTCDtlsTransport","ondtlsstatechange","onerror","_disposeIceAndDtlsTransports","_transceive","send","recv","params","encodings","rtcp","cname","compound","rtcpParameters","receive","sessionpart","Promise","reject","splitSections","mediaSection","parseRtpParameters","isIceLite","matchPrefix","isRejected","rejected","remoteIceParameters","getIceParameters","remoteDtlsParameters","getDtlsParameters","start","_updateSignalingState","resolve","receiverList","iceOptions","substr","lines","splitLines","getKind","direction","getDirection","remoteMsid","parseMsid","getMid","generateIdentifier","parseRtpEncodingParameters","parseRtcpParameters","isComplete","cands","setTransport","setRemoteCandidates","MediaStream","RTCRtpReceiver","getCapabilities","codec","isNewTrack","nativeTrack","removeTrackFromStreamAndFireEvent","sid","newState","states","closed","checking","connected","completed","disconnected","failed","new","connecting","createOffer","numAudioTracks","numVideoTracks","offerOptions","mandatory","optional","offerToReceiveAudio","offerToReceiveVideo","writeSessionBoilerplate","remoteCodec","hdrExt","rHdrExt","getLocalCandidates","desc","RTCSessionDescription","createAnswer","mediaSectionsInOffer","localTrack","getAudioTracks","getVideoTracks","reducedSize","addIceCandidate","candidateString","trim","getStats","MediaStreamTrack","senderOrReceiver","promises","all","then","allStats","results","Map","stats","stat","set","ortcObjectName","nativeGetstats","nativeStats","mapStats","inboundrtp","outboundrtp","candidatepair","localcandidate","remotecandidate","methods","nativeMethod","error","random","toString","blob","line","part","parts","substring","address","relatedAddress","relatedPort","tcpType","toUpperCase","parseIceOptions","parseRtpMap","parsed","channels","writeRtpMap","parseExtmap","writeExtmap","headerExtension","preferredId","parseFmtp","kv","writeFmtp","param","parseRtcpFb","writeRtcpFb","parseSsrcMedia","sp","colon","attribute","parseSsrcGroup","semantics","ssrcs","parseFingerprint","algorithm","fingerprints","setupType","fp","parseCryptoLine","tag","cryptoSuite","keyParams","sessionParams","writeCryptoLine","writeCryptoKeyParams","parseCryptoKeyParams","keyMethod","keySalt","lifeTime","mkiValue","mkiLength","getCryptoParameters","pwd","password","mline","rtpmapline","fmtps","maxptime","extension","secondarySsrc","encodingParameters","hasRed","hasUlpfec","primarySsrc","flows","encParam","codecPayloadType","fec","mechanism","bandwidth","maxBitrate","remoteSsrc","rsize","mux","spec","planB","msidParts","parseSctpDescription","maxMessageSize","parseMLine","maxSizeLine","sctpPort","fmt","writeSctpDescription","media","sctp","output","sessId","sessVer","sessUser","version","parseOLine","username","sessionId","sessionVersion","netType","addressType","isValidSDP","charAt","warning","logDisabled_","deprecationWarnings_","extractVersion","uastring","expr","match","wrapPeerConnectionEvent","eventNameToWrap","wrapper","nativeAddEventListener","nativeEventName","cb","wrappedCallback","modifiedEvent","handleEvent","_eventMap","nativeRemoveEventListener","has","unwrappedCb","delete","size","disableLog","disableWarnings","deprecated","oldMethod","newMethod","detectBrowser","result","browser","mozGetUserMedia","webkitGetUserMedia","isSecureContext","webkitRTCPeerConnection","mediaDevices","supportsUnifiedPlan","RTCRtpTransceiver","isObject","compactObject","accumulator","isObj","isEmptyObject","walkStats","resultSet","endsWith","filterStats","outbound","streamStatsType","filteredResult","trackStats","trackIdentifier","trackStat","logging","utils","shimGetUserMedia","browserDetails","constraintsToChrome_","cc","ideal","oldname_","oc","mix","advanced","shimConstraints_","constraints","audio","remap","b","video","face","facingMode","matches","getSupportedFacingModeLies","getSupportedConstraints","enumerateDevices","devices","dev","some","label","includes","deviceId","shimError_","PermissionDeniedError","PermissionDismissedError","DevicesNotFoundError","ConstraintNotSatisfiedError","TrackStartError","MediaDeviceFailedDueToShutdown","MediaDeviceKillSwitchOn","TabCaptureError","ScreenCaptureError","DeviceCaptureError","message","constraint","constraintName","getUserMedia","onSuccess","onError","origGetUserMedia","cs","DOMException","shimGetDisplayMedia","getSourceId","getDisplayMedia","sourceId","widthSpecified","width","heightSpecified","height","frameRateSpecified","frameRate","chromeMediaSource","chromeMediaSourceId","maxFrameRate","maxWidth","maxHeight","shimMediaStream","webkitMediaStream","shimOnTrack","_ontrack","f","origSetRemoteDescription","_ontrackpoly","te","shimGetSendersWithDtmf","shimSenderWithDtmf","dtmf","_dtmf","createDTMFSender","_pc","_senders","origAddTrack","origRemoveTrack","origAddStream","origRemoveStream","origGetSenders","senders","shimGetStats","origGetStats","onSucc","onErr","fixChromeStats_","response","standardReport","report","standardStats","timestamp","names","makeMapStats","successCallbackWrapper_","shimSenderReceiverGetStats","origGetReceivers","receivers","srcElement","shimAddTrackRemoveTrackWithNative","_shimmedLocalStreams","streamId","existingSenders","newSenders","newSender","shimAddTrackRemoveTrack","origGetLocalStreams","nativeStreams","_reverseStreams","_streams","newStream","alreadyExists","oldStream","methodObj","isLegacyCall","replaceInternalStreamId","origSetLocalDescription","replaceExternalStreamId","origLocalDescription","getOwnPropertyDescriptor","streamid","internalId","externalStream","internalStream","replace","RegExp","shimPeerConnection","RTCIceCandidate","fixNegotiationNeeded","sdpSemantics","catch","origMSTEnabled","ev","RTCDtmfSender","RTCDTMFSender","RTCPeerConnectionShim","shimRTCPeerConnection","validTurn","startsWith","shimReplaceTrack","replaceTrack","setTrack","nativeGetUserMedia","getSettings","nativeGetSettings","applyConstraints","nativeApplyConstraints","preferredMediaSource","mediaSource","RTCTrackEvent","mozRTCPeerConnection","modernStatsTypes","nativeGetStats","shimSenderGetStats","shimReceiverGetStats","shimRemoveStream","shimRTCDataChannel","DataChannel","RTCDataChannel","shimAddTransceiver","origAddTransceiver","addTransceiver","setParametersPromises","initParameters","shouldPerformCheck","sendEncodings","encodingParam","rid","parseFloat","scaleResolutionDownBy","RangeError","maxFramerate","getParameters","setParameters","shimGetParameters","origGetParameters","shimCreateOffer","origCreateOffer","finally","shimCreateAnswer","origCreateAnswer","shimLocalStreamsAPI","_localStreams","_addTrack","tracks","shimRemoteStreamsAPI","_remoteStreams","_onaddstream","_onaddstreampoly","shimCallbacksAPI","successCallback","failureCallback","options","promise","withCallback","_getUserMedia","shimConstraints","errcb","shimRTCIceServerUrls","OrigPeerConnection","pcConfig","pcConstraints","newIceServers","generateCertificate","shimTrackEventTransceiver","shimCreateOfferLegacy","audioTransceiver","getTransceivers","setDirection","videoTransceiver","shimAudioContext","AudioContext","webkitAudioContext","shimRTCIceCandidate","NativeRTCIceCandidate","nativeCandidate","parsedCandidate","augmentedCandidate","shimMaxMessageSize","_sctp","sctpInDescription","mLine","getRemoteFirefoxVersion","getCanSendMaxMessageSize","remoteIsFirefox","canSendMaxMessageSize","getMaxMessageSize","isFirefox","canSendMMS","remoteMMS","Number","POSITIVE_INFINITY","shimSendThrowTypeError","origCreateDataChannel","createDataChannel","dataChannel","wrapDcSend","channel","dc","origDataChannelSend","byteLength","readyState","shimConnectionState","_onconnectionstatechange","origMethod","_connectionstatechangepoly","_lastConnectionState","newEvent","removeExtmapAllowMixed","nativeSRD","shimAddIceCandidateNullOrEmpty","nativeAddIceCandidate","adapter","shimChrome","shimFirefox","shimEdge","shimSafari","commonShim","chromeShim","browserShim","firefoxShim","edgeShim","safariShim","adapterFactory","arr","_s","_e","_x","_r","_n","_d","arrayWithHoles","iterableToArrayLimit","unsupportedIterableToArray","nonIterableRest"],"sourceRoot":""}